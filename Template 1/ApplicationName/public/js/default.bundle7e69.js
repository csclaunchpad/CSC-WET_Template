var Handlebars,q,portal;if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){"use strict";var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery);+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(void 0!==i.style[t])return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){n.support.transition=t();n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));"string"==typeof i&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.prototype.close=function(i){function e(){r.detach().trigger("closed.bs.alert").remove()}var f=n(this),u=f.attr("data-target"),r;u||(u=f.attr("href"),u=u&&u.replace(/.*(?=#[^\s]*$)/,""));r=n(u);i&&i.preventDefault();r.length||(r=f.closest(".alert"));r.trigger(i=n.Event("close.bs.alert"));i.isDefaultPrevented()||(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f="object"==typeof i&&i;r||u.data("bs.button",r=new t(this,f));"toggle"==i?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.3.5";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t+="Text";null==u.resetText&&i.data("resetText",i[f]());setTimeout(n.proxy(function(){i[f](null==u[t]?this.options[t]:u[t]);"loadingText"==t?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length?(n=this.$element.find("input"),"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),i.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")):(this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active"))};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");n(t.target).is('input[type="radio"]')||n(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){n(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),"object"==typeof i&&i),e="string"==typeof i?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));"number"==typeof i?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",n.proxy(this.keydown,this));"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},u,r;t.VERSION="3.3.5";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0};t.prototype.keydown=function(n){if(!/input|textarea/i.test(n.target.tagName)){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()}};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.getItemForDirection=function(n,t){var i=this.getItemIndex(t),f="prev"==n&&0===i||"next"==n&&i==this.$items.length-1,r,u;return f&&!this.options.wrap?t:(r="prev"==n?-1:1,u=(i+r)%this.$items.length,this.$items.eq(u))};t.prototype.to=function(n){var i=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(n>this.$items.length-1)&&!(0>n))return this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(n)}):t==n?this.pause().cycle():this.slide(n>t?"next":"prev",this.$items.eq(n))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(i,r){var e=this.$element.find(".item.active"),u=r||this.getItemForDirection(i,e),l=this.interval,f="next"==i?"left":"right",a=this,o,s,h,c;return u.hasClass("active")?this.sliding=!1:(o=u[0],s=n.Event("slide.bs.carousel",{relatedTarget:o,direction:f}),(this.$element.trigger(s),!s.isDefaultPrevented())?((this.sliding=!0,l&&this.pause(),this.$indicators.length)&&(this.$indicators.find(".active").removeClass("active"),h=n(this.$indicators.children()[this.getItemIndex(u)]),h&&h.addClass("active")),c=n.Event("slid.bs.carousel",{relatedTarget:o,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(u.addClass(i),u[0].offsetWidth,e.addClass(f),u.addClass(f),e.one("bsTransitionEnd",function(){u.removeClass([i,f].join(" ")).addClass("active");e.removeClass(["active",f].join(" "));a.sliding=!1;setTimeout(function(){a.$element.trigger(c)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(e.removeClass("active"),u.addClass("active"),this.sliding=!1,this.$element.trigger(c)),l&&this.cycle(),this):void 0)};u=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=u,this};r=function(t){var o,r=n(this),u=n(r.attr("data-target")||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")),e,f;u.hasClass("carousel")&&(e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to"),f&&(e.interval=!1),i.call(u,e),f&&u.data("bs.carousel").to(f),t.preventDefault())};n(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r);n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),"object"==typeof i&&i);!r&&f.toggle&&/show|hide/.test(i)&&(f.toggle=!1);r||u.data("bs.collapse",r=new t(this,f));"string"==typeof i&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.$trigger=n('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},u;t.VERSION="3.3.5";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,r,e,u,o,s;if(!this.transitioning&&!this.$element.hasClass("in")&&(r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing"),!(r&&r.length&&(f=r.data("bs.collapse"),f&&f.transitioning))&&(e=n.Event("show.bs.collapse"),this.$element.trigger(e),!e.isDefaultPrevented()))){if(r&&r.length&&(i.call(r,"hide"),f||r.data("bs.collapse",null)),u=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[u](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[u]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return o.call(this);s=n.camelCase(["scroll",u].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[u](this.$element[0][s])}};t.prototype.hide=function(){var r,i,u;if(!this.transitioning&&this.$element.hasClass("in")&&(r=n.Event("hide.bs.collapse"),this.$element.trigger(r),!r.isDefaultPrevented()))return i=this.dimension(),this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,u=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},n.support.transition?void this.$element[i](0).one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION):u.call(this)};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,i){var u=n(i);this.addAriaAndCollapsedClass(r(u),u)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(n,t){var i=n.hasClass("in");n.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};u=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=u,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var u=n(this);u.attr("data-target")||t.preventDefault();var f=r(u),e=f.data("bs.collapse"),o=e?"toggle":u.data();i.call(f,o)})}(jQuery);+function(n){"use strict";function r(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function u(t){t&&3===t.which||(n(o).remove(),n(i).each(function(){var u=n(this),i=r(u),f={relatedTarget:this};i.hasClass("open")&&(t&&"click"==t.type&&/input|textarea/i.test(t.target.tagName)&&n.contains(i[0],t.target)||(i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented()||(u.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",f))))}))}function e(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));"string"==typeof i&&u[i].call(r)})}var o=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.5";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=r(f),o=i.hasClass("open"),u(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&n(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(n(this)).on("click",u),e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,u;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=r(e),s=o.hasClass("open"),!s&&27!=t.which||s&&27==t.which)return 27==t.which&&o.find(i).trigger("focus"),e.trigger("click");h=" li:not(.disabled):visible a";f=o.find(".dropdown-menu"+h);f.length&&(u=f.index(t.target),38==t.which&&u>0&&u--,40==t.which&&u<f.length-1&&u++,~u||(u=0),f.eq(u).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=e;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",u).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),"object"==typeof i&&i);u||f.data("bs.modal",u=new t(this,e));"string"==typeof i?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.3.5";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(i){var r=this,u=n.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(u);this.isShown||u.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){n(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var f=n.support.transition&&r.$element.hasClass("fade"),u;r.$element.parent().length||r.$element.appendTo(r.$body);r.$element.show().scrollTop(0);r.adjustDialog();f&&r.$element[0].offsetWidth;r.$element.addClass("in");r.enforceFocus();u=n.Event("shown.bs.modal",{relatedTarget:i});f?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(u)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(u)}))};t.prototype.hide=function(i){i&&i.preventDefault();i=n.Event("hide.bs.modal");this.$element.trigger(i);this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){27==n.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")};t.prototype.resize=function(){this.isShown?n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this)):n(window).off("resize.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$body.removeClass("modal-open");n.resetAdjustments();n.resetScrollbar();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var e=this,f=this.$element.hasClass("fade")?"fade":"",r,u;if(this.isShown&&this.options.backdrop){if(r=n.support.transition&&f,this.$backdrop=n(document.createElement("div")).addClass("modal-backdrop "+f).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",n.proxy(function(n){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(n.target===n.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),u=function(){e.removeBackdrop();i&&i()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",u).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):u()):i&&i()};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var n=window.innerWidth,t;n||(t=document.documentElement.getBoundingClientRect(),n=t.right-Math.abs(t.left));this.bodyIsOverflowing=document.body.clientWidth<n;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){n.isDefaultPrevented()||u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tooltip"),f="object"==typeof i&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.tooltip",r=new t(this,f)),"string"==typeof i&&r[i]())})}var t=function(n,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",n,t)},i;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;if(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(n.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],"click"==u)this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else"manual"!=u&&(o="hover"==u?"mouseenter":"focusin",s="hover"==u?"mouseleave":"focusout",this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this)));this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())};t.prototype.isInStateTrue=function(){for(var n in this.inState)if(this.inState[n])return!0;return!1};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())};t.prototype.show=function(){var c=n.Event("show.bs."+this.type),l,p,e,w,h;if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;var u=this,r=this.tip(),a=this.getUID(this.type);this.setContent();r.attr("id",a);this.$element.attr("aria-describedby",a);this.options.animation&&r.addClass("fade");var i="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,v=/\s?auto?\s?/i,y=v.test(i);y&&(i=i.replace(v,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var f=this.getPosition(),o=r[0].offsetWidth,s=r[0].offsetHeight;y&&(p=i,e=this.getPosition(this.$viewport),i="bottom"==i&&f.bottom+s>e.bottom?"top":"top"==i&&f.top-s<e.top?"bottom":"right"==i&&f.right+o>e.width?"left":"left"==i&&f.left-o<e.left?"right":i,r.removeClass(p).addClass(i));w=this.getCalculatedOffset(i,f,o,s);this.applyPlacement(w,i);h=function(){var n=u.hoverState;u.$element.trigger("shown.bs."+u.type);u.hoverState=null;"out"==n&&u.leave(u)};n.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",h).emulateTransitionEnd(t.TRANSITION_DURATION):h()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top+=o;t.left+=s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;"top"==i&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?2*u.left-l+h:2*u.top-e+f,v=c?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(a,r[0][v],c)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){function f(){"in"!=u.hoverState&&r.detach();u.$element.removeAttr("aria-describedby").trigger("hidden.bs."+u.type);i&&i()}var u=this,r=n(this.$tip),e=n.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",f).emulateTransitionEnd(t.TRANSITION_DURATION):f(),this.hoverState=null,this)};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||"string"!=typeof n.attr("data-original-title"))&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var u=t[0],r="BODY"==u.tagName,i=u.getBoundingClientRect();null==i.width&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=r?{top:0,left:0}:t.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,e,o,f)};t.prototype.getCalculatedOffset=function(n,t,i,r){return"bottom"==n?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==n?{top:t.top-r,left:t.left+t.width/2-i/2}:"left"==n?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.right&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(1e6*Math.random());while(document.getElementById(n));return n};t.prototype.tip=function(){if(!this.$tip&&(this.$tip=n(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout);this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type);n.$tip&&n.$tip.detach();n.$tip=null;n.$arrow=null;n.$viewport=null})};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.popover"),f="object"==typeof i&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.popover",r=new t(this,f)),"string"==typeof i&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.5";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof t?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||("function"==typeof n.content?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery);+function(n){"use strict";function t(i,r){this.$body=n(document.body);this.$scrollElement=n(n(i).is(document.body)?window:i);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",n.proxy(this.process,this));this.refresh();this.process()}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f="object"==typeof i&&i;r||u.data("bs.scrollspy",r=new t(this,f));"string"==typeof i&&r[i]()})}t.VERSION="3.3.5";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var t=this,i="offset",r=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();n.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop());this.$body.find(this.selector).map(function(){var f=n(this),u=f.data("target")||f.attr("href"),t=/^#./.test(u)&&n(u);return t&&t.length&&t.is(":visible")&&[[t[i]().top+r,u]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var n,i=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),e=this.options.offset+f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget;if(this.scrollHeight!=f&&this.refresh(),i>=e)return u!=(n=r[r.length-1])&&this.activate(n);if(u&&i<t[0])return this.activeTarget=null,this.clear();for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(void 0===t[n+1]||i<t[n+1])&&this.activate(r[n])};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){n(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=n.fn.scrollspy;n.fn.scrollspy=i;n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this};n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));"string"==typeof i&&r[i]()})}var t=function(t){this.element=n(t)},u,i;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),u;if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=f.find(".active:last a"),e=n.Event("hide.bs.tab",{relatedTarget:t[0]}),o=n.Event("show.bs.tab",{relatedTarget:r[0]});(r.trigger(e),t.trigger(o),o.isDefaultPrevented()||e.isDefaultPrevented())||(u=n(i),this.activate(t.closest("li"),f),this.activate(u,u.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}};t.prototype.activate=function(i,r,u){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);o?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade");i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);u&&u()}var f=r.find("> .active"),o=u&&n.support.transition&&(f.length&&f.hasClass("fade")||!!r.find("> .fade").length);f.length&&o?f.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e();f.removeClass("in")};u=n.fn.tab;n.fn.tab=r;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=u,this};i=function(t){t.preventDefault();r.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f="object"==typeof i&&i;r||u.data("bs.affix",r=new t(this,f));"string"==typeof i&&r[i]()})}var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()},r;t.VERSION="3.3.5";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(n,t,i,r){var u=this.$target.scrollTop(),f=this.$element.offset(),e=this.$target.height();if(null!=i&&"top"==this.affixed)return i>u?"top":!1;if("bottom"==this.affixed)return null!=i?u+this.unpin<=f.top?!1:"bottom":n-r>=u+e?!1:"bottom";var o=null==this.affixed,s=o?u:f.top,h=o?e:t;return null!=i&&i>=u?"top":null!=r&&s+h>=n-r?"bottom":!1};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-n};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i,e,o;if(this.$element.is(":visible")){var s=this.$element.height(),r=this.options.offset,f=r.top,u=r.bottom,h=Math.max(n(document).height(),n(document.body).height());if("object"!=typeof r&&(u=f=r),"function"==typeof f&&(f=r.top(this.$element)),"function"==typeof u&&(u=r.bottom(this.$element)),i=this.getState(h,s,f,u),this.affixed!=i){if(null!=this.unpin&&this.$element.css("top",""),e="affix"+(i?"-"+i:""),o=n.Event(e+".bs.affix"),this.$element.trigger(o),o.isDefaultPrevented())return;this.affixed=i;this.unpin="bottom"==i?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(e).trigger(e.replace("affix","affixed")+".bs.affix")}"bottom"==i&&this.$element.offset({top:h-s-u})}};r=n.fn.affix;n.fn.affix=i;n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=r,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var r=n(this),t=r.data();t.offset=t.offset||{};null!=t.offsetBottom&&(t.offset.bottom=t.offsetBottom);null!=t.offsetTop&&(t.offset.top=t.offsetTop);i.call(r,t)})})}(jQuery);window.addEventListener||function(n,t,i,r,u,f,e){n[r]=t[r]=i[r]=function(n,t){var i=this;e.unshift([i,n,t,function(n){n.currentTarget=i;n.preventDefault=function(){n.returnValue=!1};n.stopPropagation=function(){n.cancelBubble=!0};n.target=n.srcElement||i;t.call(i,n)}]);this.attachEvent("on"+n,e[0][3])};n[u]=t[u]=i[u]=function(n,t){for(var r=0,i;i=e[r];++r)if(i[0]==this&&i[1]==n&&i[2]==t)return this.detachEvent("on"+n,e.splice(r,1)[0][3])};n[f]=t[f]=i[f]=function(n){return this.fireEvent("on"+n.type,n)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);Handlebars=function(){var r=function(){"use strict";function n(n){this.string=n}return n.prototype.toString=function(){return""+this.string},n}(),t=function(n){"use strict";function h(n){return e[n]||"&amp;"}function c(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}function l(n){return n instanceof f?n.toString():!n&&n!==0?"":(n=""+n,!s.test(n))?n:n.replace(o,h)}function a(n){return n||n===0?u(n)&&n.length===0?!0:!1:!0}var t={},f=n,e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o=/[&<>"'`]/g,s=/[&<>"'`]/,i,r,u;return t.extend=c,i=Object.prototype.toString,t.toString=i,r=function(n){return typeof n=="function"},r(/x/)&&(r=function(n){return typeof n=="function"&&i.call(n)==="[object Function]"}),t.isFunction=r,u=Array.isArray||function(n){return n&&typeof n=="object"?i.call(n)==="[object Array]":!1},t.isArray=u,t.escapeExpression=l,t.isEmpty=a,t}(r),n=function(){"use strict";function t(t,i){var u,f,r;for(i&&i.firstLine&&(u=i.firstLine,t+=" - "+u+":"+i.firstColumn),f=Error.prototype.constructor.call(this,t),r=0;r<n.length;r++)this[n[r]]=f[n[r]];u&&(this.lineNumber=u,this.column=i.firstColumn)}var n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,t}(),i=function(n,t){"use strict";function e(n,t){this.helpers=n||{};this.partials=t||{};p(this)}function p(n){n.registerHelper("helperMissing",function(n){if(arguments.length===2)return undefined;throw new s("Missing helper: '"+n+"'");});n.registerHelper("blockHelperMissing",function(t,i){var r=i.inverse||function(){},u=i.fn;return f(t)&&(t=t.call(this)),t===!0?u(this):t===!1||t==null?r(this):l(t)?t.length>0?n.helpers.each(t,i):r(this):u(t)});n.registerHelper("each",function(n,t){var s=t.fn,c=t.inverse,r=0,u="",i,h,e;if(f(n)&&(n=n.call(this)),t.data&&(i=o(t.data)),n&&typeof n=="object")if(l(n))for(h=n.length;r<h;r++)i&&(i.index=r,i.first=r===0,i.last=r===n.length-1),u=u+s(n[r],{data:i});else for(e in n)n.hasOwnProperty(e)&&(i&&(i.key=e,i.index=r,i.first=r===0),u=u+s(n[e],{data:i}),r++);return r===0&&(u=c(this)),u});n.registerHelper("if",function(n,t){return f(n)&&(n=n.call(this)),(t.hash.includeZero||n)&&!r.isEmpty(n)?t.fn(this):t.inverse(this)});n.registerHelper("unless",function(t,i){return n.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})});n.registerHelper("with",function(n,t){return f(n)&&(n=n.call(this)),r.isEmpty(n)?void 0:t.fn(n)});n.registerHelper("log",function(t,i){var r=i.data&&i.data.level!=null?parseInt(i.data.level,10):1;n.log(r,t)})}function y(n,t){u.log(n,t)}var i={},r=n,s=t,h,c,u,o;i.VERSION="1.3.0";h=4;i.COMPILER_REVISION=h;c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};i.REVISION_CHANGES=c;var l=r.isArray,f=r.isFunction,a=r.toString,v="[object Object]";return i.HandlebarsEnvironment=e,e.prototype={constructor:e,logger:u,log:y,registerHelper:function(n,t,i){if(a.call(n)===v){if(i||t)throw new s("Arg not supported with multiple helpers");r.extend(this.helpers,n)}else i&&(t.not=i),this.helpers[n]=t},registerPartial:function(n,t){a.call(n)===v?r.extend(this.partials,n):this.partials[n]=t}},u={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(n,t){if(u.level<=n){var i=u.methodMap[n];typeof console!="undefined"&&console[i]&&console[i].call(console,t)}}},i.logger=u,i.log=y,o=function(n){var t={};return r.extend(t,n),t},i.createFrame=o,i}(t,n),f=function(n,t,i){"use strict";function h(n){var t=n&&n[0]||1,i=s,r,f;if(t!==i)if(t<i){r=o[i];f=o[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+f+").");}else throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+n[1]+").");}function c(n,t){if(!t)throw new u("No environment passed to template");var r=function(n,i,r,f,e,o){var s=t.VM.invokePartial.apply(this,arguments),h;if(s!=null)return s;if(t.compile)return h={helpers:f,partials:e,data:o},e[i]=t.compile(n,{data:o!==undefined},t),e[i](r,h);throw new u("The partial "+i+" could not be compiled when running in runtime-only mode");},i={escapeExpression:f.escapeExpression,invokePartial:r,programs:[],program:function(n,t,i){var r=this.programs[n];return i?r=e(n,t,i):r||(r=this.programs[n]=e(n,t)),r},merge:function(n,t){var i=n||t;return n&&t&&n!==t&&(i={},f.extend(i,t),f.extend(i,n)),i},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(r,u){var f,e,o,s;return u=u||{},f=u.partial?u:t,u.partial||(e=u.helpers,o=u.partials),s=n.call(i,f,r,e,o,u.data),u.partial||t.VM.checkRevision(i.compilerInfo),s}}function l(n,t,i){var u=Array.prototype.slice.call(arguments,3),r=function(n,r){return r=r||{},t.apply(this,[n,r.data||i].concat(u))};return r.program=n,r.depth=u.length,r}function e(n,t,i){var r=function(n,r){return r=r||{},t(n,r.data||i)};return r.program=n,r.depth=0,r}function a(n,t,i,r,f,e){var o={partial:!0,helpers:r,partials:f,data:e};if(n===undefined)throw new u("The partial "+t+" could not be found");else if(n instanceof Function)return n(i,o)}function v(){return""}var r={},f=n,u=t,s=i.COMPILER_REVISION,o=i.REVISION_CHANGES;return r.checkRevision=h,r.template=c,r.programWithDepth=l,r.program=e,r.invokePartial=a,r.noop=v,r}(t,n,i),e=function(n,t,i,r,u){"use strict";var f=n,c=t,l=i,e=r,o=u,s=function(){var n=new f.HandlebarsEnvironment;return e.extend(n,f),n.SafeString=c,n.Exception=l,n.Utils=e,n.VM=o,n.template=function(t){return o.template(t,n)},n},h=s();return h.create=s,h}(i,r,n,t,f),u=function(n){"use strict";function t(n){n=n||{};this.firstLine=n.first_line;this.firstColumn=n.first_column;this.lastColumn=n.last_column;this.lastLine=n.last_line}var r=n,i={ProgramNode:function(n,r,u,f){var o,e;arguments.length===3?(f=u,u=null):arguments.length===2&&(f=r,r=null);t.call(this,f);this.type="program";this.statements=n;this.strip={};u?(e=u[0],e?(o={first_line:e.firstLine,last_line:e.lastLine,last_column:e.lastColumn,first_column:e.firstColumn},this.inverse=new i.ProgramNode(u,r,o)):this.inverse=new i.ProgramNode(u,r),this.strip.right=r.left):r&&(this.strip.left=r.right)},MustacheNode:function(n,r,u,f,e){if(t.call(this,e),this.type="mustache",this.strip=f,u!=null&&u.charAt){var o=u.charAt(3)||u.charAt(2);this.escaped=o!=="{"&&o!=="&"}else this.escaped=!!u;this.sexpr=n instanceof i.SexprNode?n:new i.SexprNode(n,r);this.sexpr.isRoot=!0;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(n,i,r){t.call(this,r);this.type="sexpr";this.hash=i;var u=this.id=n[0],f=this.params=n.slice(1),e=this.eligibleHelper=u.isSimple;this.isHelper=e&&(f.length||i)},PartialNode:function(n,i,r,u){t.call(this,u);this.type="partial";this.partialName=n;this.context=i;this.strip=r},BlockNode:function(n,i,u,f,e){if(t.call(this,e),n.sexpr.id.original!==f.path.original)throw new r(n.sexpr.id.original+" doesn't match "+f.path.original,this);this.type="block";this.mustache=n;this.program=i;this.inverse=u;this.strip={left:n.strip.left,right:f.strip.right};(i||u).strip.left=n.strip.right;(u||i).strip.right=f.strip.left;u&&!i&&(this.isInverse=!0)},ContentNode:function(n,i){t.call(this,i);this.type="content";this.string=n},HashNode:function(n,i){t.call(this,i);this.type="hash";this.pairs=n},IdNode:function(n,i){var f,h,u;t.call(this,i);this.type="ID";var o="",e=[],s=0;for(f=0,h=n.length;f<h;f++)if(u=n[f].part,o+=(n[f].separator||"")+u,u===".."||u==="."||u==="this")if(e.length>0)throw new r("Invalid path: "+o,this);else u===".."?s++:this.isScoped=!0;else e.push(u);this.original=o;this.parts=e;this.string=e.join(".");this.depth=s;this.isSimple=n.length===1&&!this.isScoped&&s===0;this.stringModeValue=this.string},PartialNameNode:function(n,i){t.call(this,i);this.type="PARTIAL_NAME";this.name=n.original},DataNode:function(n,i){t.call(this,i);this.type="DATA";this.id=n},StringNode:function(n,i){t.call(this,i);this.type="STRING";this.original=this.string=this.stringModeValue=n},IntegerNode:function(n,i){t.call(this,i);this.type="INTEGER";this.original=this.integer=n;this.stringModeValue=Number(n)},BooleanNode:function(n,i){t.call(this,i);this.type="BOOLEAN";this.bool=n;this.stringModeValue=n==="true"},CommentNode:function(n,i){t.call(this,i);this.type="comment";this.comment=n}};return i}(n),o=function(){"use strict";return function(){function n(n,t){return{left:n.charAt(2)==="~",right:t.charAt(0)==="~"||t.charAt(1)==="~"}}function i(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,i,r,u,f,e){var o=e.length-1;switch(f){case 1:return new u.ProgramNode(e[o-1],this._$);case 2:return new u.ProgramNode([],this._$);case 3:this.$=new u.ProgramNode([],e[o-1],e[o],this._$);break;case 4:this.$=new u.ProgramNode(e[o-2],e[o-1],e[o],this._$);break;case 5:this.$=new u.ProgramNode(e[o-1],e[o],[],this._$);break;case 6:this.$=new u.ProgramNode(e[o],this._$);break;case 7:this.$=new u.ProgramNode([],this._$);break;case 8:this.$=new u.ProgramNode([],this._$);break;case 9:this.$=[e[o]];break;case 10:e[o-1].push(e[o]);this.$=e[o-1];break;case 11:this.$=new u.BlockNode(e[o-2],e[o-1].inverse,e[o-1],e[o],this._$);break;case 12:this.$=new u.BlockNode(e[o-2],e[o-1],e[o-1].inverse,e[o],this._$);break;case 13:this.$=e[o];break;case 14:this.$=e[o];break;case 15:this.$=new u.ContentNode(e[o],this._$);break;case 16:this.$=new u.CommentNode(e[o],this._$);break;case 17:this.$=new u.MustacheNode(e[o-1],null,e[o-2],n(e[o-2],e[o]),this._$);break;case 18:this.$=new u.MustacheNode(e[o-1],null,e[o-2],n(e[o-2],e[o]),this._$);break;case 19:this.$={path:e[o-1],strip:n(e[o-2],e[o])};break;case 20:this.$=new u.MustacheNode(e[o-1],null,e[o-2],n(e[o-2],e[o]),this._$);break;case 21:this.$=new u.MustacheNode(e[o-1],null,e[o-2],n(e[o-2],e[o]),this._$);break;case 22:this.$=new u.PartialNode(e[o-2],e[o-1],n(e[o-3],e[o]),this._$);break;case 23:this.$=n(e[o-1],e[o]);break;case 24:this.$=new u.SexprNode([e[o-2]].concat(e[o-1]),e[o],this._$);break;case 25:this.$=new u.SexprNode([e[o]],null,this._$);break;case 26:this.$=e[o];break;case 27:this.$=new u.StringNode(e[o],this._$);break;case 28:this.$=new u.IntegerNode(e[o],this._$);break;case 29:this.$=new u.BooleanNode(e[o],this._$);break;case 30:this.$=e[o];break;case 31:e[o-1].isHelper=!0;this.$=e[o-1];break;case 32:this.$=new u.HashNode(e[o],this._$);break;case 33:this.$=[e[o-2],e[o]];break;case 34:this.$=new u.PartialNameNode(e[o],this._$);break;case 35:this.$=new u.PartialNameNode(new u.StringNode(e[o],this._$),this._$);break;case 36:this.$=new u.PartialNameNode(new u.IntegerNode(e[o],this._$));break;case 37:this.$=new u.DataNode(e[o],this._$);break;case 38:this.$=new u.IdNode(e[o],this._$);break;case 39:e[o-2].push({part:e[o],separator:e[o-1]});this.$=e[o-2];break;case 40:this.$=[{part:e[o]}];break;case 43:this.$=[];break;case 44:e[o-1].push(e[o]);break;case 47:this.$=[e[o]];break;case 48:e[o-1].push(e[o])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(n){throw new Error(n);},parse:function(n){function it(){var n;return n=k.lexer.lex()||1,typeof n!="number"&&(n=k.symbols_[n]||n),n}var k=this,r=[0],f=[null],t=[],h=this.table,d="",c=0,g=0,y=0,l,nt,i,p,o,u,w,s,a,e,tt,v,b;for(this.lexer.setInput(n),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={}),l=this.lexer.yylloc,t.push(l),nt=this.lexer.options&&this.lexer.options.ranges,typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError),s={};;){if(o=r[r.length-1],this.defaultActions[o]?u=this.defaultActions[o]:((i===null||typeof i=="undefined")&&(i=it()),u=h[o]&&h[o][i]),(typeof u=="undefined"||!u.length||!u[0])&&(b="",!y)){v=[];for(a in h[o])this.terminals_[a]&&a>2&&v.push("'"+this.terminals_[a]+"'");b=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[i]||i)+"'":"Parse error on line "+(c+1)+": Unexpected "+(i==1?"end of input":"'"+(this.terminals_[i]||i)+"'");this.parseError(b,{text:this.lexer.match,token:this.terminals_[i]||i,line:this.lexer.yylineno,loc:l,expected:v})}if(u[0]instanceof Array&&u.length>1)throw new Error("Parse Error: multiple actions possible at state: "+o+", token: "+i);switch(u[0]){case 1:r.push(i);f.push(this.lexer.yytext);t.push(this.lexer.yylloc);r.push(u[1]);i=null;p?(i=p,p=null):(g=this.lexer.yyleng,d=this.lexer.yytext,c=this.lexer.yylineno,l=this.lexer.yylloc,y>0&&y--);break;case 2:if(e=this.productions_[u[1]][1],s.$=f[f.length-e],s._$={first_line:t[t.length-(e||1)].first_line,last_line:t[t.length-1].last_line,first_column:t[t.length-(e||1)].first_column,last_column:t[t.length-1].last_column},nt&&(s._$.range=[t[t.length-(e||1)].range[0],t[t.length-1].range[1]]),w=this.performAction.call(s,d,g,c,this.yy,u[1],f,t),typeof w!="undefined")return w;e&&(r=r.slice(0,-2*e),f=f.slice(0,-1*e),t=t.slice(0,-1*e));r.push(this.productions_[u[1]][0]);f.push(s.$);t.push(s._$);tt=h[r[r.length-2]][r[r.length-1]];r.push(tt);break;case 3:return!0}}return!0}},r=function(){var n={EOF:1,parseError:function(n,t){if(this.yy.parser)this.yy.parser.parseError(n,t);else throw new Error(n);},setInput:function(n){return this._input=n,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var n=this._input[0],t;return this.yytext+=n,this.yyleng++,this.offset++,this.match+=n,this.matched+=n,t=n.match(/(?:\r\n?|\n).*/g),t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),n},unput:function(n){var i=n.length,t=n.split(/(?:\r\n?|\n)/g),r,u;return this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-i-1),this.offset-=i,r=this.match.split(/(?:\r\n?|\n)/g),this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),t.length-1&&(this.yylineno-=t.length-1),u=this.yylloc.range,this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:t?(t.length===r.length?this.yylloc.first_column:0)+r[r.length-t.length].length-t[0].length:this.yylloc.first_column-i},this.options.ranges&&(this.yylloc.range=[u[0],u[0]+this.yyleng-i]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var n=this.matched.substr(0,this.matched.length-this.match.length);return(n.length>20?"...":"")+n.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var n=this.match;return n.length<20&&(n+=this._input.substr(0,20-n.length)),(n.substr(0,20)+(n.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var n=this.pastInput(),t=new Array(n.length+1).join("-");return n+this.upcomingInput()+"\n"+t+"^"},next:function(){var f,n,r,e,t,u,i;if(this.done)return this.EOF;for(this._input||(this.done=!0),this._more||(this.yytext="",this.match=""),u=this._currentRules(),i=0;i<u.length;i++)if(r=this._input.match(this.rules[u[i]]),r&&(!n||r[0].length>n[0].length)&&(n=r,e=i,!this.options.flex))break;return n?(t=n[0].match(/(?:\r\n?|\n).*/g),t&&(this.yylineno+=t.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:t?t[t.length-1].length-t[t.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.matches=n,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],f=this.performAction.call(this,this.yy,this,u[e],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),f)?f:void 0:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var n=this.next();return typeof n!="undefined"?n:this.lex()},begin:function(n){this.conditionStack.push(n)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(n){this.begin(n)}};return n.options={},n.performAction=function(n,t,i,r){function u(n,i){return t.yytext=t.yytext.substr(n,t.yyleng-i)}var f=r;switch(i){case 0:if(t.yytext.slice(-2)==="\\\\"?(u(0,1),this.begin("mu")):t.yytext.slice(-1)==="\\"?(u(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return u(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState();this.begin("com");break;case 14:return u(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=u(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=u(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=u(1,2),40;case 31:return"INVALID";case 32:return 5}},n.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],n.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},n}();return t.lexer=r,i.prototype=t,t.Parser=i,new i}()}(),s=function(n,t){"use strict";function f(n){return n.constructor===u.ProgramNode?n:(r.yy=u,r.parse(n))}var i={},r=n,u=t;return i.parser=r,i.parse=f,i}(o,u),h=function(n){"use strict";function r(){}function u(n,t,r){if(n==null||typeof n!="string"&&n.constructor!==r.AST.ProgramNode)throw new i("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+n);t=t||{};"data"in t||(t.data=!0);var u=r.parse(n),f=(new r.Compiler).compile(u,t);return(new r.JavaScriptCompiler).compile(f,t)}function f(n,t,r){function f(){var i=r.parse(n),u=(new r.Compiler).compile(i,t),f=(new r.JavaScriptCompiler).compile(u,t,undefined,!0);return r.template(f)}if(n==null||typeof n!="string"&&n.constructor!==r.AST.ProgramNode)throw new i("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);t=t||{};"data"in t||(t.data=!0);var u;return function(n,t){return u||(u=f()),u.call(this,n,t)}}var t={},i=n;return t.Compiler=r,r.prototype={compiler:r,disassemble:function(){for(var i,e=this.opcodes,n,r=[],u,t,f=0,o=e.length;f<o;f++)if(n=e[f],n.opcode==="DECLARE")r.push("DECLARE "+n.name+"="+n.value);else{for(u=[],i=0;i<n.args.length;i++)t=n.args[i],typeof t=="string"&&(t='"'+t.replace("\n","\\n")+'"'),u.push(t);r.push(n.opcode+" "+u.join(" "))}return r.join("\n")},equals:function(n){var i=this.opcodes.length,t,r,f,u;if(n.opcodes.length!==i)return!1;for(t=0;t<i;t++){if(r=this.opcodes[t],f=n.opcodes[t],r.opcode!==f.opcode||r.args.length!==f.args.length)return!1;for(u=0;u<r.args.length;u++)if(r.args[u]!==f.args[u])return!1}if(i=this.children.length,n.children.length!==i)return!1;for(t=0;t<i;t++)if(!this.children[t].equals(n.children[t]))return!1;return!0},guid:0,compile:function(n,t){var i,r;if(this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t,i=this.options.knownHelpers,this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(r in i)this.options.knownHelpers[r]=i[r];return this.accept(n)},accept:function(n){var t=n.strip||{},i;return t.left&&this.opcode("strip"),i=this[n.type](n),t.right&&this.opcode("strip"),i},program:function(n){for(var i=n.statements,t=0,r=i.length;t<r;t++)this.accept(i[t]);return this.isSimple=r===1,this.depths.list=this.depths.list.sort(function(n,t){return n-t}),this},compileProgram:function(n){var t=(new this.compiler).compile(n,this.options),u=this.guid++,r,i,f;for(this.usePartial=this.usePartial||t.usePartial,this.children[u]=t,i=0,f=t.depths.list.length;i<f;i++)if(r=t.depths.list[i],r<2)continue;else this.addDepth(r-1);return u},block:function(n){var f=n.mustache,t=n.program,i=n.inverse,r,u;t&&(t=this.compileProgram(t));i&&(i=this.compileProgram(i));r=f.sexpr;u=this.classifySexpr(r);u==="helper"?this.helperSexpr(r,t,i):u==="simple"?(this.simpleSexpr(r),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(r,t,i),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(n){var u=n.pairs,r,t,i,f;for(this.opcode("pushHash"),i=0,f=u.length;i<f;i++)r=u[i],t=r[1],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),t.type==="sexpr"&&this.sexpr(t)):this.accept(t),this.opcode("assignToHash",r[0]);this.opcode("popHash")},partial:function(n){var t=n.partialName;this.usePartial=!0;n.context?this.ID(n.context):this.opcode("push","depth0");this.opcode("invokePartial",t.name);this.opcode("append")},content:function(n){this.opcode("appendContent",n.string)},mustache:function(n){this.sexpr(n.sexpr);n.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(n,t,i){var r=n.id,u=r.parts[0],f=t!=null||i!=null;this.opcode("getContext",r.depth);this.opcode("pushProgram",t);this.opcode("pushProgram",i);this.opcode("invokeAmbiguous",u,f)},simpleSexpr:function(n){var t=n.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext"));this.opcode("resolvePossibleLambda")},helperSexpr:function(n,t,r){var f=this.setupFullMustacheParams(n,t,r),u=n.id.parts[0];if(this.options.knownHelpers[u])this.opcode("invokeKnownHelper",f.length,u);else if(this.options.knownHelpersOnly)throw new i("You specified knownHelpersOnly, but used the unknown helper "+u,n);else this.opcode("invokeHelper",f.length,u,n.isRoot)},sexpr:function(n){var t=this.classifySexpr(n);t==="simple"?this.simpleSexpr(n):t==="helper"?this.helperSexpr(n):this.ambiguousSexpr(n)},ID:function(n){var i,t,r;for(this.addDepth(n.depth),this.opcode("getContext",n.depth),i=n.parts[0],i?this.opcode("lookupOnContext",n.parts[0]):this.opcode("pushContext"),t=1,r=n.parts.length;t<r;t++)this.opcode("lookup",n.parts[t])},DATA:function(n){var r,t,u;if(this.options.data=!0,n.id.isScoped||n.id.depth)throw new i("Scoped data references are not supported: "+n.original,n);for(this.opcode("lookupData"),r=n.id.parts,t=0,u=r.length;t<u;t++)this.opcode("lookup",r[t])},STRING:function(n){this.opcode("pushString",n.string)},INTEGER:function(n){this.opcode("pushLiteral",n.integer)},BOOLEAN:function(n){this.opcode("pushLiteral",n.bool)},comment:function(){},opcode:function(n){this.opcodes.push({opcode:n,args:[].slice.call(arguments,1)})},declare:function(n,t){this.opcodes.push({opcode:"DECLARE",name:n,value:t})},addDepth:function(n){n!==0&&(this.depths[n]||(this.depths[n]=!0,this.depths.list.push(n)))},classifySexpr:function(n){var t=n.isHelper,i=n.eligibleHelper,r=this.options,u;return i&&!t&&(u=n.id.parts[0],r.knownHelpers[u]?t=!0:r.knownHelpersOnly&&(i=!1)),t?"helper":i?"ambiguous":"simple"},pushParams:function(n){for(var i=n.length,t;i--;)t=n[i],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),t.type==="sexpr"&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(n,t,i){var r=n.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",i),n.hash?this.hash(n.hash):this.opcode("emptyHash"),r}},t.precompile=u,t.compile=f,t}(n),c=function(n,t){"use strict";function r(n){this.value=n}function i(){}var c=n.COMPILER_REVISION,l=n.REVISION_CHANGES,e=n.log,o=t,f,s,u,h;for(i.prototype={nameLookup:function(n,t){var u,r;return n.indexOf("depth")===0&&(u=!0),r=/^[0-9]+$/.test(t)?n+"["+t+"]":i.isValidJavaScriptVariableName(t)?n+"."+t:n+"['"+t+"']",u?"("+n+" && "+r+")":r},compilerInfo:function(){var n=c,t=l[n];return"this.compilerInfo = ["+n+",'"+t+"'];\n"},appendToBuffer:function(n){return this.environment.isSimple?"return "+n+";":{appendToBuffer:!0,content:n,toString:function(){return"buffer += "+n+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(n,t,i,r){var f,u,s;for(this.environment=n,this.options=t||{},e("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(n,t),f=n.opcodes,this.i=0,s=f.length;this.i<s;this.i++)u=f[this.i],u.opcode==="DECLARE"?this[u.name]=u.value:this[u.opcode].apply(this,u.args),u.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o("Compile completed with content left on stack");return this.createFunctionContext(r)},preamble:function(){var t=[],i,n;this.isChild?t.push(""):(i=this.namespace,n="helpers = this.merge(helpers, "+i+".helpers);",this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+i+".partials);"),this.options.data&&(n=n+" data = data || {};"),t.push(n));this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=t},createFunctionContext:function(n){var o=this.stackVars.concat(this.registers.list),r,t,u,s,i,f;if(o.length>0&&(this.source[1]=this.source[1]+", "+o.join(", ")),!this.isChild)for(r in this.context.aliases)this.context.aliases.hasOwnProperty(r)&&(this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r]);for(this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;"),t=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],u=0,s=this.environment.depths.list.length;u<s;u++)t.push("depth"+this.environment.depths.list[u]);return i=this.mergeSource(),this.isChild||(i=this.compilerInfo()+i),n?(t.push(i),Function.apply(this,t)):(f="function "+(this.name||"")+"("+t.join(",")+") {\n  "+i+"}",e("debug",f+"\n\n"),f)},mergeSource:function(){for(var t,i="",n,r=0,u=this.source.length;r<u;r++)t=this.source[r],t.appendToBuffer?n=n?n+"\n    + "+t.content:t.content:(n&&(i+="buffer += "+n+";\n  ",n=undefined),i+=t+"\n  ");return i},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var n=["depth0"];this.setupParams(0,n);this.replaceStack(function(t){return n.splice(1,0,t),"blockHelperMissing.call("+n.join(", ")+")"})},ambiguousBlockValue:function(){var n,t;this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";n=["depth0"];this.setupParams(0,n);t=this.topStack();n.splice(1,0,t);this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+n.join(", ")+"); }")},appendContent:function(n){this.pendingContent&&(n=this.pendingContent+n);this.stripNext&&(n=n.replace(/^\s+/,""));this.pendingContent=n},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,""));this.stripNext="strip"},append:function(){this.flushInline();var n=this.popStack();this.pushSource("if("+n+" || "+n+" === 0) { "+this.appendToBuffer(n)+" }");this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(n){this.lastContext!==n&&(this.lastContext=n)},lookupOnContext:function(n){this.push(this.nameLookup("depth"+this.lastContext,n,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(n){return"typeof "+n+" === functionType ? "+n+".apply(depth0) : "+n})},lookup:function(n){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,n,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(n,t){this.pushStackLiteral("depth"+this.lastContext);this.pushString(t);t!=="sexpr"&&(typeof n=="string"?this.pushString(n):this.pushStackLiteral(n))},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash);this.hash={values:[],types:[],contexts:[]}},popHash:function(){var n=this.hash;this.hash=this.hashes.pop();this.options.stringParams&&(this.push("{"+n.contexts.join(",")+"}"),this.push("{"+n.types.join(",")+"}"));this.push("{\n    "+n.values.join(",\n    ")+"\n  }")},pushString:function(n){this.pushStackLiteral(this.quotedString(n))},push:function(n){return this.inlineStack.push(n),n},pushLiteral:function(n){this.pushStackLiteral(n)},pushProgram:function(n){n!=null?this.pushStackLiteral(this.programExpression(n)):this.pushStackLiteral(null)},invokeHelper:function(n,t,i){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var r=this.lastHelper=this.setupHelper(n,t,!0),f=this.nameLookup("depth"+this.lastContext,t,"context"),u="helper = "+r.name+" || "+f;r.paramsInit&&(u+=","+r.paramsInit);this.push("("+u+",helper ? helper.call("+r.callParams+") : helperMissing.call("+r.helperMissingParams+"))");i||this.flushInline()},invokeKnownHelper:function(n,t){var i=this.setupHelper(n,t);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(n,t){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var i=this.setupHelper(0,n,t),u=this.lastHelper=this.nameLookup("helpers",n,"helper"),f=this.nameLookup("depth"+this.lastContext,n,"context"),r=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit);this.pushSource("if (helper = "+u+") { "+r+" = helper.call("+i.callParams+"); }");this.pushSource("else { helper = "+f+"; "+r+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(n){var t=[this.nameLookup("partials",n,"partial"),"'"+n+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(n){var u=this.popStack(),i,r,t;this.options.stringParams&&(r=this.popStack(),i=this.popStack());t=this.hash;i&&t.contexts.push("'"+n+"': "+i);r&&t.types.push("'"+n+"': "+r);t.values.push("'"+n+"': ("+u+")")},compiler:i,compileChildren:function(n,t){for(var i,f=n.children,r,e,u=0,o=f.length;u<o;u++)r=f[u],e=new this.compiler,i=this.matchExistingProgram(r),i==null?(this.context.programs.push(""),i=this.context.programs.length,r.index=i,r.name="program"+i,this.context.programs[i]=e.compile(r,t,this.context),this.context.environments[i]=r):(r.index=i,r.name="program"+i)},matchExistingProgram:function(n){for(var i,t=0,r=this.context.environments.length;t<r;t++)if(i=this.context.environments[t],i&&i.equals(n))return t},programExpression:function(n){var t,e;if(this.context.aliases.self="this",n==null)return"self.noop";var i=this.environment.children[n],r=i.depths.list,u,f=[i.index,i.name,"data"];for(t=0,e=r.length;t<e;t++)u=r[t],u===1?f.push("depth0"):f.push("depth"+(u-1));return(r.length===0?"self.program(":"self.programWithDepth(")+f.join(", ")+")"},register:function(n,t){this.useRegister(n);this.pushSource(n+" = "+t+";")},useRegister:function(n){this.registers[n]||(this.registers[n]=!0,this.registers.list.push(n))},pushStackLiteral:function(n){return this.push(new r(n))},pushSource:function(n){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=undefined);n&&this.source.push(n)},pushStack:function(n){this.flushInline();var t=this.incrStack();return n&&this.pushSource(t+" = "+n+";"),this.compileStack.push(t),t},replaceStack:function(n){var u="",o=this.isInline(),t,f,s,i,h,e;return o?(i=this.popStack(!0),i instanceof r?(t=i.value,s=!0):(f=!this.stackSlot,h=f?this.incrStack():this.topStackName(),u="("+this.push(h)+" = "+i+"),",t=this.topStack())):t=this.topStack(),e=n.call(this,t),o?(s||this.popStack(),f&&this.stackSlot--,this.push("("+u+e+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+u+e+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var i=this.inlineStack,n,u,t;if(i.length)for(this.inlineStack=[],n=0,u=i.length;n<u;n++)t=i[n],t instanceof r?this.compileStack.push(t):this.pushStack(t)},isInline:function(){return this.inlineStack.length},popStack:function(n){var i=this.isInline(),t=(i?this.inlineStack:this.compileStack).pop();if(!n&&t instanceof r)return t.value;if(!i){if(!this.stackSlot)throw new o("Invalid stack pop");this.stackSlot--}return t},topStack:function(n){var i=this.isInline()?this.inlineStack:this.compileStack,t=i[i.length-1];return!n&&t instanceof r?t.value:t},quotedString:function(n){return'"'+n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(n,t,i){var r=[],u=this.setupParams(n,r,i),f=this.nameLookup("helpers",t,"helper");return{params:r,paramsInit:u,name:f,callParams:["depth0"].concat(r).join(", "),helperMissingParams:i&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupOptions:function(n,t){var i=[],e=[],o=[],s,r,u,f;for(i.push("hash:"+this.popStack()),this.options.stringParams&&(i.push("hashTypes:"+this.popStack()),i.push("hashContexts:"+this.popStack())),r=this.popStack(),u=this.popStack(),(u||r)&&(u||(this.context.aliases.self="this",u="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),i.push("inverse:"+r),i.push("fn:"+u)),f=0;f<n;f++)s=this.popStack(),t.push(s),this.options.stringParams&&(o.push(this.popStack()),e.push(this.popStack()));return this.options.stringParams&&(i.push("contexts:["+e.join(",")+"]"),i.push("types:["+o.join(",")+"]")),this.options.data&&i.push("data:data"),i},setupParams:function(n,t,i){var r="{"+this.setupOptions(n,t).join(",")+"}";return i?(this.useRegister("options"),t.push("options"),"options="+r):(t.push(r),"")}},f="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=i.RESERVED_WORDS={},u=0,h=f.length;u<h;u++)s[f[u]]=!0;return i.isValidJavaScriptVariableName=function(n){return!i.RESERVED_WORDS[n]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(n)?!0:!1},i}(i,n);return function(n,t,i,r,u){"use strict";var f=n,o=t,s=i.parser,h=i.parse,c=r.Compiler,l=r.compile,a=r.precompile,v=u,y=f.create,e=function(){var n=y();return n.compile=function(t,i){return l(t,i,n)},n.precompile=function(t,i){return a(t,i,n)},n.AST=o,n.Compiler=c,n.JavaScriptCompiler=v,n.Parser=s,n.parse=h,n};return f=e(),f.create=e,f}(e,u,s,h,c)}();Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var t=Date,n=t.prototype,i=t.CultureInfo,r=function(n,t){return t||(t=2),("000"+n).slice(t*-1)},f,u,e;n.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this};n.setTimeToNow=function(){var n=new Date;return this.setHours(n.getHours()),this.setMinutes(n.getMinutes()),this.setSeconds(n.getSeconds()),this.setMilliseconds(n.getMilliseconds()),this};t.today=function(){return(new Date).clearTime()};t.compare=function(n,t){if(isNaN(n)||isNaN(t))throw new Error(n+" - "+t);else{if(n instanceof Date&&t instanceof Date)return n<t?-1:n>t?1:0;throw new TypeError(n+" - "+t);}};t.equals=function(n,t){return n.compareTo(t)===0};t.getDayNumberFromName=function(n){for(var u=i.dayNames,f=i.abbreviatedDayNames,e=i.shortestDayNames,r=n.toLowerCase(),t=0;t<u.length;t++)if(u[t].toLowerCase()==r||f[t].toLowerCase()==r||e[t].toLowerCase()==r)return t;return-1};t.getMonthNumberFromName=function(n){for(var r=i.monthNames,f=i.abbreviatedMonthNames,u=n.toLowerCase(),t=0;t<r.length;t++)if(r[t].toLowerCase()==u||f[t].toLowerCase()==u)return t;return-1};t.isLeapYear=function(n){return n%4==0&&n%100!=0||n%400==0};t.getDaysInMonth=function(n,i){return[31,t.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][i]};t.getTimezoneAbbreviation=function(n){for(var r=i.timezones,t=0;t<r.length;t++)if(r[t].offset===n)return r[t].name;return null};t.getTimezoneOffset=function(n){for(var r=i.timezones,t=0;t<r.length;t++)if(r[t].name===n.toUpperCase())return r[t].offset;return null};n.clone=function(){return new Date(this.getTime())};n.compareTo=function(n){return Date.compare(this,n)};n.equals=function(n){return Date.equals(this,n||new Date)};n.between=function(n,t){return this.getTime()>=n.getTime()&&this.getTime()<=t.getTime()};n.isAfter=function(n){return this.compareTo(n||new Date)===1};n.isBefore=function(n){return this.compareTo(n||new Date)===-1};n.isToday=function(){return this.isSameDay(new Date)};n.isSameDay=function(n){return this.clone().clearTime().equals(n.clone().clearTime())};n.addMilliseconds=function(n){return this.setMilliseconds(this.getMilliseconds()+n),this};n.addSeconds=function(n){return this.addMilliseconds(n*1e3)};n.addMinutes=function(n){return this.addMilliseconds(n*6e4)};n.addHours=function(n){return this.addMilliseconds(n*36e5)};n.addDays=function(n){return this.setDate(this.getDate()+n),this};n.addWeeks=function(n){return this.addDays(n*7)};n.addMonths=function(n){var i=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+n),this.setDate(Math.min(i,t.getDaysInMonth(this.getFullYear(),this.getMonth()))),this};n.addYears=function(n){return this.addMonths(n*12)};n.add=function(n){if(typeof n=="number")return this._orient=n,this;var t=n;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};n.getWeek=function(){var n,i,r,l,h,o,c,s,t,a;return f=f?f:this.getFullYear(),u=u?u:this.getMonth()+1,e=e?e:this.getDate(),u<=2?(n=f-1,i=(n/4|0)-(n/100|0)+(n/400|0),r=((n-1)/4|0)-((n-1)/100|0)+((n-1)/400|0),t=i-r,h=0,o=e-1+31*(u-1)):(n=f,i=(n/4|0)-(n/100|0)+(n/400|0),r=((n-1)/4|0)-((n-1)/100|0)+((n-1)/400|0),t=i-r,h=t+1,o=e+(153*(u-3)+2)/5+58+t),c=(n+i)%7,l=(o+c-h)%7,s=o+3-l|0,a=s<0?53-((c-t)/5|0):s>364+t?1:(s/7|0)+1,f=u=e=null,a};n.getISOWeek=function(){return f=this.getUTCFullYear(),u=this.getUTCMonth()+1,e=this.getUTCDate(),r(this.getWeek())};n.setWeek=function(n){return this.moveToDayOfWeek(1).addWeeks(n-this.getWeek())};t._validate=function(n,t,i,r){if(typeof n=="undefined")return!1;if(typeof n!="number")throw new TypeError(n+" is not a Number.");else if(n<t||n>i)throw new RangeError(n+" is not a valid value for "+r+".");return!0};t.validateMillisecond=function(n){return t._validate(n,0,999,"millisecond")};t.validateSecond=function(n){return t._validate(n,0,59,"second")};t.validateMinute=function(n){return t._validate(n,0,59,"minute")};t.validateHour=function(n){return t._validate(n,0,23,"hour")};t.validateDay=function(n,i,r){return t._validate(n,1,t.getDaysInMonth(i,r),"day")};t.validateMonth=function(n){return t._validate(n,0,11,"month")};t.validateYear=function(n){return t._validate(n,0,9999,"year")};n.set=function(n){return t.validateMillisecond(n.millisecond)&&this.addMilliseconds(n.millisecond-this.getMilliseconds()),t.validateSecond(n.second)&&this.addSeconds(n.second-this.getSeconds()),t.validateMinute(n.minute)&&this.addMinutes(n.minute-this.getMinutes()),t.validateHour(n.hour)&&this.addHours(n.hour-this.getHours()),t.validateMonth(n.month)&&this.addMonths(n.month-this.getMonth()),t.validateYear(n.year)&&this.addYears(n.year-this.getFullYear()),t.validateDay(n.day,this.getFullYear(),this.getMonth())&&this.addDays(n.day-this.getDate()),n.timezone&&this.setTimezone(n.timezone),n.timezoneOffset&&this.setTimezoneOffset(n.timezoneOffset),n.week&&t._validate(n.week,0,53,"week")&&this.setWeek(n.week),this};n.moveToFirstDayOfMonth=function(){return this.set({day:1})};n.moveToLastDayOfMonth=function(){return this.set({day:t.getDaysInMonth(this.getFullYear(),this.getMonth())})};n.moveToNthOccurrence=function(n,t){var i=0;if(t>0)i=t-1;else if(t===-1)return this.moveToLastDayOfMonth(),this.getDay()!==n&&this.moveToDayOfWeek(n,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(n,1).addWeeks(i)};n.moveToDayOfWeek=function(n,t){var i=(n-this.getDay()+7*(t||1))%7;return this.addDays(i===0?i+=7*(t||1):i)};n.moveToMonth=function(n,t){var i=(n-this.getMonth()+12*(t||1))%12;return this.addMonths(i===0?i+=12*(t||1):i)};n.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1};n.getTimezone=function(){return t.getTimezoneAbbreviation(this.getUTCOffset())};n.setTimezoneOffset=function(n){var t=this.getTimezoneOffset(),i=Number(n)*-6/10;return this.addMinutes(i-t)};n.setTimezone=function(n){return this.setTimezoneOffset(t.getTimezoneOffset(n))};n.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};n.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()};n.getUTCOffset=function(){var t=this.getTimezoneOffset()*-10/6,n;return t<0?(n=(t-1e4).toString(),n.charAt(0)+n.substr(2)):(n=(t+1e4).toString(),"+"+n.substr(1))};n.getElapsed=function(n){return(n||new Date)-this};n.toISOString||(n.toISOString=function(){function n(n){return n<10?"0"+n:n}return'"'+this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+'Z"'});n._toString=n.toString;n.toString=function(n){var t=this,u,f;if(n&&n.length==1){u=i.formatPatterns;t.t=t.toString;switch(n){case"d":return t.t(u.shortDate);case"D":return t.t(u.longDate);case"F":return t.t(u.fullDateTime);case"m":return t.t(u.monthDay);case"r":return t.t(u.rfc1123);case"s":return t.t(u.sortableDateTime);case"t":return t.t(u.shortTime);case"T":return t.t(u.longTime);case"u":return t.t(u.universalSortableDateTime);case"y":return t.t(u.yearMonth)}}return f=function(n){switch(n*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},n?n.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(n){if(n.charAt(0)==="\\")return n.replace("\\","");t.h=t.getHours;switch(n){case"hh":return r(t.h()<13?t.h()===0?12:t.h():t.h()-12);case"h":return t.h()<13?t.h()===0?12:t.h():t.h()-12;case"HH":return r(t.h());case"H":return t.h();case"mm":return r(t.getMinutes());case"m":return t.getMinutes();case"ss":return r(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return r(t.getFullYear(),4);case"yy":return r(t.getFullYear());case"dddd":return i.dayNames[t.getDay()];case"ddd":return i.abbreviatedDayNames[t.getDay()];case"dd":return r(t.getDate());case"d":return t.getDate();case"MMMM":return i.monthNames[t.getMonth()];case"MMM":return i.abbreviatedMonthNames[t.getMonth()];case"MM":return r(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return t.h()<12?i.amDesignator.substring(0,1):i.pmDesignator.substring(0,1);case"tt":return t.h()<12?i.amDesignator:i.pmDesignator;case"S":return f(t.getDate());default:return n}}):this._toString()}}(),function(){var t=Date,n=t.prototype,d=t.CultureInfo,u=Number.prototype,y,p,i,w,b,r,l,k,c,a,h;n._orient=1;n._nth=null;n._is=!1;n._same=!1;n._isSecond=!1;u._dateElement="day";n.next=function(){return this._orient=1,this};t.next=function(){return t.today().next()};n.last=n.prev=n.previous=function(){return this._orient=-1,this};t.last=t.prev=t.previous=function(){return t.today().last()};n.is=function(){return this._is=!0,this};n.same=function(){return this._same=!0,this._isSecond=!1,this};n.today=function(){return this.same().day()};n.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1};n.at=function(n){return typeof n=="string"?t.parse(this.toString("d")+" "+n):this.set(n)};u.fromNow=u.after=function(n){var t={};return t[this._dateElement]=this,(n?n.clone():new Date).add(t)};u.ago=u.before=function(n){var t={};return t[this._dateElement]=this*-1,(n?n.clone():new Date).add(t)};var f="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),e="january february march april may june july august september october november december".split(/\s/),o="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),g="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),v="final first second third fourth fifth".split(/\s/),s;for(n.toObject=function(){for(var t={},n=0;n<o.length;n++)t[o[n].toLowerCase()]=this["get"+g[n]]();return t},t.fromObject=function(n){return n.week=null,Date.today().set(n)},y=function(n){return function(){var r,i;if(this._is)return this._is=!1,this.getDay()==n;if(this._nth!==null){if(this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1,r=this._nth,this._nth=null,i=this.clone().moveToLastDayOfMonth(),this.moveToNthOccurrence(n,r),this>i)throw new RangeError(t.getDayName(n)+" does not occur "+r+" times in the month of "+t.getMonthName(i.getMonth())+" "+i.getFullYear()+".");return this}return this.moveToDayOfWeek(n,this._orient)}},p=function(n){return function(){var i=t.today(),r=n-i.getDay();return n===0&&d.firstDayOfWeek===1&&i.getDay()!==0&&(r=r+7),i.addDays(r)}},i=0;i<f.length;i++)t[f[i].toUpperCase()]=t[f[i].toUpperCase().substring(0,3)]=i,t[f[i]]=t[f[i].substring(0,3)]=p(i),n[f[i]]=n[f[i].substring(0,3)]=y(i);for(w=function(n){return function(){return this._is?(this._is=!1,this.getMonth()===n):this.moveToMonth(n,this._orient)}},b=function(n){return function(){return t.today().set({month:n,day:1})}},r=0;r<e.length;r++)t[e[r].toUpperCase()]=t[e[r].toUpperCase().substring(0,3)]=r,t[e[r]]=t[e[r].substring(0,3)]=b(r),n[e[r]]=n[e[r].substring(0,3)]=w(r);for(l=function(n){return function(){var i;if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var r=this.toObject(),u=(arguments[0]||new Date).toObject(),t="",f=n.toLowerCase();for(i=o.length-1;i>-1;i--){if(t=o[i].toLowerCase(),r[t]!=u[t])return!1;if(f==t)break}return!0}return n.substring(n.length-1)!="s"&&(n+="s"),this["add"+n](this._orient)}},k=function(n){return function(){return this._dateElement=n,this}},c=0;c<o.length;c++)s=o[c].toLowerCase(),n[s]=n[s+"s"]=l(o[c]),u[s]=u[s+"s"]=k(s);for(n._ss=l("Second"),a=function(n){return function(t){return this._same?this._ss(arguments[0]):t||t===0?this.moveToNthOccurrence(t,n):(this._nth=n,n===2&&(t===undefined||t===null))?(this._isSecond=!0,this.addSeconds(this._orient)):this}},h=0;h<v.length;h++)n[v[h]]=h===0?a(-1):a(h)}(),function(){var i,o,f,u;Date.Parsing={Exception:function(n){this.message="Parse error at '"+n.substring(0,10)+" ...'"}};var t=Date.Parsing,n=t.Operators={rtoken:function(n){return function(i){var r=i.match(n);if(r)return[r[0],i.substring(r[0].length)];throw new t.Exception(i);}},token:function(){return function(t){return n.rtoken(new RegExp("^s*"+t+"s*"))(t)}},stoken:function(t){return n.rtoken(new RegExp("^"+t))},until:function(n){return function(t){for(var r=[],i=null;t.length;){try{i=n.call(this,t)}catch(u){r.push(i[0]);t=i[1];continue}break}return[r,t]}},many:function(n){return function(t){for(var i=[],r=null;t.length;){try{r=n.call(this,t)}catch(u){return[i,t]}i.push(r[0]);t=r[1]}return[i,t]}},optional:function(n){return function(t){var i=null;try{i=n.call(this,t)}catch(r){return[null,t]}return[i[0],i[1]]}},not:function(n){return function(i){try{n.call(this,i)}catch(r){return[null,i]}throw new t.Exception(i);}},ignore:function(n){return n?function(t){var i=null;return i=n.call(this,t),[null,i[1]]}:null},product:function(){for(var i=arguments[0],u=Array.prototype.slice.call(arguments,1),r=[],t=0;t<i.length;t++)r.push(n.each(i[t],u));return r},cache:function(n){var r={},i=null;return function(u){try{i=r[u]=r[u]||n.call(this,u)}catch(f){i=r[u]=f}if(i instanceof t.Exception)throw i;else return i}},any:function(){var n=arguments;return function(i){for(var r=null,u=0;u<n.length;u++)if(n[u]!=null){try{r=n[u].call(this,i)}catch(f){r=null}if(r)return r}throw new t.Exception(i);}},each:function(){var n=arguments;return function(i){for(var f=[],u=null,r=0;r<n.length;r++)if(n[r]!=null){try{u=n[r].call(this,i)}catch(e){throw new t.Exception(i);}f.push(u[0]);i=u[1]}return[f,i]}},all:function(){var t=arguments,n=n;return n.each(n.optional(t))},sequence:function(i,r,u){return(r=r||n.rtoken(/^\s*/),u=u||null,i.length==1)?i[0]:function(n){for(var f=null,e=null,s=[],o=0;o<i.length;o++){try{f=i[o].call(this,n)}catch(h){break}s.push(f[0]);try{e=r.call(this,f[1])}catch(c){e=null;break}n=e[1]}if(!f)throw new t.Exception(n);if(e)throw new t.Exception(e[1]);if(u)try{f=u.call(this,f[1])}catch(l){throw new t.Exception(f[1]);}return[s,f?f[1]:n]}},between:function(t,i,u){u=u||t;var f=n.each(n.ignore(t),i,n.ignore(u));return function(n){var t=f.call(this,n);return[[t[0][0],r[0][2]],t[1]]}},list:function(t,i,r){return i=i||n.rtoken(/^\s*/),r=r||null,t instanceof Array?n.each(n.product(t.slice(0,-1),n.ignore(i)),t.slice(-1),n.ignore(r)):n.each(n.many(n.each(t,n.ignore(i))),px,n.ignore(r))},set:function(i,r,u){return r=r||n.rtoken(/^\s*/),u=u||null,function(f){for(var y,a,s=null,l=null,h=null,c=null,e=[[],f],o=!1,v=0;v<i.length;v++){h=null;l=null;s=null;o=i.length==1;try{s=i[v].call(this,f)}catch(p){continue}if(c=[[s[0]],s[1]],s[1].length>0&&!o)try{h=r.call(this,s[1])}catch(w){o=!0}else o=!0;if(o||h[1].length!==0||(o=!0),!o){for(y=[],a=0;a<i.length;a++)v!=a&&y.push(i[a]);l=n.set(y,r).call(this,h[1]);l[0].length>0&&(c[0]=c[0].concat(l[0]),c[1]=l[1])}if(c[1].length<e[1].length&&(e=c),e[1].length===0)break}if(e[0].length===0)return e;if(u){try{h=u.call(this,e[1])}catch(b){throw new t.Exception(e[1]);}e[1]=h[1]}return e}},forward:function(n,t){return function(i){return n[t].call(this,i)}},replace:function(n,t){return function(i){var r=n.call(this,i);return[t,r[1]]}},process:function(n,t){return function(i){var r=n.call(this,i);return[t.call(this,r[0]),r[1]]}},min:function(n,i){return function(r){var u=i.call(this,r);if(u[0].length<n)throw new t.Exception(r);return u}}},s=function(n){return function(){var t=null,u=[],i,r;if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),t)for(i=0,r=t.shift();i<r.length;i++)return t.unshift(r[i]),u.push(n.apply(null,t)),t.shift(),u;else return n.apply(null,arguments)}},e="optional not ignore cache".split(/\s/);for(i=0;i<e.length;i++)n[e[i]]=s(n[e[i]]);for(o=function(n){return function(){return arguments[0]instanceof Array?n.apply(null,arguments[0]):n.apply(null,arguments)}},f="each any all".split(/\s/),u=0;u<f.length;u++)n[f[u]]=o(n[f[u]])}(),function(){var r=Date,c=r.prototype,f=r.CultureInfo,h=function(n){for(var i=[],t=0;t<n.length;t++)n[t]instanceof Array?i=i.concat(h(n[t])):n[t]&&i.push(n[t]);return i},e,o,s;r.Grammar={};r.Translator={hour:function(n){return function(){this.hour=Number(n)}},minute:function(n){return function(){this.minute=Number(n)}},second:function(n){return function(){this.second=Number(n)}},meridian:function(n){return function(){this.meridian=n.slice(0,1).toLowerCase()}},timezone:function(n){return function(){var t=n.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=n.toLowerCase()}},day:function(n){var t=n[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(n){return function(){this.month=n.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(n)/4:Number(n)-1}},year:function(n){return function(){var t=Number(n);this.year=n.length>2?t:t+(t+2e3<f.twoDigitYearMax?2e3:1900)}},rday:function(n){return function(){switch(n){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=!0}}},finishExact:function(n){var t,i,u;for(n=n instanceof Array?n:[n],t=0;t<n.length;t++)n[t]&&n[t].call(this);if(i=new Date,!(this.hour||this.minute)||this.month||this.year||this.day||(this.day=i.getDate()),this.year||(this.year=i.getFullYear()),this.month||this.month===0||(this.month=i.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0)),this.day>r.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");return u=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second),this.timezone?u.set({timezone:this.timezone}):this.timezoneOffset&&u.set({timezoneOffset:this.timezoneOffset}),u},finish:function(n){var s,t,i,o,u,e,f;if(n=n instanceof Array?h(n):[n],n.length===0)return null;for(s=0;s<n.length;s++)typeof n[s]=="function"&&n[s].call(this);if(t=r.today(),!this.now||this.unit||this.operator)this.now&&(t=new Date);else return new Date;return(i=!!(this.days&&this.days!==null||this.orient||this.operator),e=this.orient=="past"||this.operator=="subtract"?-1:1,this.now||"hour minute second".indexOf(this.unit)==-1||t.setTimeToNow(),(this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,i=!0),i||!this.weekday||this.day||this.days||(f=Date[this.weekday](),this.day=f.getDate(),this.month||(this.month=f.getMonth()),this.year=f.getFullYear()),i&&this.weekday&&this.unit!="month"&&(this.unit="day",o=r.getDayNumberFromName(this.weekday)-t.getDay(),u=7,this.days=o?(o+e*u)%u:e*u),this.month&&this.unit=="day"&&this.operator&&(this.value=this.month+1,this.month=null),this.value!=null&&this.month!=null&&this.year!=null&&(this.day=this.value*1),this.month&&!this.day&&this.value&&(t.set({day:this.value*1}),i||(this.day=this.value*1)),this.month||!this.value||this.unit!="month"||this.now||(this.month=this.value,i=!0),i&&(this.month||this.month===0)&&this.unit!="year"&&(this.unit="month",o=this.month-t.getMonth(),u=12,this.months=o?(o+e*u)%u:e*u,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null?this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*e:(this[this.unit+"s"]==null||this.operator!=null)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*e),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0)),!this.weekday||this.day||this.days||(f=Date[this.weekday](),this.day=f.getDate(),f.getMonth()!==t.getMonth()&&(this.month=f.getMonth())),(this.month||this.month===0)&&!this.day&&(this.day=1),!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month)?Date.today().setWeek(this.value):(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?t.add(this):t.set(this))}};var t=r.Parsing.Operators,n=r.Grammar,i=r.Translator,u;n.datePartDelimiter=t.rtoken(/^([\s\-\.\,\/\x27]+)/);n.timePartDelimiter=t.stoken(":");n.whiteSpace=t.rtoken(/^\s*/);n.generalDelimiter=t.rtoken(/^(([\s\,]|at|@|on)+)/);e={};n.ctoken=function(n){var r=e[n],i;if(!r){var s=f.regexPatterns,u=n.split(/\s+/),o=[];for(i=0;i<u.length;i++)o.push(t.replace(t.rtoken(s[u[i]]),u[i]));r=e[n]=t.any.apply(null,o)}return r};n.ctoken2=function(n){return t.rtoken(f.regexPatterns[n])};n.h=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),i.hour));n.hh=t.cache(t.process(t.rtoken(/^(0[0-9]|1[0-2])/),i.hour));n.H=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),i.hour));n.HH=t.cache(t.process(t.rtoken(/^([0-1][0-9]|2[0-3])/),i.hour));n.m=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.minute));n.mm=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.minute));n.s=t.cache(t.process(t.rtoken(/^([0-5][0-9]|[0-9])/),i.second));n.ss=t.cache(t.process(t.rtoken(/^[0-5][0-9]/),i.second));n.hms=t.cache(t.sequence([n.H,n.m,n.s],n.timePartDelimiter));n.t=t.cache(t.process(n.ctoken2("shortMeridian"),i.meridian));n.tt=t.cache(t.process(n.ctoken2("longMeridian"),i.meridian));n.z=t.cache(t.process(t.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),i.timezone));n.zz=t.cache(t.process(t.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),i.timezone));n.zzz=t.cache(t.process(n.ctoken2("timezone"),i.timezone));n.timeSuffix=t.each(t.ignore(n.whiteSpace),t.set([n.tt,n.zzz]));n.time=t.each(t.optional(t.ignore(t.stoken("T"))),n.hms,n.timeSuffix);n.d=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1]|\d)/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.dd=t.cache(t.process(t.each(t.rtoken(/^([0-2]\d|3[0-1])/),t.optional(n.ctoken2("ordinalSuffix"))),i.day));n.ddd=n.dddd=t.cache(t.process(n.ctoken("sun mon tue wed thu fri sat"),function(n){return function(){this.weekday=n}}));n.M=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d|\d)/),i.month));n.MM=t.cache(t.process(t.rtoken(/^(1[0-2]|0\d)/),i.month));n.MMM=n.MMMM=t.cache(t.process(n.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),i.month));n.y=t.cache(t.process(t.rtoken(/^(\d\d?)/),i.year));n.yy=t.cache(t.process(t.rtoken(/^(\d\d)/),i.year));n.yyy=t.cache(t.process(t.rtoken(/^(\d\d?\d?\d?)/),i.year));n.yyyy=t.cache(t.process(t.rtoken(/^(\d\d\d\d)/),i.year));u=function(){return t.each(t.any.apply(null,arguments),t.not(n.ctoken2("timeContext")))};n.day=u(n.d,n.dd);n.month=u(n.M,n.MMM);n.year=u(n.yyyy,n.yy);n.orientation=t.process(n.ctoken("past future"),function(n){return function(){this.orient=n}});n.operator=t.process(n.ctoken("add subtract"),function(n){return function(){this.operator=n}});n.rday=t.process(n.ctoken("yesterday tomorrow today now"),i.rday);n.unit=t.process(n.ctoken("second minute hour day week month year"),function(n){return function(){this.unit=n}});n.value=t.process(t.rtoken(/^\d\d?(st|nd|rd|th)?/),function(n){return function(){this.value=n.replace(/\D/g,"")}});n.expression=t.set([n.rday,n.operator,n.value,n.unit,n.orientation,n.ddd,n.MMM]);u=function(){return t.set(arguments,n.datePartDelimiter)};n.mdy=u(n.ddd,n.month,n.day,n.year);n.ymd=u(n.ddd,n.year,n.month,n.day);n.dmy=u(n.ddd,n.day,n.month,n.year);n.date=function(t){return(n[f.dateElementOrder]||n.mdy).call(this,t)};n.format=t.process(t.many(t.any(t.process(t.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(n[t])return n[t];throw r.Parsing.Exception(t);}),t.process(t.rtoken(/^[^dMyhHmstz]+/),function(n){return t.ignore(t.stoken(n))}))),function(n){return t.process(t.each.apply(null,n),i.finishExact)});o={};s=function(t){return o[t]=o[t]||n.format(t)[0]};n.formats=function(n){var r,i;if(n instanceof Array){for(r=[],i=0;i<n.length;i++)r.push(s(n[i]));return t.any.apply(null,r)}return s(n)};n._formats=n.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);n._start=t.process(t.set([n.date,n.time,n.expression],n.generalDelimiter,n.whiteSpace),i.finish);n.start=function(t){try{var i=n._formats.call({},t);if(i[1].length===0)return i}catch(r){}return n._start.call({},t)};r._parse=r.parse;r.parse=function(n){var t=null;if(!n)return null;if(n instanceof Date)return n;try{t=r.Grammar.start.call({},n.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(i){return null}return t[1].length===0?t[0]:null};r.getParseFunction=function(n){var t=r.Grammar.formats(n);return function(n){var i=null;try{i=t.call({},n)}catch(r){return null}return i[1].length===0?i[0]:null}};r.parseExact=function(n,t){return r.getParseFunction(t)(n)}}(),function(n){function r(){var t=u(this);return isNaN(t.datetime)||n(this).text(i(t.datetime)),this}function u(i){if(i=n(i),!i.data("timeago")){i.data("timeago",{datetime:t.datetime(i)});var r=n.trim(i.text());r.length>0&&!(t.isTime(i)&&i.attr("title"))&&i.attr("title",r)}return i.data("timeago")}function i(n){return t.inWords(f(n))}function f(n){return(new Date).getTime()-n.getTime()}n.timeago=function(t){return t instanceof Date?i(t):typeof t=="string"?i(n.timeago.parse(t)):typeof t=="number"?i(new Date(t)):i(n.timeago.datetime(t))};var t=n.timeago;n.extend(n.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(t){function r(r,u){var f=n.isFunction(r)?r(u,t):r,e=i.numbers&&i.numbers[u]||u;return f.replace(/%d/i,e)}var i=this.settings.strings,s=i.prefixAgo,h=i.suffixAgo,l,a;this.settings.allowFuture&&t<0&&(s=i.prefixFromNow,h=i.suffixFromNow);var f=Math.abs(t)/1e3,e=f/60,o=e/60,u=o/24,c=u/365;return l=f<45&&r(i.seconds,Math.round(f))||f<90&&r(i.minute,1)||e<45&&r(i.minutes,Math.round(e))||e<90&&r(i.hour,1)||o<24&&r(i.hours,Math.round(o))||o<42&&r(i.day,1)||u<30&&r(i.days,Math.round(u))||u<45&&r(i.month,1)||u<365&&r(i.months,Math.round(u/30))||c<1.5&&r(i.year,1)||r(i.years,Math.round(c)),a=i.wordSeparator===undefined?" ":i.wordSeparator,n.trim([s,l,h].join(a))},parse:function(t){var i=n.trim(t);return i=i.replace(/\.\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)},datetime:function(i){var r=t.isTime(i)?n(i).attr("datetime"):n(i).attr("title");return t.parse(r)},isTime:function(t){return n(t).get(0).tagName.toLowerCase()==="time"}});n.fn.timeago=function(){var n=this,i;return n.each(r),i=t.settings,i.refreshMillis>0&&setInterval(function(){n.each(r)},i.refreshMillis),n};document.createElement("abbr");document.createElement("time")}(jQuery);q=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function w(n){function u(n){var i=n.charCodeAt(0),t;return i!==92?i:(t=n.charAt(1),(i=a[t])?i:"0"<=t&&t<="7"?parseInt(n.substring(1),8):t==="u"||t==="x"?parseInt(n.substring(2),16):n.charCodeAt(1))}function f(n){return n<32?(n<16?"\\x0":"\\x")+n.toString(16):(n=String.fromCharCode(n),(n==="\\"||n==="-"||n==="["||n==="]")&&(n="\\"+n),n)}function h(n){for(var t,s,o=n.substring(1,n.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),n=[],i=[],h=o[0]==="^",r=h?1:0,e=o.length;r<e;++r)t=o[r],/\\[bdsw]/i.test(t)?n.push(t):(t=u(t),r+2<e&&"-"===o[r+1]?(s=u(o[r+2]),r+=2):s=t,i.push([t,s]),s<65||t>122||(s<65||t>90||i.push([Math.max(65,t)|32,Math.min(s,90)|32]),s<97||t>122||i.push([Math.max(97,t)&-33,Math.min(s,122)&-33])));for(i.sort(function(n,t){return n[0]-t[0]||t[1]-n[1]}),o=[],t=[NaN,NaN],r=0;r<i.length;++r)e=i[r],e[0]<=t[1]+1?t[1]=Math.max(t[1],e[1]):o.push(t=e);for(i=["["],h&&i.push("^"),i.push.apply(i,n),r=0;r<o.length;++r)e=o[r],i.push(f(e[0])),e[1]>e[0]&&(e[1]+1>e[0]&&i.push("-"),i.push(f(e[1])));return i.push("]"),i.join("")}function c(n){for(var i,r=n.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),o=r.length,f=[],t=0,u=0;t<o;++t)i=r[t],i==="("?++u:"\\"===i.charAt(0)&&(i=+i.substring(1))&&i<=u&&(f[i]=-1);for(t=1;t<f.length;++t)-1===f[t]&&(f[t]=++l);for(u=t=0;t<o;++t)i=r[t],i==="("?(++u,f[u]===void 0&&(r[t]="(?:")):"\\"===i.charAt(0)&&(i=+i.substring(1))&&i<=u&&(r[t]="\\"+f[u]);for(u=t=0;t<o;++t)"^"===r[t]&&"^"!==r[t+1]&&(r[t]="");if(n.ignoreCase&&e)for(t=0;t<o;++t)i=r[t],n=i.charAt(0),i.length>=2&&n==="["?r[t]=h(i):n!=="\\"&&(r[t]=i.replace(/[A-Za-z]/g,function(n){return n=n.charCodeAt(0),"["+String.fromCharCode(n&-33,n|32)+"]"}));return r.join("")}for(var t,l=0,e=!1,r=!1,i=0,o=n.length;i<o;++i)if(t=n[i],t.ignoreCase)r=!0;else if(/[a-z]/i.test(t.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){e=!0;r=!1;break}for(var a={b:8,t:9,n:10,v:11,f:12,r:13},s=[],i=0,o=n.length;i<o;++i){if(t=n[i],t.global||t.multiline)throw Error(""+t);s.push("(?:"+c(t)+")")}return RegExp(s.join("|"),r?"gi":"g")}function b(n){function e(n){switch(n.nodeType){case 1:if(s.test(n.className))break;for(var r=n.firstChild;r;r=r.nextSibling)e(r);r=n.nodeName;("BR"===r||"LI"===r)&&(u[t]="\n",i[t<<1]=f++,i[t++<<1|1]=n);break;case 3:case 4:r=n.nodeValue;r.length&&(r=o?r.replace(/\r\n?/g,"\n"):r.replace(/[\t\n\r ]+/g," "),u[t]=r,i[t<<1]=f,f+=r.length,i[t++<<1|1]=n)}}var s=/(?:^|\s)nocode(?:\s|$)/,u=[],f=0,i=[],t=0,r,o;return n.currentStyle?r=n.currentStyle.whiteSpace:window.getComputedStyle&&(r=document.defaultView.getComputedStyle(n,q).getPropertyValue("white-space")),o=r&&"pre"===r.substring(0,3),e(n),{a:u.join("").replace(/\n$/,""),c:i}}function e(n,t,i,r){t&&(n={a:t,d:n},i(n),r.push.apply(r,n.e))}function i(n,t){function i(n){for(var c,p,w,v=n.d,y=[v,"pln"],k=0,d=n.a.match(u)||[],g={},b=0,nt=d.length;b<nt;++b){var l=d[b],h=g[l],a=void 0,o;if(typeof h=="string")o=!1;else{if(c=r[l.charAt(0)],c)a=l.match(c[1]),h=c[0];else{for(o=0;o<f;++o)if(c=t[o],a=l.match(c[1])){h=c[0];break}a||(h="pln")}!(o=h.length>=5&&"lang-"===h.substring(0,5))||a&&typeof a[1]=="string"||(o=!1,h="src");o||(g[l]=h)}c=k;k+=l.length;o?(o=a[1],p=l.indexOf(o),w=p+o.length,a[2]&&(w=l.length-a[2].length,p=w-o.length),h=h.substring(5),e(v+c,l.substring(0,p),i,y),e(v+c+p,o,s(h,o),y),e(v+c+w,l.substring(w),i,y)):y.push(v+c,h)}n.e=y}var r={},u,f;return function(){for(var i,f,s,h=n.concat(t),e=[],c={},o=0,l=h.length;o<l;++o){if(i=h[o],f=i[3],f)for(s=f.length;--s>=0;)r[f.charAt(s)]=i;i=i[1];f=""+i;c.hasOwnProperty(f)||(e.push(i),c[f]=q)}e.push(/[\S\s]/);u=w(e)}(),f=t.length,i}function t(n){var r=[],t=[],u;return n.tripleQuotedStrings?r.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):n.multiLineStrings?r.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):r.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]),n.verbatimStrings&&t.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]),u=n.hashComments,u&&(n.cStyleComments?(u>1?r.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):r.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),t.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):r.push(["com",/^#[^\n\r]*/,q,"#"])),n.cStyleComments&&(t.push(["com",/^\/\/[^\n\r]*/,q]),t.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q])),n.regexLiterals&&t.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(u=n.types)&&t.push(["typ",u]),n=(""+n.keywords).replace(/^ | $/g,""),n.length&&t.push(["kwd",RegExp("^(?:"+n.replace(/[\s,]+/g,"|")+")\\b"),q]),r.push(["pln",/^\s+/,q," \r\n\t"]),t.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]),i(r,t)}function o(n,t){function o(n){var t,i,r;switch(n.nodeType){case 1:if(c.test(n.className))break;if("BR"===n.nodeName)s(n),n.parentNode&&n.parentNode.removeChild(n);else for(n=n.firstChild;n;n=n.nextSibling)o(n);break;case 3:case 4:h&&(t=n.nodeValue,i=t.match(l),i&&(r=t.substring(0,i.index),n.nodeValue=r,(t=t.substring(i.index+i[0].length))&&n.parentNode.insertBefore(f.createTextNode(t),n.nextSibling),s(n),r||n.parentNode.removeChild(n)))}}function s(n){function i(n,t){var e=t?n.cloneNode(!1):n,r=n.parentNode,f,u;if(r)for(r=i(r,1),f=n.nextSibling,r.appendChild(e),u=f;u;u=f)f=u.nextSibling,r.appendChild(u);return e}for(;!n.nextSibling;)if(n=n.parentNode,!n)return;for(var n=i(n.nextSibling,0),t;(t=n.parentNode)&&t.nodeType===1;)n=t;u.push(n)}var c=/(?:^|\s)nocode(?:\s|$)/,l=/\r\n?|\n/,f=n.ownerDocument,i,h,u,r,e;for(n.currentStyle?i=n.currentStyle.whiteSpace:window.getComputedStyle&&(i=f.defaultView.getComputedStyle(n,q).getPropertyValue("white-space")),h=i&&"pre"===i.substring(0,3),i=f.createElement("LI");n.firstChild;)i.appendChild(n.firstChild);for(u=[i],r=0;r<u.length;++r)o(u[r]);t===(t|0)&&u[0].setAttribute("value",t);e=f.createElement("OL");e.className="linenums";for(var a=Math.max(0,t-1|0)||0,r=0,v=u.length;r<v;++r)i=u[r],i.className="L"+(r+a)%10,i.firstChild||i.appendChild(f.createTextNode("")),e.appendChild(i);n.appendChild(e)}function n(n,t){for(var i,r=t.length;--r>=0;)i=t[r],f.hasOwnProperty(i)?window.console&&console.warn("cannot override language handler %s",i):f[i]=n}function s(n,t){return n&&f.hasOwnProperty(n)||(n=/^\s*</.test(t)?"default-markup":"default-code"),f[n]}function h(n){var g=n.g,r,u,f,i,k,c,d;try{r=b(n.h);u=r.a;n.a=u;n.c=r.c;n.d=0;s(g,u)(n);var it=/\bMSIE\b/.test(navigator.userAgent),g=/\n/g,p=n.a,w=p.length,r=0,l=n.c,rt=l.length,u=0,t=n.e,h=t.length,n=0;for(t[h]=w,i=f=0;i<h;)t[i]!==t[i+2]?(t[f++]=t[i++],t[f++]=t[i++]):i+=2;for(h=f,i=f=0;i<h;){for(var ut=t[i],nt=t[i+1],o=i+2;o+2<=h&&t[o+1]===nt;)o+=2;t[f++]=ut;t[f++]=nt;i=o}for(t.length=f;u<rt;){var a=l[u+2]||w,tt=t[n+2]||w,o=Math.min(a,tt),e=l[u+1],v;e.nodeType!==1&&(v=p.substring(r,o))&&(it&&(v=v.replace(g,"\r")),e.nodeValue=v,k=e.ownerDocument,c=k.createElement("SPAN"),c.className=t[n+1],d=e.parentNode,d.replaceChild(c,e),c.appendChild(e),r<a&&(l[u+1]=e=k.createTextNode(p.substring(o,a)),d.insertBefore(e,c.nextSibling)));r=o;r>=a&&(u+=2);r>=tt&&(n+=2)}}catch(y){"console"in window&&console.log(y&&y.stack?y.stack:y)}}var r=["break,continue,do,else,for,if,return,while"],u=[[r,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],c=[u,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],l=[u,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],a=[l,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],u=[u,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],v=[r,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],y=[r,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],r=[r,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],p=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,k=/\S/,d=t({keywords:[c,a,u,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+v,y,r],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),f={};n(d,["default-code"]);n(i([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);n(i([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);n(i([],[["atv",/^[\S\s]+/]]),["uq.val"]);n(t({keywords:c,hashComments:!0,cStyleComments:!0,types:p}),["c","cc","cpp","cxx","cyc","m"]);n(t({keywords:"null,true,false"}),["json"]);n(t({keywords:a,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:p}),["cs"]);n(t({keywords:l,cStyleComments:!0}),["java"]);n(t({keywords:r,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]);n(t({keywords:v,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]);n(t({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]);n(t({keywords:y,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]);n(t({keywords:u,cStyleComments:!0,regexLiterals:!0}),["js"]);n(t({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);n(i([],[["str",/^[\S\s]+/]]),["regex"]);window.prettyPrintOne=function(n,t,i){var r=document.createElement("PRE");return r.innerHTML=n,i&&o(r,i),h({g:t,i:i,h:r}),r.innerHTML};window.prettyPrint=function(n){function c(){for(var l,e,y,r,v,p,f,w=window.PR_SHOULD_USE_CONTINUATION?t.now()+250:Infinity;i<u.length&&t.now()<w;i++)if(l=u[i],e=l.className,e.indexOf("prettyprint")>=0){if(e=e.match(s),r=!e){for(r=l,f=void 0,v=r.firstChild;v;v=v.nextSibling)p=v.nodeType,f=p===1?f?r:v:p===3?k.test(v.nodeValue)?r:f:f;r=(y=f===r?void 0:f)&&"CODE"===y.tagName}for(r&&(e=y.className.match(s)),e&&(e=e[1]),r=!1,f=l.parentNode;f;f=f.parentNode)if((f.tagName==="pre"||f.tagName==="code"||f.tagName==="xmp")&&f.className&&f.className.indexOf("prettyprint")>=0){r=!0;break}r||((r=(r=l.className.match(/\blinenums\b(?::(\d+))?/))?r[1]&&r[1].length?+r[1]:!0:!1)&&o(l,r),a={g:e,h:l,i:r},h(a))}i<u.length?setTimeout(c,250):n&&n()}for(var e,l,t,i,a,s,r=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],u=[],f=0;f<r.length;++f)for(e=0,l=r[f].length;e<l;++e)u.push(r[f][e]);r=q;t=Date;t.now||(t={now:function(){return+new Date}});i=0;s=/\blang(?:uage)?-([\w.]+)(?!\S)/;c()};window.PR={createSimpleLexer:i,registerLangHandler:n,sourceDecorator:t,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}();jQuery.cookie=function(n,t,i){var u,r,f,e;return arguments.length>1&&(t===null||typeof t!="object")?(i=jQuery.extend({},i),t===null&&(i.expires=-1),typeof i.expires=="number"&&(u=i.expires,r=i.expires=new Date,r.setDate(r.getDate()+u)),document.cookie=[encodeURIComponent(n),"=",i.raw?String(t):encodeURIComponent(String(t)),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")):(i=t||{},e=i.raw?function(n){return n}:decodeURIComponent,(f=new RegExp("(?:^|; )"+encodeURIComponent(n)+"=([^;]*)").exec(document.cookie))?e(f[1]):null)},function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};(function(i){var r;return i.fn.pagination=function(n){return this.each(function(){return new r(i(this),n).render()})},r=function(){function r(t,r){var u;if(this.el=t,this.change=n(this.change,this),this.clicked=n(this.clicked,this),this.isValidPage=n(this.isValidPage,this),this.render=n(this.render,this),this.pages=n(this.pages,this),this.buildLink=n(this.buildLink,this),this.buildLi=n(this.buildLi,this),this.buildLinks=n(this.buildLinks,this),u={current_page:1,total_pages:1,next:"&gt;",prev:"&lt;",first:!1,last:!1,display_max:8,ignore_single_page:!0,no_turbolink:!1},this.settings=i.extend(u,r),i(document).on)i(this.el).on("click","a",this.clicked);else i("a",this.el).live("click",this.clicked);this.el.data("paginationView",this)}return r.prototype.buildLinks=function(){var i,n,r,t,f,u;for(i=this.settings.current_page,n=[],this.settings.first&&n.push(this.buildLi(1,this.settings.first)),this.settings.prev&&n.push(this.buildLi(i-1,this.settings.prev)),u=this.pages(),t=0,f=u.length;t<f;t++)r=u[t],n.push(this.buildLi(r,r));return this.settings.next&&n.push(this.buildLi(i+1,this.settings.next)),this.settings.last&&n.push(this.buildLi(this.settings.total_pages,this.settings.last)),n},r.prototype.buildLi=function(n,t){return t==null&&(t=n),"<li>"+this.buildLink(n,t)+"<\/li>"},r.prototype.buildLink=function(n,t){var i;return t==null&&(t=n),i=this.settings.no_turbolink?" data-no-turbolink='1'":"","<a href='#' data-page='"+n+"'"+i+">"+t+"<\/a>"},r.prototype.pages=function(){var v,e,f,r,u,n,o,s,h,c,l,y,p,w,a;if(n=this.settings.total_pages,e=this.settings.current_page,u=[],f=this.settings.display_max,n>10){if(u.push(1),e>f-1&&u.push(".."),e===n)for(r=o=y=n-f;y<=n?o<=n:o>=n;r=y<=n?++o:--o)u.push(r);if(n-e<f-1)for(r=s=p=n-f;p<=n?s<=n:s>=n;r=p<=n?++s:--s)u.push(r);else if(e>f-1)for(v=f/2,r=h=w=e-v,a=e+v;w<=a?h<=a:h>=a;r=w<=a?++h:--h)u.push(r);else if(e<=f-1)for(r=c=2;2<=f?c<=f:c>=f;r=2<=f?++c:--c)u.push(r);u=i.grep(u,function(n,t){return i.inArray(n,u)===t});t.call(u,n)<0&&(n-e<f-1||u.push(".."),u.push(n))}else for(r=l=1;1<=n?l<=n:l>=n;r=1<=n?++l:--l)u.push(r);return u},r.prototype.render=function(){var n,u,t,f,r;if(this.el.html(""),this.settings.total_pages!==1||!this.settings.ignore_single_page){for(n=["<div class='jquery-bootstrap-pagination'>"],n.push("<ul class='pagination'>"),r=this.buildLinks(),t=0,f=r.length;t<f;t++)u=r[t],n.push(u);return n.push("<\/ul>"),n.push("<\/div>"),this.el.html(n.join("\n")),i("[data-page="+this.settings.current_page+"]",this.el).closest("li").addClass("active"),i("[data-page='..']",this.el).closest("li").addClass("disabled"),i("[data-page='0']",this.el).closest("li").addClass("disabled"),i("[data-page='"+(this.settings.total_pages+1)+"']",this.el).closest("li").addClass("disabled"),this.settings.current_page===1&&this.settings.first&&i("li:first",this.el).removeClass("active").addClass("disabled"),this.settings.current_page===this.settings.total_pages&&this.settings.last?i("li:last",this.el).removeClass("active").addClass("disabled"):void 0}},r.prototype.isValidPage=function(n){return n>0&&n!==this.settings.current_page&&n<=this.settings.total_pages},r.prototype.clicked=function(n){n.stopPropagation();var t;if(t=parseInt(i(n.target).attr("data-page")),this.isValidPage(t))return this.settings.callback!=null&&this.settings.callback(n,t),this.change(t)},r.prototype.change=function(n){if(n=parseInt(n),this.isValidPage(n))return this.settings.current_page=n,this.render()},r}()})(jQuery)}.call(this),function(){"use strict";function n(n){function s(s,h){var rt,ut,p=s==window,l=h&&h.message!==undefined?h.message:undefined,g,k,d,tt,nt,w,b,it,ft,et,at;if(h=n.extend({},n.blockUI.defaults,h||{}),!h.ignoreIfBlocked||!n(s).data("blockUI.isBlocked")){if(h.overlayCSS=n.extend({},n.blockUI.defaults.overlayCSS,h.overlayCSS||{}),rt=n.extend({},n.blockUI.defaults.css,h.css||{}),h.onOverlayClick&&(h.overlayCSS.cursor="pointer"),ut=n.extend({},n.blockUI.defaults.themedCSS,h.themedCSS||{}),l=l===undefined?h.message:l,p&&t&&e(window,{fadeOut:0}),l&&typeof l!="string"&&(l.parentNode||l.jquery)&&(g=l.jquery?l[0]:l,k={},n(s).data("blockUI.history",k),k.el=g,k.parent=g.parentNode,k.display=g.style.display,k.position=g.style.position,k.parent&&k.parent.removeChild(g)),n(s).data("blockUI.onUnblock",h.onUnblock),d=h.baseZ,tt=f||h.forceIframe?n('<iframe class="blockUI" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+h.iframeSrc+'"><\/iframe>'):n('<div class="blockUI" style="display:none"><\/div>'),nt=h.theme?n('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+d+++';display:none"><\/div>'):n('<div class="blockUI blockOverlay" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"><\/div>'),h.theme&&p?(b='<div class="blockUI '+h.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:fixed">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):h.theme?(b='<div class="blockUI '+h.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:absolute">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):b=p?'<div class="blockUI '+h.blockMsgClass+' blockPage" style="z-index:'+(d+10)+';display:none;position:fixed"><\/div>':'<div class="blockUI '+h.blockMsgClass+' blockElement" style="z-index:'+(d+10)+';display:none;position:absolute"><\/div>',w=n(b),l&&(h.theme?(w.css(ut),w.addClass("ui-widget-content")):w.css(rt)),h.theme||nt.css(h.overlayCSS),nt.css("position",p?"fixed":"absolute"),(f||h.forceIframe)&&tt.css("opacity",0),it=[tt,nt,w],ft=p?n("body"):n(s),n.each(it,function(){this.appendTo(ft)}),h.theme&&h.draggable&&n.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),et=v&&(!n.support.boxModel||n("object,embed",p?null:s).length>0),o||et){if(p&&h.allowBodyStretch&&n.support.boxModel&&n("html,body").css("height","100%"),(o||!n.support.boxModel)&&!p)var ot=r(s,"borderTopWidth"),st=r(s,"borderLeftWidth"),ht=ot?"(0 - "+ot+")":0,ct=st?"(0 - "+st+")":0;n.each(it,function(n,t){var i=t[0].style,r,u;i.position="absolute";n<2?(p?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+h.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),p?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),ct&&i.setExpression("left",ct),ht&&i.setExpression("top",ht)):h.centerY?(p&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0):!h.centerY&&p&&(r=h.css&&h.css.top?parseInt(h.css.top,10):0,u="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"',i.setExpression("top",u))})}if(l&&(h.theme?w.find(".ui-widget-content").append(l):w.append(l),(l.jquery||l.nodeType)&&n(l).show()),(f||h.forceIframe)&&h.showOverlay&&tt.show(),h.fadeIn){var lt=h.onBlock?h.onBlock:u,vt=h.showOverlay&&!l?lt:u,yt=l?lt:u;h.showOverlay&&nt._fadeIn(h.fadeIn,vt);l&&w._fadeIn(h.fadeIn,yt)}else h.showOverlay&&nt.show(),l&&w.show(),h.onBlock&&h.onBlock();c(1,s,h);p?(t=w[0],i=n(":input:enabled:visible",t),h.focusInput&&setTimeout(a,20)):y(w[0],h.centerX,h.centerY);h.timeout&&(at=setTimeout(function(){p?n.unblockUI(h):n(s).unblock(h)},h.timeout),n(s).data("blockUI.timeout",at))}}function e(r,u){var o=r==window,e=n(r),s=e.data("blockUI.history"),l=e.data("blockUI.timeout"),f;l&&(clearTimeout(l),e.removeData("blockUI.timeout"));u=n.extend({},n.blockUI.defaults,u||{});c(0,r,u);u.onUnblock===null&&(u.onUnblock=e.data("blockUI.onUnblock"),e.removeData("blockUI.onUnblock"));f=o?n("body").children().filter(".blockUI").add("body > .blockUI"):e.find(">.blockUI");u.cursorReset&&(f.length>1&&(f[1].style.cursor=u.cursorReset),f.length>2&&(f[2].style.cursor=u.cursorReset));o&&(t=i=null);u.fadeOut?(f.fadeOut(u.fadeOut),setTimeout(function(){h(f,s,u,r)},u.fadeOut)):h(f,s,u,r)}function h(t,i,r,u){var e=n(u);if(t.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.parent&&i.parent.appendChild(i.el),e.removeData("blockUI.history")),e.data("blockUI.static")&&e.css("position","static"),typeof r.onUnblock=="function")r.onUnblock(u,r);var f=n(document.body),o=f.width(),s=f[0].style.width;f.width(o-1).width(o);f[0].style.width=s}function c(i,r,u){var e=r==window,o=n(r),f;(i||(!e||t)&&(e||o.data("blockUI.isBlocked")))&&(o.data("blockUI.isBlocked",i),u.bindEvents&&(!i||u.showOverlay))&&(f="mousedown mouseup keydown keypress keyup touchstart touchend touchmove",i?n(document).bind(f,u,l):n(document).unbind(f,l))}function l(r){var u,f;if(r.keyCode&&r.keyCode==9&&t&&r.data.constrainTabKey){var e=i,s=!r.shiftKey&&r.target===e[e.length-1],o=r.shiftKey&&r.target===e[0];if(s||o)return setTimeout(function(){a(o)},10),!1}return(u=r.data,f=n(r.target),f.hasClass("blockOverlay")&&u.onOverlayClick&&u.onOverlayClick(),f.parents("div."+u.blockMsgClass).length>0)?!0:f.parents().children().filter("div.blockUI").length===0}function a(n){if(i){var t=i[n===!0?i.length-1:0];t&&t.focus()}}function y(n,t,i){var u=n.parentNode,f=n.style,e=(u.offsetWidth-n.offsetWidth)/2-r(u,"borderLeftWidth"),o=(u.offsetHeight-n.offsetHeight)/2-r(u,"borderTopWidth");t&&(f.left=e>0?e+"px":"0");i&&(f.top=o>0?o+"px":"0")}function r(t,i){return parseInt(n.css(t,i),10)||0}var t,i;n.fn._fadeIn=n.fn.fadeIn;var u=n.noop||function(){},f=/MSIE/.test(navigator.userAgent),o=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),p=document.documentMode||0,v=n.isFunction(document.createElement("div").style.setExpression);n.blockUI=function(n){s(window,n)};n.unblockUI=function(n){e(window,n)};n.growlUI=function(t,i,r,u){var f=n('<div class="growlUI"><\/div>');t&&f.append("<h1>"+t+"<\/h1>");i&&f.append("<h2>"+i+"<\/h2>");r===undefined&&(r=3e3);n.blockUI({message:f,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:r,showOverlay:!1,onUnblock:u,css:n.blockUI.defaults.growlCSS})};n.fn.block=function(t){var i=n.extend({},n.blockUI.defaults,t||{});return this.each(function(){var t=n(this);i.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){n.css(this,"position")=="static"&&(this.style.position="relative",n(this).data("blockUI.static",!0));this.style.zoom=1;s(this,t)})};n.fn.unblock=function(n){return this.each(function(){e(this,n)})};n.blockUI.version=2.56;n.blockUI.defaults={message:"<h1>Please wait...<\/h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};t=null;i=[]}typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):n(jQuery)}();!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(n){"use strict";function r(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),n(t.target).ajaxSubmit(i))}function u(t){var r=t.target,u=n(r),f,i,e;if(!u.is("[type=submit],[type=image]")){if(f=u.closest("[type=submit]"),0===f.length)return;r=f[0]}i=this;(i.clk=r,"image"==r.type)&&(void 0!==t.offsetX?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):"function"==typeof n.fn.offset?(e=u.offset(),i.clk_x=t.pageX-e.left,i.clk_y=t.pageY-e.top):(i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop));setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function t(){if(n.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var i={},f;i.fileapi=void 0!==n("<input type='file'/>").get(0).files;i.formdata=void 0!==window.FormData;f=!!n.fn.prop;n.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var n=this.prop.apply(this,arguments);return n&&n.jquery||"string"==typeof n?n:this.attr.apply(this,arguments)};n.fn.ajaxSubmit=function(r){function et(t){for(var f,u=n.param(t,r.traditional).split("&"),o=u.length,e=[],i=0;o>i;i++)u[i]=u[i].replace(/\+/g," "),f=u[i].split("="),e.push([decodeURIComponent(f[0]),decodeURIComponent(f[1])]);return e}function ot(t){for(var f,u,s,o=new FormData,i=0;i<t.length;i++)o.append(t[i].name,t[i].value);if(r.extraData)for(f=et(r.extraData),i=0;i<f.length;i++)f[i]&&o.append(f[i][0],f[i][1]);return r.data=null,u=n.extend(!0,{},n.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:e||"POST"}),r.uploadProgress&&(u.xhr=function(){var t=n.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(n){var t=0,i=n.loaded||n.position,u=n.total;n.lengthComputable&&(t=Math.ceil(i/u*100));r.uploadProgress(n,i,u,t)},!1),t}),u.data=null,s=u.beforeSend,u.beforeSend=function(n,t){t.data=r.formData?r.formData:o;s&&s.call(this,n,t)},n.ajax(u)}function d(i){function ut(n){var i=null;try{n.contentWindow&&(i=n.contentWindow.document)}catch(r){t("cannot get iframe.contentWindow document: "+r)}if(i)return i;try{i=n.contentDocument?n.contentDocument:n.document}catch(r){t("cannot get iframe.contentDocument: "+r);i=n.document}return i}function ft(){function f(){try{var n=ut(a).readyState;t("state = "+n);n&&"uninitialized"==n.toLowerCase()&&setTimeout(f,50)}catch(i){t("Server abort: ",i," (",i.name,")");b(rt);g&&clearTimeout(g);g=void 0}}var s=u.attr2("target"),h=u.attr2("action"),y=u.attr("enctype")||u.attr("encoding")||"multipart/form-data",r,i,c;l.setAttribute("target",d);(!e||/post/i.test(e))&&l.setAttribute("method","POST");h!=o.url&&l.setAttribute("action",o.url);o.skipEncodingOverride||e&&!/post/i.test(e)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});o.timeout&&(g=setTimeout(function(){it=!0;b(et)},o.timeout));r=[];try{if(o.extraData)for(i in o.extraData)o.extraData.hasOwnProperty(i)&&r.push(n.isPlainObject(o.extraData[i])&&o.extraData[i].hasOwnProperty("name")&&o.extraData[i].hasOwnProperty("value")?n('<input type="hidden" name="'+o.extraData[i].name+'">').val(o.extraData[i].value).appendTo(l)[0]:n('<input type="hidden" name="'+i+'">').val(o.extraData[i]).appendTo(l)[0]);o.iframeTarget||v.appendTo("body");a.attachEvent?a.attachEvent("onload",b):a.addEventListener("load",b,!1);setTimeout(f,15);try{l.submit()}catch(p){c=document.createElement("form").submit;c.apply(l)}}finally{l.setAttribute("action",h);l.setAttribute("enctype",y);s?l.setAttribute("target",s):u.removeAttr("target");n(r).remove()}}function b(i){var u,r,w,f,k,d,e,c,l;if(!s.aborted&&!ct){if(h=ut(a),h||(t("cannot access response document"),i=rt),i===et&&s)return s.abort("timeout"),void y.reject(s,"timeout");if(i==rt&&s)return s.abort("server abort"),void y.reject(s,"error","server abort");if(h&&h.location.href!=o.iframeSrc||it){a.detachEvent?a.detachEvent("onload",b):a.removeEventListener("load",b,!1);r="success";try{if(it)throw"timeout";if(w="xml"==o.dataType||h.XMLDocument||n.isXMLDoc(h),t("isXml="+w),!w&&window.opera&&(null===h.body||!h.body.innerHTML)&&--lt)return t("requeing onLoad callback, DOM not available"),void setTimeout(b,250);f=h.body?h.body:h.documentElement;s.responseText=f?f.innerHTML:null;s.responseXML=h.XMLDocument?h.XMLDocument:h;w&&(o.dataType="xml");s.getResponseHeader=function(n){var t={"content-type":o.dataType};return t[n.toLowerCase()]};f&&(s.status=Number(f.getAttribute("status"))||s.status,s.statusText=f.getAttribute("statusText")||s.statusText);k=(o.dataType||"").toLowerCase();d=/(json|script|text)/.test(k);d||o.textarea?(e=h.getElementsByTagName("textarea")[0],e?(s.responseText=e.value,s.status=Number(e.getAttribute("status"))||s.status,s.statusText=e.getAttribute("statusText")||s.statusText):d&&(c=h.getElementsByTagName("pre")[0],l=h.getElementsByTagName("body")[0],c?s.responseText=c.textContent?c.textContent:c.innerText:l&&(s.responseText=l.textContent?l.textContent:l.innerText))):"xml"==k&&!s.responseXML&&s.responseText&&(s.responseXML=at(s.responseText));try{ht=yt(s,k,o)}catch(nt){r="parsererror";s.error=u=nt||r}}catch(nt){t("error caught: ",nt);r="error";s.error=u=nt||r}s.aborted&&(t("upload aborted"),r=null);s.status&&(r=s.status>=200&&s.status<300||304===s.status?"success":"error");"success"===r?(o.success&&o.success.call(o.context,ht,"success",s),y.resolve(s.responseText,"success",s),p&&n.event.trigger("ajaxSuccess",[s,o])):r&&(void 0===u&&(u=s.statusText),o.error&&o.error.call(o.context,s,r,u),y.reject(s,"error",u),p&&n.event.trigger("ajaxError",[s,o,u]));p&&n.event.trigger("ajaxComplete",[s,o]);p&&!--n.active&&n.event.trigger("ajaxStop");o.complete&&o.complete.call(o.context,s,r);ct=!0;o.timeout&&clearTimeout(g);setTimeout(function(){o.iframeTarget?v.attr("src",o.iframeSrc):v.remove();s.responseXML=null},100)}}}var tt,nt,o,p,d,v,a,s,k,w,it,g,l=u[0],y=n.Deferred();if(y.abort=function(n){s.abort(n)},i)for(nt=0;nt<c.length;nt++)tt=n(c[nt]),f?tt.prop("disabled",!1):tt.removeAttr("disabled");if(o=n.extend(!0,{},n.ajaxSettings,r),o.context=o.context||o,d="jqFormIO"+(new Date).getTime(),o.iframeTarget?(v=n(o.iframeTarget),w=v.attr2("name"),w?d=w:v.attr2("name",d)):(v=n('<iframe name="'+d+'" src="'+o.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),a=v[0],s={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var r="timeout"===i?"timeout":"aborted";t("aborting upload... "+r);this.aborted=1;try{a.contentWindow.document.execCommand&&a.contentWindow.document.execCommand("Stop")}catch(u){}v.attr("src",o.iframeSrc);s.error=r;o.error&&o.error.call(o.context,s,r,i);p&&n.event.trigger("ajaxError",[s,o,r]);o.complete&&o.complete.call(o.context,s,r)}},p=o.global,p&&0==n.active++&&n.event.trigger("ajaxStart"),p&&n.event.trigger("ajaxSend",[s,o]),o.beforeSend&&o.beforeSend.call(o.context,s,o)===!1)return o.global&&n.active--,y.reject(),y;if(s.aborted)return y.reject(),y;k=l.clk;k&&(w=k.name,w&&!k.disabled&&(o.extraData=o.extraData||{},o.extraData[w]=k.value,"image"==k.type&&(o.extraData[w+".x"]=l.clk_x,o.extraData[w+".y"]=l.clk_y)));var et=1,rt=2,ot=n("meta[name=csrf-token]").attr("content"),st=n("meta[name=csrf-param]").attr("content");st&&ot&&(o.extraData=o.extraData||{},o.extraData[st]=ot);o.forceSync?ft():setTimeout(ft,10);var ht,h,ct,lt=50,at=n.parseXML||function(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},vt=n.parseJSON||function(e){return window.eval("("+e+")")},yt=function(t,i,r){var f=t.getResponseHeader("content-type")||"",e="xml"===i||!i&&f.indexOf("xml")>=0,u=e?t.responseXML:t.responseText;return e&&"parsererror"===u.documentElement.nodeName&&n.error&&n.error("parsererror"),r&&r.dataFilter&&(u=r.dataFilter(u,i)),"string"==typeof u&&("json"===i||!i&&f.indexOf("json")>=0?u=vt(u):("script"===i||!i&&f.indexOf("javascript")>=0)&&n.globalEval(u)),u};return y}var e,b,o,u,a,v,y,c,s,l,h,g,nt,tt,p,ft,w;if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;if(u=this,"function"==typeof r?r={success:r}:void 0===r&&(r={}),e=r.type||this.attr2("method"),b=r.url||this.attr2("action"),o="string"==typeof b?n.trim(b):"",o=o||window.location.href||"",o&&(o=(o.match(/^([^#]+)/)||[])[1]),r=n.extend(!0,{url:o,success:n.ajaxSettings.success,type:e||n.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r),a={},this.trigger("form-pre-serialize",[this,r,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(v=r.traditional,void 0===v&&(v=n.ajaxSettings.traditional),c=[],s=this.formToArray(r.semantic,c),r.data&&(r.extraData=r.data,y=n.param(r.data,v)),r.beforeSubmit&&r.beforeSubmit(s,this,r)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[s,this,r,a]),a.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;l=n.param(s,v);y&&(l=l?l+"&"+y:y);"GET"==r.type.toUpperCase()?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+l,r.data=null):r.data=l;h=[];(r.resetForm&&h.push(function(){u.resetForm()}),r.clearForm&&h.push(function(){u.clearForm(r.includeHidden)}),!r.dataType&&r.target)?(g=r.success||function(){},h.push(function(t){var i=r.replaceTarget?"replaceWith":"html";n(r.target)[i](t).each(g,arguments)})):r.success&&h.push(r.success);(r.success=function(n,t,i){for(var e=r.context||this,f=0,o=h.length;o>f;f++)h[f].apply(e,[n,t,i||u,u])},r.error)&&(nt=r.error,r.error=function(n,t,i){var f=r.context||this;nt.apply(f,[n,t,i,u])});r.complete&&(tt=r.complete,r.complete=function(n,t){var i=r.context||this;tt.apply(i,[n,t,u])});var st=n("input[type=file]:enabled",this).filter(function(){return""!==n(this).val()}),it=st.length>0,rt="multipart/form-data",ut=u.attr("enctype")==rt||u.attr("encoding")==rt,k=i.fileapi&&i.formdata;for(t("fileAPI :"+k),ft=(it||ut)&&!k,r.iframe!==!1&&(r.iframe||ft)?r.closeKeepAlive?n.get(r.closeKeepAlive,function(){p=d(s)}):p=d(s):p=(it||ut)&&k?ot(s):n.ajax(r),u.removeData("jqxhr").data("jqxhr",p),w=0;w<c.length;w++)c[w]=null;return this.trigger("form-submit-notify",[this,r]),this};n.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&n.isFunction(n.fn.on),!i.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!n.isReady&&f.s?(t("DOM not ready, queuing ajaxForm"),n(function(){n(f.s,f.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this)}return i.delegation?(n(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,u).on("submit.form-plugin",this.selector,i,r).on("click.form-plugin",this.selector,i,u),this):this.ajaxFormUnbind().bind("submit.form-plugin",i,r).bind("click.form-plugin",i,u)};n.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};n.fn.formToArray=function(t,r){var e=[],l,h,f,c,u,b,k,a,p,v;if(0===this.length)return e;var y,o=this[0],w=this.attr("id"),s=t?o.getElementsByTagName("*"):o.elements;if(s&&!/MSIE [678]/.test(navigator.userAgent)&&(s=n(s).get()),w&&(y=n(':input[form="'+w+'"]').get(),y.length&&(s=(s||[]).concat(y))),!s||!s.length)return e;for(l=0,b=s.length;b>l;l++)if(u=s[l],f=u.name,f&&!u.disabled)if(t&&o.clk&&"image"==u.type)o.clk==u&&(e.push({name:f,value:n(u).val(),type:u.type}),e.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}));else if(c=n.fieldValue(u,!0),c&&c.constructor==Array)for(r&&r.push(u),h=0,k=c.length;k>h;h++)e.push({name:f,value:c[h]});else if(i.fileapi&&"file"==u.type)if(r&&r.push(u),a=u.files,a.length)for(h=0;h<a.length;h++)e.push({name:f,value:a[h],type:u.type});else e.push({name:f,value:"",type:u.type});else null!==c&&"undefined"!=typeof c&&(r&&r.push(u),e.push({name:f,value:c,type:u.type,required:u.required}));return!t&&o.clk&&(p=n(o.clk),v=p[0],f=v.name,f&&!v.disabled&&"image"==v.type&&(e.push({name:f,value:p.val()}),e.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}))),e};n.fn.formSerialize=function(t){return n.param(this.formToArray(t))};n.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var f=this.name,r,u,e;if(f)if(r=n.fieldValue(this,t),r&&r.constructor==Array)for(u=0,e=r.length;e>u;u++)i.push({name:f,value:r[u]});else null!==r&&"undefined"!=typeof r&&i.push({name:this.name,value:r})}),n.param(i)};n.fn.fieldValue=function(t){for(var f,i,r=[],u=0,e=this.length;e>u;u++)f=this[u],i=n.fieldValue(f,t),null!==i&&"undefined"!=typeof i&&(i.constructor!=Array||i.length)&&(i.constructor==Array?n.merge(r,i):r.push(i));return r};n.fieldValue=function(t,i){var a=t.name,u=t.type,h=t.tagName.toLowerCase(),e,r,f;if(void 0===i&&(i=!0),i&&(!a||t.disabled||"reset"==u||"button"==u||("checkbox"==u||"radio"==u)&&!t.checked||("submit"==u||"image"==u)&&t.form&&t.form.clk!=t||"select"==h&&-1==t.selectedIndex))return null;if("select"==h){if(e=t.selectedIndex,0>e)return null;for(var c=[],l=t.options,o="select-one"==u,v=o?e+1:l.length,s=o?e:0;v>s;s++)if(r=l[s],r.selected){if(f=r.value,f||(f=r.attributes&&r.attributes.value&&!r.attributes.value.specified?r.text:r.value),o)return f;c.push(f)}return c}return n(t).val()};n.fn.clearForm=function(t){return this.each(function(){n("input,select,textarea",this).clearFields(t)})};n.fn.clearFields=n.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,u=this.tagName.toLowerCase();i.test(r)||"textarea"==u?this.value="":"checkbox"==r||"radio"==r?this.checked=!1:"select"==u?this.selectedIndex=-1:"file"==r?/MSIE/.test(navigator.userAgent)?n(this).replaceWith(n(this).clone(!0)):n(this).val(""):t&&(t===!0&&/hidden/.test(r)||"string"==typeof t&&n(this).is(t))&&(this.value="")})};n.fn.resetForm=function(){return this.each(function(){"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset()})};n.fn.enable=function(n){return void 0===n&&(n=!0),this.each(function(){this.disabled=!n})};n.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type,i;"checkbox"==r||"radio"==r?this.checked=t:"option"==this.tagName.toLowerCase()&&(i=n(this).parent("select"),t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t)})};n.fn.ajaxSubmit.debug=!1}),function(n){function t(t){this._element=n(t);this._target=this._element.data("target")||{};this._attachmentSettings=this._element.data("attachmentsettings");this._serviceUrlGet=this._element.attr("data-url-get");this._serviceUrlAdd=this._element.attr("data-url-add");this._serviceUrlEdit=this._element.attr("data-url-edit");this._serviceUrlDelete=this._element.attr("data-url-delete");this._addEnabled=this._element.data("add-enabled");this._editEnabled=this._element.data("edit-enabled");this._deleteEnabled=this._element.data("delete-enabled");this._pageSize=this._element.attr("data-pagesize");this._orders=this._element.data("orders");this._addSuccess=!1;this._editSuccess=!1;this._deleteSuccess=!1;this._$editModal=this._element.children(".modal-editnote").appendTo("body");this._$deleteModal=this._element.children(".modal-deletenote").appendTo("body");var i=this;n(t).on("refresh",function(n,t){i.load(t)})}function i(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null){typeof console!="undefined"&&console&&console.log(t);var u=i.find(".modal-body"),r=i.find(".alert-danger.error");r.length==0?r=n("<div><\/div>").addClass("alert alert-block alert-danger error clearfix"):r.empty();typeof t.InnerError!=typeof undefined&&typeof t.InnerError.Message!=typeof undefined&&t.InnerError.Message!==!1&&t.InnerError.Message!=null?typeof t.InnerError.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.InnerError.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.InnerError.Message+"<\/p>"):typeof t.Message!=typeof undefined&&t.Message!==!1&&t.Message!=null&&(typeof t.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+"<\/p>"));u.prepend(r)}}function r(t){var i={Message:"An unknown error has occurred."},r;if(t==null)return i;try{r=t.getResponseHeader("content-type");i=r!=null?r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}}:{Message:t.statusText}}catch(u){i={Message:u.message}}return i}n(document).ready(function(){n(".entity-notes").each(function(){new t(n(this)).render()})});t.prototype.render=function(){var t=this,i=t._element,r=i.children(".note-actions").find("a.addnote"),n=i.children(".modal-addnote").appendTo("body"),u=n.find(".modal-footer .btn-primary");if(t.load(),t._addEnabled){r.on("click",function(){n.modal("show")});u.on("click",function(){t.addNote(n)});n.on("hidden.bs.modal",function(){n.find("textarea").val("");n.find("input[type='file']").val("");n.find(".alert-danger.error").remove()})}};t.prototype.load=function(t){var i=this,r=i._element,u=r.children(".notes"),o=r.children(".notes-error"),s=r.children(".notes-empty"),h=r.children(".notes-access-denied"),c=r.children(".notes-loading"),l=r.find(".notes-pagination"),a=i._serviceUrlGet,v=i._target,y=i._orders,p=i._pageSize,f,e;o.hide();s.hide();h.hide();u.hide().empty();c.show();f=l.data("current-page");(f==null||f=="")&&(f=1);t=t||f;e=l.data("pagesize");(e==null||e=="")&&(e=p);i.getData(a,v,y,t,e,function(t){var f,e;if(typeof t==typeof undefined||t===!1||t==null){s.fadeIn();return}if(typeof t.Records!=typeof undefined&&t.Records!==!1&&(t.Records==null||t.Records.length==0)){s.fadeIn();return}if(typeof t.AccessDenied!=typeof undefined&&t.AccessDenied!==!1&&t.AccessDenied){h.fadeIn();return}f=n("#notes-template").html();Handlebars.registerHelper("AttachmentUrlWithTimeStamp",function(){return this.AttachmentUrl+"?t="+(new Date).getTime()});e=Handlebars.compile(f);u.html(e(t));u.find("abbr.timeago").each(function(){var i=n(this).attr("title"),t=window.moment;if(t){var u=dateFormatConverter.convert(r.closest("[data-dateformat]").data("dateformat")||"M/d/yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(r.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),e=u+" "+f;n(this).text(t(i).format(e))}});u.find("abbr.timeago").timeago();u.fadeIn();i.initializePagination(t);i._editEnabled&&i._editEnabled!="False"&&i.addEditClickEventHandlers();i._deleteEnabled&&i._deleteEnabled!="False"&&i.addDeleteClickEventHandlers()},function(n,t,i){o.find(".details").append(i);o.show()},function(){c.hide()})};t.prototype.getData=function(t,i,r,u,f,e,o,s){var h,c;if(e=n.isFunction(e)?e:function(){},o=n.isFunction(o)?o:function(){},s=n.isFunction(s)?s:function(){},!t||t==""){s.call(this);o.call(this,null,"error","A required service url was not provided.");return}if(!i){s.call(this);o.call(this,null,"error","A required regarding EntityReference parameter was not provided.");return}f=f||-1;h={};h.regarding=i;h.orders=r;h.page=u;h.pageSize=f;c=JSON.stringify(h);n.ajax({type:"POST",dataType:"json",contentType:"application/json",url:t,data:c,global:!1}).done(e).fail(o).always(s)};t.prototype.addEditClickEventHandlers=function(){var r=this,f=r._element,t=r._$editModal,i,u;if(t&&t.length!=0){if(i=t.find("input[type='file']"),u=t.find("button.primary"),i.length>0)i.on("change",function(){t.find(".attachment").remove()});u.unbind("click");u.on("click",function(n){n.preventDefault();r.updateNote(t)});t.on("hidden.bs.modal",function(){t.find(".alert-danger.error").remove();t.find("textarea").val("");t.find("input[type='file']").val("");t.find(".alert-danger.error").remove();t.data("id","");t.find(".attachment").empty()});f.find(".edit-link").on("click",function(r){var h,f,o,c;r.preventDefault();var u=n(this).closest(".note"),s=u.data("id"),a=u.data("unformattedtext")||"",v=u.data("subject")||"",y=u.data("isprivate"),p=u.data("hasattachment"),w=u.data("attachmentfilename"),b=u.data("attachmentfilesize"),e=u.data("attachmenturl"),k=u.data("attachmentisimage");if(!s||s==""){typeof console!="undefined"&&console&&console.log("Failed to launch edit note dialog. Data parameter 'id' is null.");return}if(t.data("id",s),t.data("subject",v),t.find("textarea").val(a),y&&t.find("input[type='checkbox']").prop("checked",!0),h=i.parent(),p)if(e+="?t="+(new Date).getTime(),f=t.find(".attachment"),f.length==0&&(f=n("<div class='attachment clearfix'><\/div>")),o=n("<div class='link'><\/div>"),c=n("<a target='_blank'><\/a>").attr("href",e).html("<span class='fa fa-file' aria-hidden='true'><\/span> "+w+" ("+b+")"),o.html(c),k){var d=n("<a target='_blank' class='thumbnail'><\/a>").attr("href",e),g=n("<img />").attr("src",e),l=n("<div class='img col-md-4'><\/div>");l.append(d.html(g));f.html(l).append(o);h.prepend(f)}else f.html(o),h.prepend(f);t.modal()})}};t.prototype.addDeleteClickEventHandlers=function(){var u=this,f=u._element,e=u._serviceUrlDelete,t=u._$deleteModal;if(t&&t.length!=0){t.on("hidden.bs.modal",function(){t.find(".alert-danger.error").remove()});f.find(".delete-link").on("click",function(o){var c,s,h;if(o.preventDefault(),c=n(this).closest(".note"),s=c.data("id"),!s||s==""){console.log("Failed to launch delete note dialog. Data parameter 'id' is null.");return}h=t.find(".modal-footer button.primary");h.unbind("click");h.on("click",function(){var o,c;n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");o={};o.id=s;c=JSON.stringify(o);n.ajax({type:"POST",contentType:"application/json",url:e,data:c}).done(function(){u._deleteSuccess=!0;f.trigger("refresh");t.modal("hide")}).fail(function(n){i(r(n),t)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});t.modal()})}};t.prototype.addNote=function(t){var u=this,y=u._element,l=u._target,e=u._serviceUrlAdd,o=t.find(".modal-footer button.primary"),s=t.find("textarea").val(),a=!1,v,h,f,r,c;if(e==null||e==""){v={Message:"System Error",InnerError:{Message:"The URL to the service for this Add Note Request could not be determined."}};i(v,t);return}s==null||s.length<=0||(h=t.find("input[type='checkbox']"),h.length>0&&(a=h.prop("checked")),f=t.find("input[type='file']"),o.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),r=n("<form>").attr("id","add-note-"+(new Date).getTime()).attr("method","POST").attr("action",e).hide().appendTo(n("body")),n("<input>").attr("name","regardingEntityLogicalName").attr("type","hidden").appendTo(r).val(l.LogicalName),n("<input>").attr("name","regardingEntityId").attr("type","hidden").appendTo(r).val(l.Id),n("<input>").attr("name","text").attr("type","hidden").appendTo(r).val(s),n("<input>").attr("name","isPrivate").attr("type","hidden").appendTo(r).val(a),n("<input>").attr("name","attachmentSettings").attr("type","hidden").appendTo(r).val(u._attachmentSettings),c=n("<input>").attr("type","file").attr("name","file").insertAfter(f),f.appendTo(r),r.submit(function(){return n(this).ajaxSubmit({success:function(){u._addSuccess=!0;y.trigger("refresh");t.modal("hide");r.remove();o.removeAttr("disabled","disabled").find(".fa-spin").remove()},error:function(n){i({Message:n.statusText},t);f.insertAfter(c);c.remove();r.remove();o.removeAttr("disabled","disabled").find(".fa-spin").remove()}}),!1}),r.submit())};t.prototype.updateNote=function(t){var u=this,p=u._element,o=u._serviceUrlEdit,s=t.find(".modal-footer button.primary"),h=t.find("textarea").val(),w=t.data("subject")||"",a=!1,v,f,y,c,e,r,l;if(o==null||o==""){v={Message:"System Error",InnerError:{Message:"The URL to the service for this Update Note Request could not be determined."}};i(v,t);return}if(f=t.data("id"),!f||f==""){y={Message:"System Error",InnerError:{Message:"Failed to determine record ID."}};i(y,t);return}h==null||h.length<=0||(c=t.find("input[type='checkbox']"),c.length>0&&(a=c.prop("checked")),e=t.find("input[type='file']"),s.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),r=n("<form>").attr("id","update-note-"+(new Date).getTime()).attr("method","POST").attr("action",o).hide().appendTo(n("body")),n("<input>").attr("name","id").attr("type","hidden").appendTo(r).val(f),n("<input>").attr("name","subject").attr("type","hidden").appendTo(r).val(w),n("<input>").attr("name","text").attr("type","hidden").appendTo(r).val(h),n("<input>").attr("name","isPrivate").attr("type","hidden").appendTo(r).val(a),n("<input>").attr("name","attachmentSettings").attr("type","hidden").appendTo(r).val(u._attachmentSettings),l=n("<input>").attr("type","file").attr("name","file").insertAfter(e),e.appendTo(r),r.submit(function(){return n(this).ajaxSubmit({success:function(){u._editSuccess=!0;p.trigger("refresh");t.modal("hide");r.remove();s.removeAttr("disabled","disabled").find(".fa-spin").remove()},error:function(n){i({Message:n.statusText},t);e.insertAfter(l);l.remove();r.remove();s.removeAttr("disabled","disabled").find(".fa-spin").remove()}}),!1}),r.submit())};t.prototype.initializePagination=function(t){if(typeof t!=typeof undefined&&t!==!1&&t!=null&&typeof t.PageSize!=typeof undefined&&t.PageSize!==!1&&t.PageSize!=null&&typeof t.PageCount!=typeof undefined&&t.PageCount!==!1&&t.PageCount!=null&&typeof t.PageNumber!=typeof undefined&&t.PageNumber!==!1&&t.PageNumber!=null&&typeof t.ItemCount!=typeof undefined&&t.ItemCount!==!1&&t.ItemCount!=null){var r=this,u=r._element,i=u.find(".notes-pagination");if(t.PageCount<=1){i.hide();return}i.data("pagesize",t.PageSize).data("pages",t.PageCount).data("current-page",t.PageNumber).data("count",t.ItemCount).unbind("click").pagination({total_pages:i.data("pages"),current_page:i.data("current-page"),callback:function(t,i){t.preventDefault();var u=n(t.target).closest("li");u.not(".disabled").length>0&&u.not(".active").length>0&&r.load(i)}}).show()}}}(jQuery),function(n){function f(t){var r,i,f,u;(this._element=n(t),this._layout=null,r=this._element,i=r.closest(".entity-form"),i.length<1&&(f=r.closest(".crmEntityFormView"),i=f.find(".entity-form")),i.length!=0)&&(u=i.find("[id$='_EntityLayoutConfig']"),u.length!=0)&&(this._layout=u.data("form-layout"))}function t(t){n.cookie("adx-notification",t,{expires:1})}function i(t,i){var e,r,f,u,o;typeof t!=typeof undefined&&t!==!1&&t!=null&&(console.log(t),e=typeof t.InnerError!=typeof undefined&&t.InnerError!==!1&&t.InnerError!=null?t.InnerError.Message:t.Message,r=n(".notifications"),r.length==0&&(f=n(".page-heading"),r=f.length==0?n("<div class='notifications'><\/div>").prependTo(n("#content-container")):n("<div class='notifications'><\/div>").appendTo(f)),r.find(".notification").slideUp().remove(),u=i.find(".navbar-collapse").find(".action-status"),u.length==0&&(u=i.parent().find(".navbar-collapse").find(".action-status")),u.html("<span class='fa fa-fw fa-exclamation-circle text-danger' aria-hidden='true'><\/span>"),o=n("<div class='notification alert alert-danger error alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;<\/span><\/button><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+e+"<\/div>").on("closed.bs.alert",function(){u.html("<span class='fa fa-fw' aria-hidden='true'><\/span>");r.find(".notification").length==0&&r.hide()}).prependTo(r),r.show(),n("html, body").animate({scrollTop:o.offset().top-20},200))}function r(n,t){var i;if(typeof n==typeof undefined||n==null){e(t);return}var r=typeof n.OnComplete!=typeof undefined&&n.OnComplete!=null&&n.OnComplete!=0;r?(i=s(n),i!=null&&i!=""?o(i):e(t)):e(t)}function o(t){typeof t!="undefined"&&t!=null&&t!=""&&(n.blockUI({css:{border:"none",backgroundColor:"transparent",opacity:.5,color:"#fff"},message:"<span class='fa fa-2x fa-spinner fa-pulse' aria-hidden='true'><\/span>"}),parent?parent.location.replace(t):window.location.replace(t))}function e(t){n.blockUI({css:{border:"none",backgroundColor:"transparent",opacity:.5,color:"#fff"},message:"<span class='fa fa-2x fa-spinner fa-pulse' aria-hidden='true'><\/span>"});t&&parent?parent.location.reload():window.location.reload()}function s(n){return!n||!n.RedirectUrl?null:n.RedirectUrl.Host==window.location.hostname?URI(n.RedirectUrl.PathWithQueryString):URI(n.RedirectUrl.Uri)}function u(t){var i={Message:"An unknown error has occurred."},r;if(t==null)return i;try{r=t.getResponseHeader("content-type");i=r!=null?r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}}:{Message:t.statusText}}catch(u){i={Message:u.message}}return i}n(document).ready(function(){n(".form-custom-actions").each(function(){new f(n(this)).render()});n(".form-custom-actions .dropdown-toggle").each(function(){var t=n(this).parent().find(".dropdown-menu"),i=t.find("a:not(.hidden)").length;i<1&&n(this).parent().hide()})});f.prototype.render=function(){var n=this,i=n._element,t=n._layout;(typeof t==typeof undefined||t==null||t=="")&&i.hide();var e=n.addDeleteActionLinkClickEventHandlers(),o=n.addWorkflowActionLinkClickEventHandlers(),s=n.addQualifyLeadActionLinkClickEventHandlers(),h=n.addCloseCaseActionLinkClickEventHandlers(),c=n.addResolveCaseActionLinkClickEventHandlers(),l=n.addReopenCaseActionLinkClickEventHandlers(),a=n.addCancelCaseActionLinkClickEventHandlers(),v=n.addConvertQuoteActionLinkClickEventHandlers(),y=n.addConvertOrderActionLinkClickEventHandlers(),p=n.addCalculateOpportunityActionLinkClickEventHandlers(),w=n.addActivateActionLinkClickEventHandlers(),b=n.addDeactivateActionLinkClickEventHandlers(),k=n.addActivateQuoteActionLinkClickEventHandlers(),d=n.addSetOpportunityOnHoldActionLinkClickEventHandlers(),g=n.addReopenOpportunityActionLinkClickEventHandlers(),nt=n.addWinOpportunityActionLinkClickEventHandlers(),tt=n.addLoseOpportunityActionLinkClickEventHandlers(),it=n.addGenerateQuoteFromOpportunityActionLinkClickEventHandlers(),rt=n.addUpdatePipelinePhaseActionLinkClickEventHandlers(),r=n.addSubmitActionLinkClickEventHandlers(),u=n.addNextActionLinkClickEventHandlers(),f=n.addPreviousActionLinkClickEventHandlers();(e||o||s||h||c||l||a||v||y||p||w||b||k||d||nt||tt||it||rt||g||r||u||f)&&t!=null&&(t.EnableActions||r||u||f)?i.show():i.hide()};f.prototype.addDeleteActionLinkClickEventHandlers=function(){var l=this,e=l._element,f=l._layout,c,a,v,h;if(f==null||f==""||f.DeleteActionLink==null||!f.DeleteActionLink.Enabled||!f.DeleteActionLink.URL)return c=e.find(".delete-link"),c.hide(),c.addClass("hidden"),!1;var y=f.DeleteActionLink.URL.PathWithQueryString,s=e.children(".modal-delete"),o=e.closest(".entity-form");o.length<1&&(a=e.closest(".crmEntityFormView"),o=a.find(".entity-form"));v=o.find("[id$='_EntityID']").val();h=s.find("button.primary");h.off("click");h.on("click",function(e){var c,l;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");o.find(".navbar-collapse").find(".action-status").html("<span class='fa fa-spinner fa-spin fa-fw' aria-hidden='true'><\/span>");c={};c.LogicalName=f.EntityName;c.Id=v;l=JSON.stringify(c);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:y,data:l}).done(function(){s.modal("hide");t(f.DeleteActionLink.SuccessMessage);r(f.DeleteActionLink,!0)}).fail(function(n){s.modal("hide");i(u(n),o)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});e.find(".delete-link").on("click",function(n){n.preventDefault();s.modal()});return!0};f.prototype.addSubmitActionLinkClickEventHandlers=function(){var i=this,r=i._element,n=i._layout,t;return n==null||n==""||n.SubmitActionLink==null||!n.SubmitActionLink.Enabled?(t=r.find(".submit-btn"),t.addClass("hidden"),t.hide(),!1):!0};f.prototype.addNextActionLinkClickEventHandlers=function(){var i=this,r=i._element,n=i._layout,t;return n==null||n==""||n.NextActionLink==null||!n.NextActionLink.Enabled?(t=r.find(".next-btn"),t.addClass("hidden"),t.hide(),!1):!0};f.prototype.addPreviousActionLinkClickEventHandlers=function(){var i=this,r=i._element,n=i._layout,t;return n==null||n==""||n.PreviousActionLink==null||!n.PreviousActionLink.Enabled?(t=r.find(".previous-btn"),t.addClass("hidden"),t.hide(),!1):!0};f.prototype.addWorkflowActionLinkClickEventHandlers=function(){var v=this,o=v._element,f=v._layout,h=o.closest(".entity-form"),y,e,c,a,s,l;if(h.length<1&&(y=o.closest(".crmEntityFormView"),h=y.find(".entity-form")),e=[],f!=null&&f!=""&&f.TopFormActionLinks&&f.TopFormActionLinks.length>0&&f.BottomFormActionLinks&&f.BottomFormActionLinks.length>0)e=_.union(f.TopFormActionLinks,f.BottomFormActionLinks);else if(f!=null&&f!=""&&f.TopFormActionLinks&&f.TopFormActionLinks.length>0)e=f.TopFormActionLinks;else if(f!=null&&f!="")e=f.BottomFormActionLinks;else return!1;if(e.length==0)return o.find(".workflow-link").hide(),!1;for(c=null,a=0;a<e.length;a++)if(s=e[a],s!=null&&typeof s.Type!=typeof undefined&&s.Type==7&&typeof s.Workflow!=typeof undefined&&s.Workflow!=null){c=s;break}if(f==null||f==""||c==null||!c.Enabled||!c.URL)return o.find(".workflow-link").hide(),o.find(".workflow-link").addClass("hidden"),!1;if(c.ShowModal==1){l=o.children(".modal-run-workflow");o.find(".workflow-link").on("click",function(o){o.preventDefault();var v=h.find("[id$='_EntityID']").val(),s=l.find("button.primary"),a=n(this).data("url"),c=n(this).data("workflowid");if(c&&a){s.off("click");s.on("click",function(o){var p,w,y,b,k,d,g;for(o.preventDefault(),n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),p=null,w=0;w<e.length;w++)if(y=e[w],y!=null&&typeof y.Type!=typeof undefined&&y.Type==7&&typeof y.Workflow!=typeof undefined&&y.Workflow!=null&&y.Workflow.Id==c){p=y;break}b={};k={};k.LogicalName="workflow";k.Id=c;b.workflow=k;d={};d.LogicalName=f.EntityName;d.Id=v;b.entity=d;g=JSON.stringify(b);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:g}).done(function(){l.modal("hide");t(p!=null?p.SuccessMessage:null);r(p)}).fail(function(n){l.modal("hide");i(u(n),h)}).always(function(){s.removeAttr("disabled","disabled").find(".fa-spin").remove()})});l.modal()}})}else o.find(".workflow-link").on("click",function(o){var c,l,s,a,v,y,b;o.preventDefault();var k=h.find("[id$='_EntityID']").val(),p=n(this).data("workflowid"),w=n(this).data("url");if(p&&w){for(c=null,l=0;l<e.length;l++)if(s=e[l],s!=null&&typeof s.Type!=typeof undefined&&s.Type==7&&typeof s.Workflow!=typeof undefined&&s.Workflow!=null&&s.Workflow.Id==p){c=s;break}a={};v={};v.LogicalName="workflow";v.Id=p;a.workflow=v;y={};y.LogicalName=f.EntityName;y.Id=k;a.entity=y;b=JSON.stringify(a);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:w,data:b}).done(function(){t(c!=null?c.SuccessMessage:null);r(c,!0)}).fail(function(n){i(u(n),h)})}});return!0};f.prototype.addQualifyLeadActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.QualifyLeadActionLink==null||!f.QualifyLeadActionLink.Enabled||!f.QualifyLeadActionLink.URL||a!="0")return h=o.find(".qualify-lead-link"),h.addClass("hidden"),h.hide(),!1;if(f.QualifyLeadActionLink.ShowModal==1){s=o.children(".modal-qualify");o.find(".qualify-lead-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var a,v,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};a.createAccount=!0;a.createContact=!0;a.createOpportunity=!0;v={};v.LogicalName=f.EntityName;v.Id=c;a.entityReference=v;y=JSON.stringify(a);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.QualifyLeadActionLink.SuccessMessage);r(f.QualifyLeadActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".qualify-lead-link").on("click",function(o){var h,c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),s={};s.createAccount=!0;s.createContact=!0;s.createOpportunity=!0;h={};h.LogicalName=f.EntityName;h.Id=l;s.entityReference=h;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.QualifyLeadActionLink.SuccessMessage);r(f.QualifyLeadActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addCloseCaseActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.CloseIncidentActionLink==null||!f.CloseIncidentActionLink.Enabled||!f.CloseIncidentActionLink.URL||a!="0")return h=o.find(".close-case-link"),h.addClass("hidden"),h.hide(),!1;if(f.CloseIncidentActionLink.ShowModal==1){s=o.children(".modal-closecase");o.find(".close-case-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var a,v,y,p,w;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};v={};v.LogicalName=f.EntityName;v.Id=c;a.entityReference=v;y=f.CloseIncidentActionLink.DefaultResolution;p=f.CloseIncidentActionLink.DefaultResolutionDescription;a.resolutionSubject=y;a.resolutionDescription=p;w=JSON.stringify(a);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:w}).done(function(){s.modal("hide");t(f.CloseIncidentActionLink.SuccessMessage);r(f.CloseIncidentActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".close-case-link").on("click",function(o){var c,l,a;o.preventDefault();var v=e.find("[id$='_EntityID']").val(),y=n(this).data("url"),s={},h={};h.LogicalName=f.EntityName;h.Id=v;s.entityReference=h;c=f.CloseIncidentActionLink.DefaultResolution;l=f.CloseIncidentActionLink.DefaultResolutionDescription;s.resolutionSubject=c;s.resolutionDescription=l;a=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:y,data:a}).done(function(){t(f.CloseIncidentActionLink.SuccessMessage);r(f.CloseIncidentActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addConvertQuoteActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.ConvertQuoteToOrderActionLink==null||!f.ConvertQuoteToOrderActionLink.Enabled||!f.ConvertQuoteToOrderActionLink.URL||a!="1")return h=o.find(".convert-quote-link"),h.addClass("hidden"),h.hide(),!1;if(f.ConvertQuoteToOrderActionLink.ShowModal==1){s=o.children(".modal-convert-quote");o.find(".convert-quote-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.ConvertQuoteToOrderActionLink.SuccessMessage);r(f.ConvertQuoteToOrderActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".convert-quote-link").on("click",function(o){var s,l;o.preventDefault();s=n(this);s.attr("disabled","disabled");s.closest("li.action").children(".dropdown-toggle").css("cursor","not-allowed").dropdown("toggle").removeAttr("data-toggle").off("click");s.closest(".navbar-collapse").find(".action-status").html("<span class='fa fa-spinner fa-spin fa-fw' aria-hidden='true'><\/span>");var a=e.find("[id$='_EntityID']").val(),v=n(this).data("url"),c={},h={};h.LogicalName=f.EntityName;h.Id=a;c.entityReference=h;l=JSON.stringify(c);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:v,data:l}).done(function(){t(f.ConvertQuoteToOrderActionLink.SuccessMessage);r(f.ConvertQuoteToOrderActionLink)}).fail(function(n){i(u(n),e)}).always(function(){s.removeAttr("disabled");s.closest("li.action").children(".dropdown-toggle").css("cursor","").attr("data-toggle","dropdown").data("toggle","dropdown").on("click",function(){n(this).dropdown()})})});return!0};f.prototype.addConvertOrderActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.ConvertOrderToInvoiceActionLink==null||!f.ConvertOrderToInvoiceActionLink.Enabled||!f.ConvertOrderToInvoiceActionLink.URL||a=="2")return h=o.find(".convert-order-link"),h.addClass("hidden"),h.hide(),!1;if(f.ConvertOrderToInvoiceActionLink.ShowModal==1){s=o.children(".modal-convert-order");o.find(".convert-order-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.ConvertOrderToInvoiceActionLink.SuccessMessage);r(f.ConvertOrderToInvoiceActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".convert-order-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.ConvertOrderToInvoiceActionLink.SuccessMessage);r(f.ConvertOrderToInvoiceActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addCalculateOpportunityActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,h,e,l,s;if(f==null||f==""||f.CalculateOpportunityActionLink==null||!f.CalculateOpportunityActionLink.Enabled||!f.CalculateOpportunityActionLink.URL)return h=o.find(".calculate-opportunity-link"),h.addClass("hidden"),h.hide(),!1;if(e=o.closest(".entity-form"),e.length<2&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),f.CalculateOpportunityActionLink.ShowModal==1){s=o.children(".modal-calculate");o.find(".calculate-opportunity-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.CalculateOpportunityActionLink.SuccessMessage);r(f.CalculateOpportunityActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".calculate-opportunity-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.CalculateOpportunityActionLink.SuccessMessage);r(f.CalculateOpportunityActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addResolveCaseActionLinkClickEventHandlers=function(){var c=this,o=c._element,e=c._layout,s=o.closest(".entity-form"),l,a,h,f;if(s.length<1&&(l=o.closest(".crmEntityFormView"),s=l.find(".entity-form")),a=s.find("[id$='_EntityState']").val(),e==null||e==""||e.ResolveCaseActionLink==null||!e.ResolveCaseActionLink.Enabled||!e.ResolveCaseActionLink.URL||a!="0")return h=o.find(".resolve-case-link"),h.addClass("hidden"),h.hide(),!1;f=o.children(".modal-resolvecase");f.on("hidden.bs.modal.entityform",function(){f.find(".resolution-input").val("");f.find(".resolution-description-input").val("")});o.find(".resolve-case-link").on("click",function(o){o.preventDefault();var c=s.find("[id$='_EntityID']").val(),h=f.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var a,v,y,p,w;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};v={};v.LogicalName=e.EntityName;v.Id=c;a.entityReference=v;y=f.find(".resolution-input");a.resolutionSubject=y.val();p=f.find(".resolution-description-input");a.resolutionDescription=p.val();w=JSON.stringify(a);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:w}).done(function(){f.modal("hide");t(e.ResolveCaseActionLink.SuccessMessage);r(e.ResolveCaseActionLink)}).fail(function(n){f.modal("hide");i(u(n),s)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});f.modal()});return!0};f.prototype.addReopenCaseActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.ReopenCaseActionLink==null||!f.ReopenCaseActionLink.Enabled||!f.ReopenCaseActionLink.URL||a=="0")return h=o.find(".reopen-case-link"),h.addClass("hidden"),h.hide(),!1;if(f.ReopenCaseActionLink.ShowModal==1){s=o.children(".modal-reopencase");o.find(".reopen-case-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.ReopenCaseActionLink.SuccessMessage);r(f.ReopenCaseActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".reopen-case-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.ReopenCaseActionLink.SuccessMessage);r(f.ReopenCaseActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addCancelCaseActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.CancelCaseActionLink==null||!f.CancelCaseActionLink.Enabled||!f.CancelCaseActionLink.URL||a!="0")return h=o.find(".cancel-case-link"),h.addClass("hidden"),h.hide(),!1;if(f.CancelCaseActionLink.ShowModal==1){s=o.children(".modal-cancelcase");o.find(".cancel-case-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.CancelCaseActionLink.SuccessMessage);r(f.CancelCaseActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".cancel-case-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.CancelCaseActionLink.SuccessMessage);r(f.CancelCaseActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addActivateActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.ActivateActionLink==null||!f.ActivateActionLink.Enabled||!f.ActivateActionLink.URL||a=="0")return h=o.find(".activate-link"),h.addClass("hidden"),h.hide(),!1;if(f.ActivateActionLink.ShowModal==1){s=o.children(".modal-activate");o.find(".activate-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.ActivateActionLink.SuccessMessage);r(f.ActivateActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".activate-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.ActivateActionLink.SuccessMessage);r(f.ActivateActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addDeactivateActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.DeactivateActionLink==null||!f.DeactivateActionLink.Enabled||!f.DeactivateActionLink.URL||a=="1")return h=o.find(".deactivate-link"),h.addClass("hidden"),h.hide(),!1;if(f.DeactivateActionLink.ShowModal==1){s=o.children(".modal-deactivate");o.find(".deactivate-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.DeactivateActionLink.SuccessMessage);r(f.DeactivateActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".deactivate-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.DeactivateActionLink.SuccessMessage);r(f.DeactivateActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addActivateQuoteActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.ActivateQuoteActionLink==null||!f.ActivateQuoteActionLink.Enabled||!f.ActivateQuoteActionLink.URL||a!="0")return h=o.find(".activate-quote-link"),h.addClass("hidden"),h.hide(),!1;if(f.ActivateQuoteActionLink.ShowModal==1){s=o.children(".modal-activate-quote");o.find(".activate-quote-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.ActivateQuoteActionLink.SuccessMessage);r(f.ActivateQuoteActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".activate-quote-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.ActivateQuoteActionLink.SuccessMessage);r(f.ActivateQuoteActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addSetOpportunityOnHoldActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,v,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),v=e.find("[id$='_EntityStatus']").val(),f==null||f==""||f.SetOpportunityOnHoldActionLink==null||!f.SetOpportunityOnHoldActionLink.Enabled||!f.SetOpportunityOnHoldActionLink.URL||a!="0"||v=="2")return h=o.find(".set-opportunity-on-hold-link"),h.addClass("hidden"),h.hide(),!1;if(f.SetOpportunityOnHoldActionLink.ShowModal==1){s=o.children(".modal-set-opportunity-on-hold");o.find(".set-opportunity-on-hold-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.SetOpportunityOnHoldActionLink.SuccessMessage);r(f.SetOpportunityOnHoldActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".set-opportunity-on-hold-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.SetOpportunityOnHoldActionLink.SuccessMessage);r(f.SetOpportunityOnHoldActionLink)}).fail(function(n){i(u(n),e)}).always(function(){})});return!0};f.prototype.addReopenOpportunityActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,v,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),v=e.find("[id$='_EntityStatus']").val(),f==null||f==""||f.ReopenOpportunityActionLink==null||!f.ReopenOpportunityActionLink.Enabled||!f.ReopenOpportunityActionLink.URL||a=="0")return h=o.find(".reopen-opportunity-link"),h.addClass("hidden"),h.hide(),!1;if(f.ReopenOpportunityActionLink.ShowModal==1){s=o.children(".modal-reopen-opportunity");o.find(".reopen-opportunity-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.ReopenOpportunityActionLink.SuccessMessage);r(f.ReopenOpportunityActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".reopen-opportunity-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.ReopenOpportunityActionLink.SuccessMessage);r(f.ReopenOpportunityActionLink)}).fail(function(n){i(u(n),e)}).always(function(){})});return!0};f.prototype.addWinOpportunityActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.WinOpportunityActionLink==null||!f.WinOpportunityActionLink.Enabled||!f.WinOpportunityActionLink.URL||a!="0")return h=o.find(".win-opportunity-link"),h.addClass("hidden"),h.hide(),!1;if(f.WinOpportunityActionLink.ShowModal==1){s=o.children(".modal-win-opportunity");o.find(".win-opportunity-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.WinOpportunityActionLink.SuccessMessage);r(f.WinOpportunityActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".win-opportunity-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.WinOpportunityActionLink.SuccessMessage);r(f.WinOpportunityActionLink)}).fail(function(n){i(u(n),e)}).always(function(){})});return!0};f.prototype.addLoseOpportunityActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.LoseOpportunityActionLink==null||!f.LoseOpportunityActionLink.Enabled||!f.LoseOpportunityActionLink.URL||a!="0")return h=o.find(".lose-opportunity-link"),h.addClass("hidden"),h.hide(),!1;if(f.LoseOpportunityActionLink.ShowModal==1){s=o.children(".modal-lose-opportunity");o.find(".lose-opportunity-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.LoseOpportunityActionLink.SuccessMessage);r(f.LoseOpportunityActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".lose-opportunity-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.LoseOpportunityActionLink.SuccessMessage);r(f.LoseOpportunityActionLink)}).fail(function(n){i(u(n),e)}).always(function(){})});return!0};f.prototype.addGenerateQuoteFromOpportunityActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,e=o.closest(".entity-form"),l,a,h,s;if(e.length<1&&(l=o.closest(".crmEntityFormView"),e=l.find(".entity-form")),a=e.find("[id$='_EntityState']").val(),f==null||f==""||f.GenerateQuoteFromOpportunityActionLink==null||!f.GenerateQuoteFromOpportunityActionLink.Enabled||!f.GenerateQuoteFromOpportunityActionLink.URL||a!="0")return h=o.find(".generate-quote-from-opportunity-link"),h.addClass("hidden"),h.hide(),!1;if(f.GenerateQuoteFromOpportunityActionLink.ShowModal==1){s=o.children(".modal-generate-quote-from-opportunity");o.find(".generate-quote-from-opportunity-link").on("click",function(o){o.preventDefault();var c=e.find("[id$='_EntityID']").val(),h=s.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var v,a,y;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");v={};a={};a.LogicalName=f.EntityName;a.Id=c;v.entityReference=a;y=JSON.stringify(v);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:y}).done(function(){s.modal("hide");t(f.GenerateQuoteFromOpportunityActionLink.SuccessMessage);r(f.GenerateQuoteFromOpportunityActionLink)}).fail(function(n){s.modal("hide");i(u(n),e)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal()})}else o.find(".generate-quote-from-opportunity-link").on("click",function(o){var c;o.preventDefault();var l=e.find("[id$='_EntityID']").val(),a=n(this).data("url"),h={},s={};s.LogicalName=f.EntityName;s.Id=l;h.entityReference=s;c=JSON.stringify(h);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:a,data:c}).done(function(){t(f.GenerateQuoteFromOpportunityActionLink.SuccessMessage);r(f.GenerateQuoteFromOpportunityActionLink)}).fail(function(n){i(u(n),e)})});return!0};f.prototype.addUpdatePipelinePhaseActionLinkClickEventHandlers=function(){var c=this,o=c._element,f=c._layout,s=o.closest(".entity-form"),l,a,h,e;if(s.length<1&&(l=o.closest(".crmEntityFormView"),s=l.find(".entity-form")),a=s.find("[id$='_EntityState']").val(),f==null||f==""||f.UpdatePipelinePhaseActionLink==null||!f.UpdatePipelinePhaseActionLink.Enabled||!f.UpdatePipelinePhaseActionLink.URL||a!="0")return h=o.find(".update-pipeline-phase-link"),h.addClass("hidden"),h.hide(),!1;e=o.children(".modal-updatepipelinephase");o.find(".update-pipeline-phase-link").on("click",function(o){o.preventDefault();var c=s.find("[id$='_EntityID']").val(),h=e.find("button.primary"),l=n(this).data("url");h.off("click");h.on("click",function(o){var a,v,y,p,w,b;o.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");a={};v={};v.LogicalName=f.EntityName;v.Id=c;a.entityReference=v;y=e.find(".pipelinephase-input");a.salesStage=y.val();p=y.find("option:selected");a.stepName=p.text();w=e.find(".resolution-description-input");a.description=w.val();b=JSON.stringify(a);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:b}).done(function(){e.modal("hide");t(f.UpdatePipelinePhaseActionLink.SuccessMessage);r(f.UpdatePipelinePhaseActionLink)}).fail(function(n){e.modal("hide");i(u(n),s)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});e.modal()});return!0}}(jQuery),function(n){function f(t){this._element=n(t);this._layouts=this._element.data("view-layouts");this._gridClass=this._element.data("grid-class");this._serviceUrlForGet=this._element.data("get-url");this._deferLoading=this._element.data("defer-loading");this._enableActions=this._element.data("enable-actions");this._selectMode=this._element.data("select-mode");this._columnWidthStyle=this._element.data("column-width-style");this._applyRelatedRecordFilter=this._element.data("apply-related-record-filter");this._filterRelationshipName=this._element.data("filter-relationship-name");this._filterEntityName=this._element.data("filter-entity-name");this._filterAttributeName=this._element.data("filter-attribute-name");this._allowFilterOff=this._element.data("allow-filter-off");this._toggleFilterText=this._element.data("toggle-filter-text");this._userIsAuthenticated=this._element.data("user-isauthenticated");this._userParentAccountName=this._element.data("user-parent-account-name");this._metaFilter=null;var i=this;n(t).on("refresh",function(){i.load()});n(t).on("metafilter",function(n,t){i._metaFilter=t;i.load()})}function t(t){var u,i,r,f;typeof t!=typeof undefined&&t!==!1&&t!=null&&(console.log(t),u=typeof t.InnerError!=typeof undefined&&t.InnerError!==!1&&t.InnerError!=null?t.InnerError.Message:t.Message,i=n(".notifications"),i.length==0&&(r=n(".page-heading"),i=r.length==0?n("<div class='notifications'><\/div>").prependTo(n("#content-container")):n("<div class='notifications'><\/div>").appendTo(r)),i.find(".notification").slideUp().remove(),f=n("<div class='notification alert alert-danger error alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;<\/span><\/button><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+u+"<\/div>").on("closed.bs.alert",function(){i.find(".notification").length==0&&i.hide()}).prependTo(i),i.show(),n("html, body").animate({scrollTop:f.offset().top-20},200))}function i(t,i,r){var u=n(".notifications"),f,e;u.length==0&&(f=n(".page-heading"),u=f.length==0?n("<div class='notifications'><\/div>").prependTo(n("#content-container")):n("<div class='notifications'><\/div>").appendTo(f));u.find(".notification").slideUp().remove();typeof t!=typeof undefined&&t!==!1&&t!=null&&t!=""&&(e=n("<div class='notification alert alert-success success alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;<\/span><\/button>"+t+"<\/div>").on("closed.bs.alert",function(){u.find(".notification").length==0&&u.hide()}).prependTo(u),u.show(),n("html, body").animate({scrollTop:e.offset().top-20},200),r&&setTimeout(function(){e.slideUp(100).remove();u.find(".notification").length==0&&u.hide()},5e3))}function y(n){var o=[],s,f,e,t,i,r,u,h;if(n==null||(s=/(\w+)\s*(asc|ascending|desc|descending)?\s*(,)?/gi,f=n.match(s),f==null))return o;for(e=0;e<f.length;e++)t=f[e],t!=null&&t!=""&&(r="ASC",u=t.indexOf(" "),u!=-1?(i=t.substr(0,u),r=t.substr(u+1,t.length-u)):i=t,i!=null&&(i=i.replace(/,\s*$/,"")),r!=null&&(r=r.replace(/,\s*$/,"")),h={name:i,direction:r},o.push(h));return o}function s(t,i,r){var u=-1;return n.each(t,function(n,t){t[i].toString().toLowerCase().indexOf(r.toString().toLowerCase())!=-1&&(u=n)}),u}function e(n){return!n||!n.URL?null:v(n.URL)}function o(n){return!n||!n.RedirectUrl?null:v(n.RedirectUrl)}function v(n){return n?n.Host==window.location.hostname?URI(n.PathWithQueryString):URI(n.Uri):null}function r(n,t){var i;if(typeof t==typeof undefined||t==null){n.trigger("refresh");return}var r=typeof t.OnComplete!=typeof undefined&&t.OnComplete!=null&&t.OnComplete!=0;r?(i=w(t),i!=null&&i!=""?p(i):n.trigger("refresh")):n.trigger("refresh")}function p(t){typeof t!="undefined"&&t!=null&&t!=""&&(n.blockUI({css:{border:"none",backgroundColor:"transparent",opacity:.5,color:"#fff"},message:"<span class='fa fa-2x fa-spinner fa-pulse' aria-hidden='true'><\/span>"}),parent?parent.location.replace(t):window.location.replace(t))}function w(n){return!n||!n.RedirectUrl?null:n.RedirectUrl.Host==window.location.hostname?URI(n.RedirectUrl.PathWithQueryString):URI(n.RedirectUrl.Uri)}function a(){try{return window.self!==window.top}catch(n){return!0}}function u(t){var i={Message:"An unknown error has occurred."},r;if(t==null)return i;try{r=t.getResponseHeader("content-type");i=r!=null?r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}}:{Message:t.statusText}}catch(u){i={Message:u.message}}return i}var h=0,c=1,l=2;n(document).ready(function(){n(".entity-grid").each(function(){new f(n(this)).render()});n(".entitylist").on("click.entitylist",".entitylist-filter-option-breaker a",function(t){t.preventDefault();t.stopPropagation();var i=n(this).data("collapsed"),r=n(this).closest("ul"),u=r.data("pagesize");r.children("li.entitylist-filter-option").each(function(t){t>=u&&(i?n(this).attr("aria-hidden","false"):n(this).attr("aria-hidden","true"))});n(this).find(".fa").toggleClass("fa-caret-down",i).toggleClass("fa-caret-up",!i);n(this).find(".expand-label").text(i?"Less":"More");n(this).data("collapsed",!i)})});f.prototype.render=function(i){var u=this,f=u._element,g=u._layouts,ui=u._gridClass,k=f.data("selected-view"),fi=u._deferLoading,it=u._enableActions,ei=u._allowFilterOff,rt=u._toggleFilterText,lt=u._selectMode,at=u._columnWidthStyle,oi=u._userIsAuthenticated,ut=u._userParentAccountName,w=0,yt,ft,o,v,et,nt,st,tt,ht,bt,kt,dt,d,ct,p;typeof k!=typeof undefined&&k!==!1&&k!=null&&k!=""&&(w=s(g,"Id",k),w==-1&&(w=0));this._activeLayoutIndex=w;var r=g[w],si=URI(window.location).search(!0),vt=a();if(u._metaFilter=si[r.Configuration.FilterSettings.FilterQueryStringParameterName||"mf"]||null,yt=oi&&ut&&ut!=""&&r.Configuration.FilterPortalUserAttributeName!=null&&r.Configuration.FilterPortalUserAttributeName!=""&&r.Configuration.FilterAccountAttributeName!=null&&r.Configuration.FilterAccountAttributeName!="",ft=f.children(".view-grid"),ft.empty(),f.children(".view-toolbar").remove(),o=n("<div><\/div>").addClass("view-toolbar").addClass("grid-actions").addClass("clearfix"),v=!1,ei&&(et=n("<a><\/a>").attr("href","#").addClass("toggle-related-filter").data("placement","bottom").data("toggle","tooltip").addClass("btn btn-default").addClass("active").html("<span class='fa fa-filter' aria-hidden='true'><\/span>").on("click",function(t){t.preventDefault();n(this).toggleClass("active");u.load(0,f.children(".view-toolbar").find(".view-filter-select").data("filter"),!n(this).hasClass("active"))}),rt&&rt!=""&&et.attr("title",rt).tooltip(),et.prependTo(o),v=!0),nt=r.Configuration.Search,nt.Enabled){var hi=n("<div><\/div>").addClass("input-group").addClass("pull-right").addClass("view-search").addClass("entitylist-search"),pt=n("<button><\/button>").attr("type","button").addClass("btn").addClass("btn-default").append(n("<span><\/span>").addClass("sr-only").html("Search Results")).append(n("<span><\/span>").addClass("fa").addClass("fa-search")).on("click",function(n){n.preventDefault();u.load(1)}),ci=n("<div><\/div>").addClass("input-group-btn").append(pt),ot=n("<input/>").attr("placeholder",nt.PlaceholderText).data("toggle","tooltip").attr("title",nt.TooltipText).tooltip().addClass("query").addClass("form-control").val("").on("keypress",function(t){var i=t.keyCode?t.keyCode:t.which;i=="13"&&(t.preventDefault(),pt.trigger("click"),n(this).trigger("focus"))});hi.append(ot).append(ci).prependTo(o);v=!0}it&&window.addEventListener("message",function(n){var t=null;(t=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),n.origin==t)&&n.data=="Success"&&(f.children(".modal-form").modal("hide"),f.trigger("refresh"))});f.children(".modal-form-details").on("hidden.bs.modal.entitygrid",function(){var t=n(this).find("iframe");t.attr("src","")});f.children(".modal-form-edit").on("hidden.bs.modal.entitygrid",function(){var t=n(this).find("iframe");t.attr("src","")});if(it&&r.Configuration.InsertActionLink.Enabled&&r.Configuration.InsertActionLink.URL&&(st=n("<a><\/a>").attr("href",e(r.Configuration.InsertActionLink)).addClass("btn").addClass("btn-primary").addClass("pull-right").addClass("action").html(r.Configuration.InsertActionLink.Label).attr("title",r.Configuration.InsertActionLink.Tooltip),vt&&st.attr("target","_top"),st.prependTo(o),v=!0),it&&n.each(r.Configuration.ViewActionLinks,function(i,s){var rt,p,a,k,d,w;if(s.Enabled)switch(s.Type){case 3:var y="#",g=f.data("ref-entity"),nt=f.data("ref-id"),tt=f.data("ref-rel"),it=f.data("ref-rel-role"),b="";if(g&&nt&&tt&&(b+="refentity="+g+"&refid="+nt+"&refrel="+tt,it&&(b+="&refrelrole="+it)),(s.Target==c||s.Target==l&&s.URL!=null)&&(y=URI(e(s)).toString(),rt=y.indexOf("?")>=0?"&":"?",y+=rt+b),p=n("<a><\/a>").attr("href",y).addClass("btn").addClass("btn-primary").addClass("pull-right").addClass("action").html(s.Label).attr("title",s.Tooltip),y!="#"&&vt&&p.attr("target","_top"),s.Target==h&&s.EntityForm){a=f.children(".modal-form-insert");a.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){var t=n(this).find("iframe");t.attr("src","");p.trigger("focus")});p.on("click",function(n){n.preventDefault();var t=a.find("iframe"),u=t.data("page"),f=s.EntityForm.Id.toString(),i=u+"?entityformid="+f+"&languagecode="+r.Configuration.LanguageCode;i+="&"+b;t.attr("src",i);t.on("load",function(){a.find(".form-loading").hide();a.find("iframe").contents().find("#EntityFormControl").show()});a.find(".form-loading").show();a.find("iframe").contents().find("#EntityFormControl").hide();a.modal()})}p.prependTo(o);v=!0;break;case 5:k=n("<a><\/a>").attr("href","#").addClass("btn").addClass("btn-info").addClass("pull-right").addClass("action").html(s.Label).attr("title",s.Tooltip);d=f.find(".associate-lookup .modal-associate");d.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){k.trigger("focus")});k.on("click",function(n){n.preventDefault();d.modal()});k.prependTo(o);v=!0;break;case 8:w=n("<a><\/a>").attr("href","#").addClass("entitylist-download").addClass("btn").addClass("btn-info").addClass("pull-right").addClass("action").attr("title",s.Tooltip).html(s.Label);w.on("click",function(i){var e,o;i.preventDefault();w.attr("disabled","disabled");e={};e.viewName=r.ViewName;e.columns=r.Columns;e.base64SecureConfiguration=r.Base64SecureConfiguration;e.sortExpression=f.find(".view-grid > table").data("sort-expression")||r.SortExpression;e.search=ot?ot.val():null;e.filter=u.getCurrentFilter();e.metaFilter=u._metaFilter;e.page=f.children(".view-pagination").data("current-page");e.pageSize=f.children(".view-pagination").data("pagesize");o=JSON.stringify(e);shell.ajaxSafePost({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:s.URL.Path,data:o,global:!1,success:function(n){n.success&&(window.location=s.URL.Path+"?key="+n.sessionKey)}}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,f)}).always(function(){w.removeAttr("disabled","disabled")})});w.prependTo(o);v=!0}}),yt){var b=n("<ul><\/ul>").addClass("view-filter-select").addClass("nav").addClass("nav-pills").addClass("pull-left").data("filter","user"),wt=n("<li><\/li>").addClass("dropdown"),li=n("<a><\/a>").addClass("dropdown-toggle").attr("data-toggle","dropdown").attr("href","#").append(n("<span><\/span>").addClass("fa").addClass("fa-filter").attr("aria-hidden","true")).append(n("<span><\/span>").addClass("title").html(" "+r.Configuration.FilterByUserOptionLabel)).append(n("<span><\/span>").addClass("caret").attr("aria-hidden","true")).dropdown();wt.append(li);tt=n("<ul><\/ul>").addClass("dropdown-menu");ht=n("<li><\/li>");ht.addClass("active");bt=n("<a><\/a>").attr("href","#").addClass("filter-user").html(r.Configuration.FilterByUserOptionLabel).on("click",function(t){t.preventDefault();b.find("li").removeClass("active");n(this).closest("li").toggleClass("active");b.data("filter","user");u.changeFilter()});ht.append(bt).appendTo(tt);kt=n("<li><\/li>");dt=n("<a><\/a>").attr("href","#").addClass("filter-account").html(ut).on("click",function(t){t.preventDefault();b.find("li").removeClass("active");n(this).closest("li").toggleClass("active");b.data("filter","account");u.changeFilter()});kt.append(dt).appendTo(tt);wt.append(tt).appendTo(b);b.prependTo(o);v=!0}if(g.length>1){d=r.Configuration.ViewDisplayName;(d==null||d=="")&&(d=r.ViewName);var gt=n("<ul><\/ul>").addClass("view-select").addClass("nav").addClass("nav-pills").addClass("pull-left"),ni=n("<li><\/li>").addClass("dropdown"),ai=n("<a><\/a>").addClass("dropdown-toggle").attr("data-toggle","dropdown").attr("href","#").append(n("<span><\/span>").addClass("fa").addClass("fa-list").attr("aria-hidden","true")).append(n("<span><\/span>").addClass("title").html(" "+d)).append(n("<span><\/span>").addClass("caret").attr("aria-hidden","true")).dropdown();ni.append(ai);ct=n("<ul><\/ul>").addClass("dropdown-menu");n.each(g,function(t,i){var f=n("<li><\/li>"),r,e;t==w&&f.addClass("active");r=i.Configuration.ViewDisplayName;(r==null||r=="")&&(r=i.ViewName);e=n("<a><\/a>").attr("href","#").data("id",i.Id).html(r).on("click",function(t){t.preventDefault();var i=n(this).data("id");u.changeView(i)});f.append(e).appendTo(ct)});ni.append(ct).appendTo(gt);gt.prependTo(o);v=!0}if(v&&f.prepend(o),r.Columns.length!=0){p=n("<table><\/table>").attr("aria-live","polite").attr("aria-relevant","additions");p.addClass("table");p.addClass(ui);(lt=="Single"||lt=="Multiple")&&p.addClass("table-hover");at=="Pixels"&&p.attr("style","width:"+r.ColumnsTotalWidth+"px !important; max-width:"+r.ColumnsTotalWidth+"px !important;");p.data("sort-expression",r.SortExpression);var ti=n("<thead><\/thead>"),vi=n("<tbody><\/tbody>"),ii=n("<tr><\/tr>"),ri=y(r.SortExpression);n.each(r.Columns,function(t,i){var r=n("<th><\/th>").data("field",i.LogicalName),u,f,e;at=="Pixels"?r.attr("style","width:"+i.Width+"px;"):r.attr("style","width:"+i.WidthAsPercent+"%;");i.SortDisabled?(r.html(i.Name),r.addClass("sort-disabled")):(r.addClass("sort-enabled").data("sort-name",i.LogicalName),u=n("<a><\/a>").attr("href","#"),f=s(ri,"name",i.LogicalName),f!=-1?(e=ri[f],e.direction.toLowerCase().match("asc")!=-1?(u.append(i.Name+" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-up").attr("aria-hidden","true")).append("<span class='sr-only sort-hint'>. Activate to sort in descending order<\/span>"),r.data("sort-dir","ASC").attr("aria-sort","ascending").addClass("sort").addClass("sort-asc")):(u.append(i.Name+" ").append(n("<span><\/span>").append("Activate to sort in ascending order").addClass("fa").addClass("fa-arrow-down").attr("aria-hidden","true")).append("<span class='sr-only sort-hint'>. Activate to sort in ascending order<\/span>"),r.data("sort-dir","DESC").attr("aria-sort","descending").addClass("sort").addClass("sort-desc"))):u.html(i.Name).append("<span class='sr-only sort-hint'>. Activate to sort in descending order<\/span>"),u.appendTo(r));r.appendTo(ii)});ii.appendTo(ti);ti.appendTo(p);vi.appendTo(p);p.appendTo(ft);u.addSortEventHandlers();fi?i&&u.load():u.load()}};f.prototype.changeView=function(n){var t=this,i=t._element;i.data("selected-view",n);t.render(!0)};f.prototype.changeFilter=function(){var n=this,e=n._element,o=n._layouts,t=e.data("selected-view"),c=e.children(".view-toolbar").find(".view-filter-select"),i=0,f,h;typeof t!=typeof undefined&&t!==!1&&t!=null&&t!=""&&(i=s(o,"Id",t),i==-1&&(i=0));this._activeLayoutIndex=i;var r=o[i],l=n._userIsAuthenticated,u=n._userParentAccountName,a=l&&u&&u!=""&&(r.Configuration.FilterPortalUserAttributeName!=null&&r.Configuration.FilterPortalUserAttributeName!=""||r.Configuration.FilterAccountAttributeName!=null&&r.Configuration.FilterAccountAttributeName!="");a&&(f=n.getCurrentFilter(),h=f=="user"?r.Configuration.FilterByUserOptionLabel:u,c.find("li.dropdown").find("span.title").html(" "+h),n.load(0,f))};f.prototype.getCurrentFilter=function(){var r=this,o=r._element,h=r._layouts,t=o.data("selected-view"),c=o.children(".view-toolbar").find(".view-filter-select"),i=0,f;typeof t!=typeof undefined&&t!==!1&&t!=null&&t!=""&&(i=s(h,"Id",t),i==-1&&(i=0));this._activeLayoutIndex=i;var n=h[i],l=r._userIsAuthenticated,u=r._userParentAccountName,e="user";return l?n.Configuration.FilterPortalUserAttributeName==null||n.Configuration.FilterPortalUserAttributeName==""?u&&u!=""&&n.Configuration.FilterAccountAttributeName!=null&&n.Configuration.FilterAccountAttributeName!=""?"account":null:!u||u==""||n.Configuration.FilterAccountAttributeName==null||n.Configuration.FilterAccountAttributeName==""?e:(f=c.data("filter")||e,f=="user"||f=="account")?f:e:null};f.prototype.isRelatedRecordFilterEnabled=function(){var n=this,t=n._element;return t.children(".view-toolbar").find(".toggle-related-filter").length==0?n._applyRelatedRecordFilter||!1:t.children(".view-toolbar").find(".toggle-related-filter").hasClass("active")};f.prototype.load=function(t,i,r,u){var f=this,v=f._element,tt=v.children(".view-grid").find("table"),y=n("<tbody><\/tbody>"),it=v.children(".view-error"),rt=v.children(".view-empty"),at=v.children(".view-access-denied"),vt=v.children(".view-loading"),ut=v.children(".view-pagination"),yt=v.children(".view-toolbar").find(".entitylist-search input.query"),pt=tt.data("sort-expression"),wt=f._serviceUrlForGet,bt=f._layouts,p=bt[f._activeLayoutIndex],ft=p.Configuration,w=f._selectMode,kt=f._enableActions,et,dt=f._filterRelationshipName,ot=f._filterEntityName,g=f._filterAttributeName,st=null,ht=v.closest(".entity-form").children("input[type='hidden'][id$='EntityName']").val(),ct=v.closest(".entity-form").children("input[type='hidden'][id$='EntityID']").val(),gt=f._metaFilter,b,k,d,lt,nt;v.children(".view-grid").find("tbody").remove();it.hide().prop("aria-hidden",!0);rt.hide().prop("aria-hidden",!0);at.hide().prop("aria-hidden",!0);vt.show().prop("aria-hidden",!1);ut.data("pagesize",ft.PageSize);b=ut.data("current-page");(b==null||b=="")&&(b=1);i=i||f.getCurrentFilter();t=t||b;k=ut.data("pagesize");(k==null||k=="")&&(k=10);d=yt.val();(typeof d==typeof undefined||d===!1)&&(d=null);et=typeof r==typeof undefined?f.isRelatedRecordFilterEnabled():!r;et&&(ot&&ht&&ht!=""&&ot==ht&&ct&&ct!=""?st=ct:g&&g!=""&&(lt=n("#"+g),lt.length>0&&(nt=lt.val(),nt&&nt!=""&&(st=nt))));f.hidePagination();f.getData(wt,ft,p.Base64SecureConfiguration,pt,i,gt,d,t,k,et,dt,ot,g,st,function(t){var d,gt,et,g,nt,it,yt,ot,k,ii,pt,wt,ut,b,bt,dt,st,i,ht,ri,ct,lt,ui,vt;if(y.empty(),typeof t==typeof undefined||t===!1||t==null){rt.fadeIn().prop("aria-hidden",!1);v.trigger("loaded");return}if(typeof t.Records!=typeof undefined&&t.Records!==!1&&(t.Records==null||t.Records.length==0)){rt.fadeIn().prop("aria-hidden",!1);v.trigger("loaded");return}if(typeof t.AccessDenied!=typeof undefined&&t.AccessDenied!==!1&&t.AccessDenied){at.fadeIn().prop("aria-hidden",!1);v.trigger("loaded");return}for(d=n.map(tt.find("th"),function(t){return n(t).data("field")}),gt=d.length==0?"":d[0]=="col-select"?d[1]:d[0],v.data("total-record-count",t.ItemCount),et=0;et<t.Records.length;et++){var r=t.Records[et],ni=s(r.Attributes,"Name",gt),ti="";for(ni!=-1&&(ti=r.Attributes[ni].DisplayValue),g=n("<tr><\/tr>").attr("data-id",r.Id).attr("data-entity",ft.EntityName).attr("data-name",ti).on("focus",function(){n(this).addClass("active")}).on("blur",function(){n(this).removeClass("active")}),nt=n.noop,w=="Multiple"?(nt=function(){var t=n(this).attr("aria-checked")==="true";n(this).children("td:first").find(".fa-fw").toggleClass("fa-check",!t);n(this).toggleClass("selected").toggleClass("info").attr("aria-checked",!t)},g.on("click",nt).on("keypress",function(n){var t=n.keyCode?n.keyCode:n.which;(t=="13"||t=="32")&&(n.preventDefault(),nt.apply(this,arguments))}).attr("tabindex",0).attr("role","checkbox").attr("aria-checked","false")):w=="Single"&&(nt=function(){var t=n(this).attr("aria-checked")==="true",i=tt.find("tr.selected");i.each(function(){n(this).children("td:first").find(".fa-fw").removeClass("fa-check");n(this).removeClass("selected").removeClass("info").attr("aria-checked",!1)});t||(n(this).children("td:first").find(".fa-fw").addClass("fa-check"),n(this).addClass("selected").addClass("info").attr("aria-checked",!0))},g.on("click",nt).on("keypress",function(n){var t=n.keyCode?n.keyCode:n.which;(t=="13"||t=="32")&&(n.preventDefault(),nt.apply(this,arguments))}).attr("tabindex",0).attr("role","radio").attr("aria-checked","false")),it=0;it<d.length;it++){for(yt=!1,ot=0;ot<r.Attributes.length;ot++)if(k=r.Attributes[ot],k.Name==d[it]){ii=f.formatAttributeValue(k,k.AttributeMetadata,it,r)||k.DisplayValue;pt=n("<td><\/td>").attr("data-type",k.Type).attr("data-attribute",k.Name).attr("data-value",typeof k.Value=="object"?JSON.stringify(k.Value):k.Value).html(ii);k.AttributeMetadata&&pt.data("attribute-metadata",k.AttributeMetadata);g.append(pt);yt=!0;break}if(!yt)if(d[it]=="col-action"){wt=n("<td><\/td>");ut=n("<div class='dropdown action'><\/div>");n("<a class='btn btn-default btn-xs'><span class='fa fa-chevron-circle-down' aria-hidden='true'><\/span><\/a>").attr("href","#").attr("data-toggle","dropdown").appendTo(ut);b=n("<ul class='dropdown-menu' role='menu'><ul>");b.css("position","fixed").appendTo(ut);ut.on("show.bs.dropdown",function(){var t=n(this).get(0).getBoundingClientRect(),i=n(this).find(".dropdown-menu:first"),r=n(window).width(),u=t.left+i.outerWidth()<=r;u?i.css("left",t.left).css("top",t.top+n(this).outerHeight()):i.css("left",t.left+t.width-i.outerWidth()).css("top",t.top+n(this).outerHeight())});if(n(window).scroll(function(){var n=v.find(".dropdown.action.open");n.length!=0&&n.removeClass("open")}),bt=a(),kt&&p.Configuration.ItemActionLinks&&p.Configuration.ItemActionLinks.length>0)for(dt=p.Configuration.ItemActionLinks,st=0;st<dt.length;st++){i=dt[st];switch(i.Type){case 1:i.Enabled&&(ht="#",(i.Target==c||i.Target==l)&&i.URL!=null&&(ht=URI(e(i)).addSearch(i.QueryStringIdParameterName,r.Id.toString())),ri=n("<li role='presentation'><\/li>"),ct=n("<a class='details-link' role='menuitem' tabindex='-1'><\/a>").attr("href",ht).attr("title",i.Tooltip).html(i.Label),ht!="#"&&bt&&ct.attr("target","_top"),i.Target==h&&i.EntityForm&&ct.addClass("launch-modal").attr("data-entityformid",i.EntityForm.Id),ri.append(ct).appendTo(b));break;case 2:i.Enabled&&r.CanWrite&&(lt="#",(i.Target==c||i.Target==l)&&i.URL!=null&&(lt=URI(e(i)).addSearch(i.QueryStringIdParameterName,r.Id.toString())),ui=n("<li role='presentation'><\/li>"),vt=n("<a class='edit-link' role='menuitem' tabindex='-1'><\/a>").attr("href",lt).attr("title",i.Tooltip).html(i.Label),lt!="#"&&bt&&vt.attr("target","_top"),i.Target==h&&i.EntityForm&&vt.addClass("launch-modal").attr("data-entityformid",i.EntityForm.Id),ui.append(vt).appendTo(b));break;case 4:i.Enabled&&r.CanDelete&&n("<li role='presentation'><\/li>").append(n("<a class='delete-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 6:i.Enabled&&r.CanAppend&&n("<li role='presentation'><\/li>").append(n("<a class='disassociate-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 7:i.URL&&n("<li role='presentation'><\/li>").append(n("<a class='workflow-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).attr("data-workflowid",i.Workflow.Id).attr("data-url",e(i)).html(i.Label)).appendTo(b);break;case 9:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='close-case-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("data-resolution",i.DefaultResolution).attr("data-description",i.DefaultResolutionDescription).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 10:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='qualify-lead-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 11:i.Enabled&&r.CanWrite&&r.StateCode=="1"&&n("<li role='presentation'><\/li>").append(n("<a class='convert-quote-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 12:i.Enabled&&r.CanWrite&&r.StateCode!="2"&&n("<li role='presentation'><\/li>").append(n("<a class='convert-order-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 13:i.Enabled&&r.CanWrite&&n("<li role='presentation'><\/li>").append(n("<a class='calculate-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 14:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='resolve-case-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 15:i.Enabled&&r.CanWrite&&r.StateCode!="0"&&n("<li role='presentation'><\/li>").append(n("<a class='reopen-case-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 16:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='cancel-case-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 17:i.Enabled&&r.CanWrite&&r.StateCode!="1"&&n("<li role='presentation'><\/li>").append(n("<a class='deactivate-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 18:i.Enabled&&r.CanWrite&&r.StateCode!="0"&&n("<li role='presentation'><\/li>").append(n("<a class='activate-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 19:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='activate-quote-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 20:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&r.StatusCode!="2"&&n("<li role='presentation'><\/li>").append(n("<a class='set-opportunity-on-hold-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 21:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='win-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 22:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='lose-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 23:i.Enabled&&r.CanWrite&&r.StateCode=="0"&&n("<li role='presentation'><\/li>").append(n("<a class='generate-quote-from-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("data-url",e(i)).attr("data-redirecturl",o(i)).attr("title",i.Tooltip).html(i.Label)).appendTo(b);break;case 25:i.Enabled&&r.CanWrite&&r.StateCode!="0"&&n("<li role='presentation'><\/li>").append(n("<a class='reopen-opportunity-link' role='menuitem' tabindex='-1' href='#'><\/a>").attr("title",i.Tooltip).html(i.Label)).appendTo(b)}}b.children("li").length>0&&(ut.find(".fa").addClass("fa-fw"),wt.append(ut));wt.appendTo(g)}else g.append("<td><\/td>")}(w=="Multiple"||w=="Single")&&g.children("td:first").append("<span class='fa fa-fw'><\/span>");y.append(g)}w==="Single"&&y.attr("role","radiogroup");v.children(".view-grid").children("table").append(y.hide());y.fadeIn();f.initializePagination(t,u);f.addDetailsActionLinkClickEventHandlers();f.addEditActionLinkClickEventHandlers();f.addDeleteActionLinkClickEventHandlers();f.addQualifyLeadActionLinkClickEventHandlers();f.addCloseCaseActionLinkClickEventHandlers();f.addResolveCaseActionLinkClickEventHandlers();f.addReopenCaseActionLinkClickEventHandlers();f.addCancelCaseActionLinkClickEventHandlers();f.addConvertQuoteActionLinkClickEventHandlers();f.addConvertOrderActionLinkClickEventHandlers();f.addCalculateOpportunityActionLinkClickEventHandlers();f.addActivateActionLinkClickEventHandlers();f.addDeactivateActionLinkClickEventHandlers();f.addActivateQuoteActionLinkClickEventHandlers();f.addSetOpportunityOnHoldActionLinkClickEventHandlers();f.addReopenOpportunityActionLinkClickEventHandlers();f.addWinOpportunityActionLinkClickEventHandlers();f.addLoseOpportunityActionLinkClickEventHandlers();f.addGenerateQuoteFromOpportunityActionLinkClickEventHandlers();f.addDisassociateActionLinkClickEventHandlers();f.addWorkflowActionLinkClickEventHandlers();v.trigger("loaded")},function(t,i,r){it.html(n("<div class='alert alert-block alert-danger'><\/div>").html(r));it.show().prop("aria-hidden",!1)},function(){vt.hide().prop("aria-hidden",!0)})};f.prototype.getData=function(t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){var k,d;if(p=n.isFunction(p)?p:function(){},w=n.isFunction(w)?w:function(){},b=n.isFunction(b)?b:function(){},!t||t==""){b.call(this);w.call(this,null,"error","A required service url was not provided.");return}if(!r){b.call(this);w.call(this,null,"error","A required secure ViewConfiguration was not provided.");return}h=h||-1;k={};k.base64SecureConfiguration=r;k.sortExpression=u;k.search=o;k.page=s;k.pageSize=h;k.filter=f;k.metaFilter=e;c&&(k.applyRelatedRecordFilter=c,k.filterRelationshipName=l,k.filterEntityName=a,k.filterAttributeName=v,y&&(k.filterValue=y));d=JSON.stringify(k);shell.ajaxSafePost({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:t,data:d,global:!1}).done(p).fail(w).always(b)};f.prototype.formatAttributeValue=function(t,i,r,u){var l,s,h,v,y,tt,p,w,b;if(!t)return null;var c=this,d=c._element,it=c._layouts,o=it[c._activeLayoutIndex],rt=c._enableActions,k=a(),f,g=r==0&&rt&&o.Configuration.DetailsActionLink.Enabled;switch(t.Type){case"System.DateTime":if(l=window.moment,l){var nt=dateFormatConverter.convert(d.closest("[data-dateformat]").data("dateformat")||"M/d/yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),ut=dateFormatConverter.convert(d.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),ft=nt+" "+ut;f=t.FormattedValue.indexOf(":")!=-1?n("<time><\/time>").attr("datetime",t.DisplayValue).text(l(t.Value).format(ft)):n("<time><\/time>").attr("datetime",t.DisplayValue).addClass("date-only").text(l(t.Value).format(nt))}else f=n("<time><\/time>").attr("datetime",t.DisplayValue).text(t.DisplayValue);break;case"System.String":g||typeof i==typeof undefined||i==null||typeof i.Format==typeof undefined?f=t.DisplayValue:i.Format==0?(s=t.DisplayValue,s&&s!=""&&(s.toLowerCase().startsWith("mailto")||(s="mailto:"+s)),f=n("<a><\/a>").attr("href",s).text(t.DisplayValue)):i.Format==3?(h=t.DisplayValue,h&&h!=""&&(h.toLowerCase().startsWith("http")||(h="http://"+h)),v=n("<a><\/a>"),v.attr("href",h).text(t.DisplayValue),k&&v.attr("target","_top"),f=v):i.Format==4&&(y=t.DisplayValue,y&&y!=""&&(tt="http://go.microsoft.com/fwlink?linkid=8506&Symbol="+encodeURIComponent(y.toUpperCase()),p=n("<a><\/a>"),p.attr("href",tt).text(t.DisplayValue),k&&p.attr("target","_top"),f=p));break;default:f=t.DisplayValue}return g&&(w="#",o.Configuration.DetailsActionLink.EntityForm||o.Configuration.DetailsActionLink.URL==null||(w=URI(e(o.Configuration.DetailsActionLink)).addSearch(o.Configuration.DetailsActionLink.QueryStringIdParameterName,u.Id.toString())),b=n("<a><\/a>").attr("href",w).addClass("details-link").addClass("has-tooltip").attr("data-toggle","tooltip").attr("title",o.Configuration.DetailsActionLink.Tooltip).html(f),w!="#"&&k&&b.attr("target","_top"),o.Configuration.DetailsActionLink.EntityForm&&b.addClass("launch-modal").attr("data-entityformid",o.Configuration.DetailsActionLink.EntityForm.Id),f=b),f};f.prototype.addSortEventHandlers=function(){var i=this,r=i._element,t=r.children(".view-grid").find("table");t.find("th.sort-enabled a").on("click",function(r){var u,f,e,o;(r.preventDefault(),u=n(this).closest("th"),n(this).find(".fa-arrow-down").remove(),n(this).find(".fa-arrow-up").remove(),n(this).find(".sort-hint").remove(),f=u.data("sort-name"),e=u.data("sort-dir"),typeof f!=typeof undefined&&f!==!1&&f!==null&&f!=="")&&((typeof e==typeof undefined||e===!1)&&(e=""),e=="ASC"?(o=f+" DESC",u.data("sort-dir","DESC").removeClass("sort-asc").addClass("sort-desc"),u.attr("aria-sort","descending"),n(this).append(" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-down")).append("<span class='sr-only sort-hint'>. Activate to sort in ascending order<\/span>")):(o=f+" ASC",u.data("sort-dir","ASC").removeClass("sort-desc").addClass("sort-asc"),u.attr("aria-sort","ascending"),n(this).append(" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-up")).append("<span class='sr-only sort-hint'>. Activate to sort in descending order<\/span>")),u.addClass("sort"),t.data("sort-expression",o),t.find("th.sort a").each(function(){var i=n(this).closest("th"),t=i.data("sort-name");typeof t!=typeof undefined&&t!==!1&&t!==null&&t!==""&&t!=f&&(n(this).find(".fa-arrow-down").remove(),n(this).find(".fa-arrow-up").remove(),i.removeClass("sort-asc").removeClass("sort-desc").removeClass("sort").data("sort-dir","").removeAttr("aria-sort"))}),i.load(1))})};f.prototype.addDetailsActionLinkClickEventHandlers=function(){var t=this,i=t._element,r=t._layouts,u=r[t._activeLayoutIndex],f=t._enableActions,e=i.children(".view-grid").find("table");if(f)e.find(".details-link.launch-modal").on("click",function(t){var o;t.preventDefault();var s=n(this),h=n(this).closest("tr"),c=h.data("id"),r=i.children(".modal-form-details"),f=r.find("iframe"),l=f.data("page"),e=n(this).data("entityformid");if(e){o=l+"?id="+c+"&entityformid="+e+"&languagecode="+u.Configuration.LanguageCode;f.attr("src",o);f.on("load",function(){r.find(".form-loading").hide();r.find("iframe").contents().find("#EntityFormControl").show()});r.find(".form-loading").show();r.find("iframe").contents().find("#EntityFormControl").hide();r.modal();r.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){s.closest(".action").children("a").trigger("focus")})}})};f.prototype.addEditActionLinkClickEventHandlers=function(){var t=this,i=t._element,r=t._layouts,u=r[t._activeLayoutIndex],f=t._enableActions,e=i.children(".view-grid").find("table");if(f)e.find(".edit-link.launch-modal").on("click",function(t){var o;t.preventDefault();var s=n(this),h=n(this).closest("tr"),c=h.data("id"),r=i.children(".modal-form-edit"),f=r.find("iframe"),l=f.data("page"),e=n(this).data("entityformid");if(e){o=l+"?id="+c+"&entityformid="+e+"&languagecode="+u.Configuration.LanguageCode;f.attr("src",o);f.on("load",function(){r.find(".form-loading").hide();r.find("iframe").contents().find("#EntityFormControl").show()});r.find(".form-loading").show();r.find("iframe").contents().find("#EntityFormControl").hide();r.modal();r.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){s.closest(".action").children("a").trigger("focus")})}})};f.prototype.addDeleteActionLinkClickEventHandlers=function(){var s=this,f=s._element,c=s._layouts,o=c[s._activeLayoutIndex],l=s._enableActions,a=f.children(".view-grid").find("table"),h;if(l&&(o.Configuration.DeleteActionLink.Enabled||o.Configuration.DeleteActionLink.URL)){h=e(o.Configuration.DeleteActionLink);a.find(".delete-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=f.children(".modal-delete"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=o.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){var u=f.children(".view-grid").find("tbody tr").length,t,n;u==1&&(t=f.children(".view-pagination"),n=t.data("current-page"),n>1&&(n--,t.data("current-page",n)));s.modal("hide");i(o.Configuration.DeleteActionLink.SuccessMessage,f,!0);r(f,o.Configuration.DeleteActionLink)}).fail(function(n){s.modal("hide");t(u(n),f)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})})}};f.prototype.addQualifyLeadActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.QualifyLeadActionLink.Enabled||f.Configuration.QualifyLeadActionLink.URL))if(h=e(f.Configuration.QualifyLeadActionLink),f.Configuration.QualifyLeadActionLink.ShowModal==1)c.find(".qualify-lead-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-qualify"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a,y;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.createAccount=!0;l.createContact=!0;l.createOpportunity=!0;a={};a.LogicalName=f.Configuration.EntityName;a.Id=v;l.entityReference=a;y=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:y}).done(function(){s.modal("hide");i(f.Configuration.QualifyLeadActionLink.SuccessMessage,o,!0);r(o,f.Configuration.QualifyLeadActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".qualify-lead-link").on("click",function(e){var c,l;e.preventDefault();var a=n(this).closest("tr"),v=a.data("id"),s={};s.createAccount=!0;s.createContact=!0;s.createOpportunity=!0;c={};c.LogicalName=f.Configuration.EntityName;c.Id=v;s.entityReference=c;l=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:l}).done(function(){i(f.Configuration.QualifyLeadActionLink.SuccessMessage,o,!0);r(o,f.Configuration.QualifyLeadActionLink)}).fail(function(n){t(u(n),o)}).always(function(){})})};f.prototype.addCloseCaseActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.CloseIncidentActionLink.Enabled||f.Configuration.CloseIncidentActionLink.URL))if(h=e(f.Configuration.CloseIncidentActionLink),f.Configuration.CloseIncidentActionLink.ShowModal==1)c.find(".close-case-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-closecase"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a,y,p,w;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};a={};a.LogicalName=f.Configuration.EntityName;a.Id=v;l.entityReference=a;y=f.Configuration.CloseIncidentActionLink.DefaultResolution;p=f.Configuration.CloseIncidentActionLink.DefaultResolutionDescription;l.resolutionSubject=y;l.resolutionDescription=p;w=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:w}).done(function(){s.modal("hide");i(f.Configuration.CloseIncidentActionLink.SuccessMessage,o,!0);r(o,f.Configuration.CloseIncidentActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".close-case-link").on("click",function(e){var l,a,v;e.preventDefault();var w=n(this),y=n(this).closest("tr"),p=y.data("id"),s={},c={};c.LogicalName=f.Configuration.EntityName;c.Id=p;s.entityReference=c;l=f.Configuration.CloseIncidentActionLink.DefaultResolution;a=f.Configuration.CloseIncidentActionLink.DefaultResolutionDescription;s.resolutionSubject=l;s.resolutionDescription=a;v=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:v}).done(function(){i(f.Configuration.CloseIncidentActionLink.SuccessMessage,o,!0);r(o,f.Configuration.CloseIncidentActionLink)}).fail(function(n){t(u(n),o)}).always(function(){})})};f.prototype.addConvertQuoteActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.ConvertQuoteToOrderActionLink.Enabled||f.Configuration.ConvertQuoteToOrderActionLink.URL))if(h=e(f.Configuration.ConvertQuoteToOrderActionLink),f.Configuration.ConvertQuoteToOrderActionLink.ShowModal==1)c.find(".convert-quote-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-convert-quote"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.ConvertQuoteToOrderActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ConvertQuoteToOrderActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".convert-quote-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.ConvertQuoteToOrderActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ConvertQuoteToOrderActionLink)}).fail(function(n){t(u(n),o)}).always(function(){})})};f.prototype.addConvertOrderActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.ConvertOrderToInvoiceActionLink.Enabled||f.Configuration.ConvertOrderToInvoiceActionLink.URL))if(h=e(f.Configuration.ConvertOrderToInvoiceActionLink),f.Configuration.ConvertOrderToInvoiceActionLink.ShowModal==1)c.find(".convert-order-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-convert-order"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.ConvertOrderToInvoiceActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ConvertOrderToInvoiceActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".convert-order-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.ConvertOrderToInvoiceActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ConvertOrderToInvoiceActionLink)}).fail(function(n){t(u(n),o)}).always(function(){})})};f.prototype.addCalculateOpportunityActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.CalculateOpportunityActionLink.Enabled||f.Configuration.CalculateOpportunityActionLink.URL))if(h=e(f.Configuration.CalculateOpportunityActionLink),f.Configuration.CalculateOpportunityActionLink.ShowModal==1)c.find(".calculate-opportunity-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-calculate"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.CalculateOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.CalculateOpportunityActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".calculate-opportunity-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.CalculateOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.CalculateOpportunityActionLink)}).fail(function(n){t(u(n),o)}).always(function(){})})};f.prototype.addResolveCaseActionLinkClickEventHandlers=function(){var h=this,s=h._element,l=h._layouts,o=l[h._activeLayoutIndex],a=h._enableActions,v=s.children(".view-grid").find("table"),c,f;if(a&&(o.Configuration.ResolveCaseActionLink.Enabled||o.Configuration.ResolveCaseActionLink.URL)){c=e(o.Configuration.ResolveCaseActionLink);f=s.children(".modal-resolvecase");v.find(".resolve-case-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),h=f.find("button.primary");h.off("click");h.on("click",function(e){var l,a,y,p,w;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};a={};a.LogicalName=o.Configuration.EntityName;a.Id=v;l.entityReference=a;y=f.find(".resolution-input");l.resolutionSubject=y.val();p=f.find(".resolution-description-input");l.resolutionDescription=p.val();w=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:c,data:w}).done(function(){f.modal("hide");i(o.Configuration.ResolveCaseActionLink.SuccessMessage,s,!0);r(s,o.Configuration.ResolveCaseActionLink)}).fail(function(n){f.modal("hide");t(u(n),s)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()})});f.modal();f.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){f.find(".resolution-input").val("");f.find(".resolution-description-input").val("");l.closest(".action").children("a").trigger("focus")})})}};f.prototype.addReopenCaseActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.ReopenCaseActionLink.Enabled||f.Configuration.ReopenCaseActionLink.URL))if(h=e(f.Configuration.ReopenCaseActionLink),f.Configuration.ReopenCaseActionLink.ShowModal==1)c.find(".reopen-case-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-reopencase"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.ReopenCaseActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ReopenCaseActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".reopen-case-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.ReopenCaseActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ReopenCaseActionLink)}).fail(function(n){t(u(n),o)}).always(function(){})})};f.prototype.addCancelCaseActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.CancelCaseActionLink.Enabled||f.Configuration.CancelCaseActionLink.URL))if(h=e(f.Configuration.CancelCaseActionLink),f.Configuration.CancelCaseActionLink.ShowModal==1)c.find(".cancel-case-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-cancelcase"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.CancelCaseActionLink.SuccessMessage,o,!0);r(o,f.Configuration.CancelCaseActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".cancel-case-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.CancelCaseActionLink.SuccessMessage,o,!0);r(o,f.Configuration.CancelCaseActionLink)}).fail(function(n){t(u(n),o)}).always(function(){})})};f.prototype.addActivateActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.ActivateActionLink.Enabled||f.Configuration.ActivateActionLink.URL))if(h=e(f.Configuration.ActivateActionLink),f.Configuration.ActivateActionLink.ShowModal==1)c.find(".activate-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-activate"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.ActivateActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ActivateActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".activate-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.ActivateActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ActivateActionLink)}).fail(function(n){t(u(n),o)})})};f.prototype.addDeactivateActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.DeactivateActionLink.Enabled||f.Configuration.DeactivateActionLink.URL))if(h=e(f.Configuration.DeactivateActionLink),f.Configuration.DeactivateActionLink.ShowModal==1)c.find(".deactivate-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-deactivate"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.DeactivateActionLink.SuccessMessage,o,!0);r(o,f.Configuration.DeactivateActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".deactivate-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.DeactivateActionLink.SuccessMessage,o,!0);r(o,f.Configuration.DeactivateActionLink)}).fail(function(n){t(u(n),o)})})};f.prototype.addActivateQuoteActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.ActivateQuoteActionLink.Enabled||f.Configuration.ActivateQuoteActionLink.URL))if(h=e(f.Configuration.ActivateQuoteActionLink),f.Configuration.ActivateQuoteActionLink.ShowModal==1)c.find(".activate-quote-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-activate-quote"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.ActivateQuoteActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ActivateQuoteActionLin)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".activate-quote-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.ActivateQuoteActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ActivateQuoteActionLin)}).fail(function(n){t(u(n),o)})})};f.prototype.addSetOpportunityOnHoldActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.SetOpportunityOnHoldActionLink.Enabled||f.Configuration.SetOpportunityOnHoldActionLink.URL))if(h=e(f.Configuration.SetOpportunityOnHoldActionLink),f.Configuration.SetOpportunityOnHoldActionLink.ShowModal==1)c.find(".set-opportunity-on-hold-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-set-opportunity-on-hold"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.SetOpportunityOnHoldActionLink.SuccessMessage,o,!0);r(o,f.Configuration.SetOpportunityOnHoldActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".set-opportunity-on-hold-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.SetOpportunityOnHoldActionLink.SuccessMessage,o,!0);r(o,f.Configuration.SetOpportunityOnHoldActionLink)}).fail(function(n){t(u(n),o)})})};f.prototype.addReopenOpportunityActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.ReopenOpportunityActionLink.Enabled||f.Configuration.ReopenOpportunityActionLink.URL))if(h=e(f.Configuration.ReopenOpportunityActionLink),f.Configuration.ReopenOpportunityActionLink.ShowModal==1)c.find(".reopen-opportunity-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-reopen-opportunity"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.ReopenOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ReopenOpportunityActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".reopen-opportunity-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.ReopenOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.ReopenOpportunityActionLink)}).fail(function(n){t(u(n),o)})})};f.prototype.addWinOpportunityActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.WinOpportunityActionLink.Enabled||f.Configuration.WinOpportunityActionLink.URL))if(h=e(f.Configuration.WinOpportunityActionLink),f.Configuration.WinOpportunityActionLink.ShowModal==1)c.find(".win-opportunity-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-win-opportunity"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.WinOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.WinOpportunityActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".win-opportunity-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.WinOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.WinOpportunityActionLink)}).fail(function(n){t(u(n),o)})})};f.prototype.addLoseOpportunityActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.LoseOpportunityActionLink.Enabled||f.Configuration.LoseOpportunityActionLink.URL))if(h=e(f.Configuration.LoseOpportunityActionLink),f.Configuration.LoseOpportunityActionLink.ShowModal==1)c.find(".lose-opportunity-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-lose-opportunity"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.LoseOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.LoseOpportunityActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".lose-opportunity-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.LoseOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.LoseOpportunityActionLink)}).fail(function(n){t(u(n),o)})})};f.prototype.addGenerateQuoteFromOpportunityActionLinkClickEventHandlers=function(){var s=this,o=s._element,l=s._layouts,f=l[s._activeLayoutIndex],a=s._enableActions,c=o.children(".view-grid").find("table"),h;if(a&&(f.Configuration.GenerateQuoteFromOpportunityActionLink.Enabled||f.Configuration.GenerateQuoteFromOpportunityActionLink.URL))if(h=e(f.Configuration.GenerateQuoteFromOpportunityActionLink),f.Configuration.GenerateQuoteFromOpportunityActionLink.ShowModal==1)c.find(".generate-quote-from-opportunity-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=o.children(".modal-generate-quote-from-opportunity"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var l,a;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");l={};l.LogicalName=f.Configuration.EntityName;l.Id=v;a=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:a}).done(function(){s.modal("hide");i(f.Configuration.GenerateQuoteFromOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.GenerateQuoteFromOpportunityActionLink)}).fail(function(n){s.modal("hide");t(u(n),o)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".generate-quote-from-opportunity-link").on("click",function(e){var c;e.preventDefault();var l=n(this).closest("tr"),a=l.data("id"),s={};s.LogicalName=f.Configuration.EntityName;s.Id=a;c=JSON.stringify(s);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:c}).done(function(){i(f.Configuration.GenerateQuoteFromOpportunityActionLink.SuccessMessage,o,!0);r(o,f.Configuration.GenerateQuoteFromOpportunityActionLink)}).fail(function(n){t(u(n),o)})})};f.prototype.addDisassociateActionLinkClickEventHandlers=function(){var s=this,f=s._element,l=s._layouts,o=l[s._activeLayoutIndex],a=s._enableActions,c=f.children(".view-grid").find("table"),h;if(a&&o.Configuration.DisassociateActionLink.Enabled&&o.Configuration.DisassociateActionLink.URL)if(h=e(o.Configuration.DisassociateActionLink),o.Configuration.DisassociateActionLink.ShowModal==1)c.find(".disassociate-link").on("click",function(e){e.preventDefault();var l=n(this),a=n(this).closest("tr"),v=a.data("id"),s=f.children(".modal-disassociate"),c=s.find("button.primary");c.off("click");c.on("click",function(e){var g,y,a,p,l,nt;e.preventDefault();n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");var w=f.data("ref-entity"),b=f.data("ref-id"),k=f.data("ref-rel"),d=f.data("ref-rel-role");w&&b&&k&&(g={LogicalName:w,Id:b},y={SchemaName:k},d&&(y.PrimaryEntityRole=d),a={},a.LogicalName=o.Configuration.EntityName,a.Id=v,p=[],p[0]=a,l={},l.target=g,l.RelatedEntities=p,l.Relationship=y,nt=JSON.stringify(l),shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:nt}).done(function(){s.modal("hide");i(o.Configuration.DisassociateActionLink.SuccessMessage,f,!0);r(f,o.Configuration.DisassociateActionLink)}).fail(function(n){s.modal("hide");t(u(n),f)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()}))});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){l.closest(".action").children("a").trigger("focus")})});else c.find(".disassociate-link").on("click",function(e){var b,l,c,a,s,k;e.preventDefault();var nt=n(this),d=n(this).closest("tr"),g=d.data("id"),v=f.data("ref-entity"),y=f.data("ref-id"),p=f.data("ref-rel"),w=f.data("ref-rel-role");v&&y&&p&&(b={LogicalName:v,Id:y},l={SchemaName:p},w&&(l.PrimaryEntityRole=w),c={},c.LogicalName=o.Configuration.EntityName,c.Id=g,a=[],a[0]=c,s={},s.target=b,s.RelatedEntities=a,s.Relationship=l,k=JSON.stringify(s),shell.ajaxSafePost({type:"POST",contentType:"application/json",url:h,data:k}).done(function(){i(o.Configuration.DisassociateActionLink.SuccessMessage,f,!0);r(f,o.Configuration.DisassociateActionLink)}).fail(function(n){t(u(n),f)}))})};f.prototype.addWorkflowActionLinkClickEventHandlers=function(){var s=this,e=s._element,a=s._layouts,f=a[s._activeLayoutIndex],v=s._enableActions,l=e.children(".view-grid").find("table"),h,c,o;if(v&&f.Configuration.ItemActionLinks&&f.Configuration.ItemActionLinks.length!=0){for(h=null,c=0;c<f.Configuration.ItemActionLinks.length;c++)if(o=f.Configuration.ItemActionLinks[c],o!=null&&typeof o.Type!=typeof undefined&&o.Type==7&&typeof o.Workflow!=typeof undefined&&o.Workflow!=null){h=o;break}if(h!=null)if(h.ShowModal==1)l.find(".workflow-link").on("click",function(o){o.preventDefault();var a=n(this),v=n(this).closest("tr"),y=v.data("id"),h=n(this).data("workflowid"),s=e.children(".modal-run-workflow"),c=s.find("button.primary"),l=n(this).data("url");if(h&&l){c.off("click");c.on("click",function(o){var v,p,a,w,b,k,d;for(o.preventDefault(),n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),v=null,p=0;p<f.Configuration.ItemActionLinks.length;p++)if(a=f.Configuration.ItemActionLinks[p],a!=null&&typeof a.Type!=typeof undefined&&a.Type==7&&typeof a.Workflow!=typeof undefined&&a.Workflow!=null&&a.Workflow.Id==h){v=a;break}w={};b={};b.LogicalName="workflow";b.Id=h;w.workflow=b;k={};k.LogicalName=f.Configuration.EntityName;k.Id=y;w.entity=k;d=JSON.stringify(w);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:l,data:d}).done(function(){s.modal("hide");i(v!=null?v.SuccessMessage:null,e,!0);r(e,v)}).fail(function(n){s.modal("hide");t(u(n),e)}).always(function(){c.removeAttr("disabled","disabled").find(".fa-spin").remove()})});s.modal();s.off("hidden.bs.modal.entitygrid").on("hidden.bs.modal.entitygrid",function(){a.closest(".action").children("a").trigger("focus")})}});else l.find(".workflow-link").on("click",function(o){var h,c,s,l,a,v,w;o.preventDefault();var b=n(this).closest("tr"),k=b.data("id"),y=n(this).data("workflowid"),p=n(this).data("url");if(y&&p){for(h=null,c=0;c<f.Configuration.ItemActionLinks.length;c++)if(s=f.Configuration.ItemActionLinks[c],s!=null&&typeof s.Type!=typeof undefined&&s.Type==7&&typeof s.Workflow!=typeof undefined&&s.Workflow!=null&&s.Workflow.Id==y){h=s;break}l={};a={};a.LogicalName="workflow";a.Id=y;l.workflow=a;v={};v.LogicalName=f.Configuration.EntityName;v.Id=k;l.entity=v;w=JSON.stringify(l);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:p,data:w}).done(function(){i(h!=null?h.SuccessMessage:null,e,!0);r(e,h)}).fail(function(n){t(u(n),e)})}})}};f.prototype.initializePagination=function(t,i){var u=this,f=u._element,r=f.children(".view-pagination");if(typeof t==typeof undefined||t===!1||t==null){r.hide();return}if(typeof t.PageSize==typeof undefined||t.PageSize===!1||t.PageSize==null||typeof t.PageCount==typeof undefined||t.PageCount===!1||t.PageCount==null||typeof t.PageNumber==typeof undefined||t.PageNumber===!1||t.PageNumber==null||typeof t.ItemCount==typeof undefined||t.ItemCount===!1||t.ItemCount==null){r.hide();return}if(t.ItemCount===-1){u.initializePager(r,t,i);return}if(t.PageCount<=1){r.hide();return}r.data("pagesize",t.PageSize).data("pages",t.PageCount).data("current-page",t.PageNumber).data("count",t.ItemCount).off("click").pagination({total_pages:r.data("pages"),current_page:r.data("current-page"),callback:function(t,i){var r,f;t.preventDefault();r=n(t.target).closest("li");r.not(".disabled").length>0&&r.not(".active").length>0&&(f=u.getCurrentFilter(),u.load(i,f,!u.isRelatedRecordFilterEnabled(),t.currentTarget))}}).show();i&&r.find("a").filter(function(){return n(this).text()==n(i).text()}).trigger("focus")};f.prototype.hidePagination=function(){this._element.children(".view-pagination").hide()};f.prototype.initializePager=function(t,i,r){var u=this,c=n("<a>").attr("href","#").data("page",1).text("|<"),f=n("<li>").append(c),e=n("<a>").attr("href","#").text("<"),o=n("<li>").append(e),l=n("<li>").addClass("active").append(n("<span>").text(i.PageNumber)),s=n("<a>").attr("href","#").text(">"),h=n("<li>").append(s),a=n("<ul>").addClass("pagination").append(f).append(o).append(l).append(h);if(t.empty(),i.PageNumber===1&&!i.MoreRecords){t.hide();return}i.PageNumber>1?e.data("page",i.PageNumber-1):(f.addClass("disabled"),o.addClass("disabled"));i.MoreRecords?s.data("page",i.PageNumber+1):h.addClass("disabled");t.data("pagesize",i.PageSize).data("current-page",i.PageNumber).data("more-records",i.MoreRecords).off("click").append(a).on("click","a",function(t){var f;t.preventDefault();var i=n(t.target),e=i.data("page"),r=i.closest("li");r.not(".disabled").length>0&&r.not(".active").length>0&&(f=u.getCurrentFilter(),u.load(e,f,!u.isRelatedRecordFilterEnabled(),t.currentTarget))}).show();r&&t.find("a").filter(function(){return n(this).text()==n(r).text()}).trigger("focus")};String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return t=t||0,this.lastIndexOf(n,t)===t})}(jQuery),function(n){function t(t){this._element=n(t);this._associate=this._element.data("associate")||{};this._url=this._element.attr("data-url");this._parent=this._element.parent(".entity-grid");this._success=!1}function i(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null){console.log(t);var u=i.find(".modal-body"),r=i.find(".alert-danger.error");r.length==0?r=n("<div><\/div>").addClass("alert alert-block alert-danger error clearfix"):r.empty();typeof t.Message!=typeof undefined&&t.Message!==!1&&t.Message!=null&&(typeof t.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+"<\/p>"));typeof t.InnerError!=typeof undefined&&t.InnerError!==!1&&t.InnerError!=null&&r.append("<p>"+t.InnerError.Message+"<\/p>");u.prepend(r)}}function r(t){var i={Message:"An unknown error has occurred."},r;if(t==null)return i;try{r=t.getResponseHeader("content-type");i=r!=null?r.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}}:{Message:t.statusText}}catch(u){i={Message:u.message}}return i}n(document).ready(function(){n(".entity-associate").each(function(){new t(n(this)).render()})});t.prototype.render=function(){var t=this,i=t._element,f=i.find(".panel-body.selected-records"),r=i.find(".entity-grid"),e=i.find(".modal-footer .btn-primary"),u=i.find(".modal-associate"),o=t._parent;e.on("click",function(){u.find(".alert-danger.error").remove();t.associate()});r.children(".view-grid").on("click","tr",function(){var i=n(this),r=n(this).attr("data-entity"),u=n(this).attr("data-id"),e=n(this).attr("data-name"),o=f.find("div[data-entity='"+r+"'][data-id='"+u+"']"),h=o.length>0,t,s;if(!i.hasClass("selected")){o.remove();return}h||(t=n("<div class='item pull-left btn btn-default'><\/div>").attr("data-entity",r).attr("data-id",u).attr("data-name",e).append(n("<span class='name'><\/span>").html(e)),s=n("<span class='remove'><span class='fa fa-times' aria-hidden='true'><\/span><\/span>").on("click",function(){t.remove();i.find("td:first").empty();i.removeClass("selected").removeClass("info")}),t.append(s),f.append(t))});u.on("show.bs.modal",function(){r.trigger("refresh")});u.on("hidden.bs.modal",function(){u.find(".alert-danger.error").remove();f.empty();r.children(".view-toolbar").find(".view-search input.query").val("");r.children(".view-grid").find("tbody tr.selected").each(function(){n(this).find("td:first").empty();n(this).removeClass("selected").removeClass("info")});t._success&&o.trigger("refresh")})};t.prototype.associate=function(){var t=this,f=t._element,a=t._associate,e=t._url,v=f.find(".panel-body.selected-records"),h=f.find(".modal-footer button.primary"),o=f.find(".modal-associate"),c,s,u,l;if(e==null||e==""){c={Message:"System Error",InnerError:{Message:"The URL to the service for this Associate Request could determined."}};i(c,o);return}(s=n.map(v.find("div.item"),function(t){return{LogicalName:n(t).attr("data-entity"),Id:n(t).attr("data-id"),Name:n(t).attr("data-name")}}),s.length<=0)||(h.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),u=a,u.RelatedEntities=s,console.log(u),l=JSON.stringify(u),shell.ajaxSafePost({type:"POST",contentType:"application/json",url:e,data:l}).done(function(){t._success=!0;o.modal("hide")}).fail(function(n){i(r(n),o)}).always(function(){h.removeAttr("disabled","disabled").find(".fa-spin").remove()}))}}(jQuery),function(n){function t(t){this._element=n(t);this._target=this._element.data("target")||{};this._url=this._element.attr("data-url");this._lookupDataFieldName=this._element.attr("data-lookup-datafieldname")}n(document).ready(function(){n(".entity-lookup").each(function(){new t(n(this)).render()})});t.prototype.render=function(){var t=this,i=t._element,u=i.find(".entity-grid"),f=i.find(".modal-footer button.primary"),r=i.find(".modal-lookup");i.find(".modal-footer .remove-value").on("click",function(n){n.preventDefault();t.clearFieldValue()});f.on("click",function(){r.find(".alert-danger.error").remove();t.setFieldValue()});n("#"+t._lookupDataFieldName+"_name").on("keyup",function(n){(n.keyCode===8||n.keyCode===46)&&(t.clearFieldValue(),n.stopPropagation(),n.preventDefault())});i.closest("td.lookup.form-control-cell").find(".clearlookupfield").on("click",function(n){n.preventDefault();t.clearFieldValue()}).toggle(!!n("#"+t._lookupDataFieldName).val());i.closest("td.lookup.form-control-cell").find(".launchentitylookup").on("click",function(n){n.preventDefault();r.modal()});r.on("show.bs.modal",function(){u.trigger("refresh")});r.on("hidden.bs.modal",function(){r.find(".alert-danger.error").remove();u.children(".view-toolbar").find(".view-search input.query").val("");u.children(".view-grid").find("tr.selected").each(function(){n(this).find("td:first").empty();n(this).removeClass("selected").removeClass("info")});u.children(".view-toolbar").find(".toggle-related-filter").addClass("active")})};t.prototype.setFieldValue=function(){var o=this,i=o._element,s=i.find(".modal-footer button.primary"),h=i.find(".modal-lookup"),c=i.find(".entity-grid"),u=o._lookupDataFieldName,f=n("#"+u),r,e,t;f.length!=0&&(r=n("#"+u+"_name"),r.length!=0)&&(e=n("#"+u+"_entityname"),e.length!=0)&&((t=n.map(c.children(".view-grid").find("tr.selected"),function(t){return{LogicalName:n(t).attr("data-entity"),Id:n(t).attr("data-id"),Name:n(t).attr("data-name")}}),t.length<=0)||(s.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),r.val(t[0].Name),e.val(t[0].LogicalName),f.val(t[0].Id).trigger("change"),h.modal("hide"),i.closest("td.lookup.form-control-cell").find(".clearlookupfield").show(),s.removeAttr("disabled","disabled").find(".fa-spin").remove(),setIsDirty&&n.isFunction(setIsDirty)&&setIsDirty(f.attr("id")),r.trigger("focus")))};t.prototype.clearFieldValue=function(){var e=this,i=e._element,o=i.find(".modal-footer button.primary"),s=i.find(".modal-lookup"),r=e._lookupDataFieldName,u=n("#"+r),t,f;u.length!=0&&(t=n("#"+r+"_name"),t.length!=0)&&(f=n("#"+r+"_entityname"),f.length!=0)&&(o.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),t.val(""),f.val(""),u.val("").trigger("change"),s.modal("hide"),o.removeAttr("disabled","disabled").find(".fa-spin").remove(),i.closest("td.lookup.form-control-cell").find(".clearlookupfield").hide(),setIsDirty&&n.isFunction(setIsDirty)&&setIsDirty(u.attr("id")),t.trigger("focus"))}}(jQuery),function(n){function t(t){this._element=n(t);this._lookupElement=n("#"+this._element.data("lookup-element"));this._lookupEntityNameElement=n("#"+this._element.data("lookup-element")+"_entityname");this._path=this._element.data("path");this._controlId=this._element.data("controlid");this._formName=this._element.data("formname")}n(document).ready(function(){n("iframe.quickform").each(function(){new t(n(this)).bindEvents()})});t.prototype.bindEvents=function(){var t=this,i=t._element,r=t._lookupElement,u=t._lookupEntityNameElement;i.on("load.quickform",function(){t.resize()});r.on("change.quickform",function(){var i=n(this).val(),r;i==null||i==""?t.clear():(r=u.val(),t.reload(i,r))})};t.prototype.reload=function(n,t,i){var r=this,f=r._element,e=r._formName,o=r._controlId,s=r._path,u;typeof i=="undefined"&&(i="");u=s+"?entityid="+n+"&entityname="+t+"&entityprimarykeyname="+i+"&formname="+e+"&controlid="+o;f.attr("src",u)};t.prototype.clear=function(){var t=this,n=t._element;n.attr("src","about:blank");n.css("height",0)};t.prototype.resize=function(){var t=this,n=t._element;n.css("height",0);n.css("height",n[0].contentWindow.document.body.scrollHeight+"px")}}(jQuery);+function(n,t){"use strict";function i(i){var u=n(this),e=u.data("serialized-query"),r=u.data("target"),c=u.closest(".entitylist"),o=c.find(".entity-grid").filter(":first"),s,f,h;o.length==1&&r?(i.preventDefault(),h=n(r).find("input,select").serialize(),o.trigger("metafilter",h)):r&&e&&(s=n(r).find("input,select").serialize(),f=new t,f.setSearch(e,s),window.location.href=f.toString())}function r(){var t=n(this).data("target");t&&n(t).find("input:radio").click(function(){var i=n(this);i.data("checked")?(i.data("checked",null),i.prop("checked",!1)):(n(t).find("input:radio[name="+i.prop("name")+"]").data("checked",null),i.data("checked",!0))})}n(document).on("click.adx.serialized-query.data-api","[data-serialized-query]",i);n(document).ready(function(){n("[data-serialized-query]").each(r)})}(jQuery,URI),function(n,t){"use strict";n.Ad=function(){var n=function(n){this._element=t(n);this.url=this._element.data("url");this._element.data("ad",this)};n.prototype.init=function(){var n=this;this._element.hide();r.call(this).then(function(){u.call(n);n._element.trigger({type:"adplacement_ready",adplacement:n})},function(t){i.call(n,t)})};var i=function(n){console&&console.error&&console.error({error:n,ad:this})},r=function(){var i=this,n=t.Deferred();return this.url?t.ajax({url:this.url,type:"GET"}).then(function(r){i.html=t(r.trim());n.resolve()},n.fail):(this.html=t(this._element.html().trim()),n.resolve()),n.promise()},u=function(){this._element.html(this.html).show();this._element.trigger({type:"ad_ready",ad:this})};return n}();n.AdPlacement=function(){var n=function(n){this._element=t(n);this.url=this._element.data("url");this._element.data("adplacement",this)};n.prototype.init=function(){var n=this;n._element.hide();r.call(this).then(function(){u.call(n)},function(t){i.call(n,t)})};var i=function(n){console&&console.error&&console.error({error:n,ad:this})},r=function(){var i=this,n=t.Deferred();return this.url?t.ajax({url:this.url,type:"GET",async:!0}).then(function(t){i.html=t;n.resolve()},n.fail):(this.html=t(this._element.html().trim()),n.resolve()),n.promise()},u=function(){this._element.html(this.html).show()};return n}();t(document).ready(function(){t(".ad").each(function(){var t=new n.Ad(this);t.init()});t(".adplacement").each(function(){t(this).on("adplacement_ready",function(n,t){console.log(n);console.log(t)});var i=new n.AdPlacement(this);i.init()})})}(window.adx||(window.adx={}),window.jQuery),function(n,t){"use strict";function i(t){t.each(function(){var t=new n.Poll(this);t.init()})}function r(t){t.each(function(){var t=new n.PollPlacement(this);t.init()})}n.Poll=function(){var n=function(n){this._element=t(n);this._content=this._element.find(".poll-content").length?this._element.find(".poll-content"):this._element;this._url=this._element.data("url");this._submitUrl=this._element.data("submit-url")};n.prototype.init=function(){var n=this;f.call(this).then(function(){i.call(n);h.call(n);n._element.trigger({type:"poll_ready",ad:n})},function(t){u.call(n,t)})};n.prototype.viewPoll=function(){r.call(this,!0)};n.prototype.viewResults=function(){r.call(this,!1);this._submitted&&this._element.find(".poll-return").remove()};var u=function(n){console&&console.error&&console.error({error:n,poll:this})},f=function(){var i=this,n=t.Deferred();return this._url?t.ajax({url:this._url,type:"GET"}).then(function(r){i.html=t(r.trim());n.resolve()},n.fail):(this.html=t(this._content.html().trim()),n.resolve()),n.promise()},i=function(){e.call(this);this._id=this._element.find(".poll-questionpanel").data("id");this._name=this._element.find(".poll-questionpanel").data("name");this._submitted=!this._element.find(".poll-questionpanel").length;o.call(this)},e=function(){this._content.html(this.html).show()},o=function(){this._submitted?this.viewResults():this.viewPoll()},r=function(n){this._element.find(".poll-questionpanel").toggle(n);this._element.find(".poll-resultspanel").toggle(!n)},s=function(){var r=this,u=this._element.find("input[name='"+this._name+"']:checked").val(),n;u&&this._submitUrl&&(n=t.ajax({url:this._submitUrl,async:!1,type:"POST",data:JSON.stringify({pollId:this._id,optionId:u}),contentType:"application/json; charset=utf-8"}),n.then(function(n){r.html=t(n.trim());i.call(r)}),n.fail(function(){console.log({m:"Post Failed",d:arguments})}))},h=function(){var n=this;this._element.on("click.poll",".poll-submit",function(){console.log("submit");s.call(n)});this._element.on("click.poll",".poll-viewresults",function(){console.log("view results");n.viewResults()});this._element.on("click.poll",".poll-return",function(){console.log("return to poll");n.viewPoll()})};return n}();n.PollPlacement=function(){var n=function(n){this._element=t(n).hide();this._url=this._element.data("url");this._element.data("pollplacement",this)};n.prototype.init=function(){var n=this;u.call(this).then(function(){f.call(n);e.call(n);n._element.trigger({type:"pollplacement_ready",pollplacement:n})},function(t){r.call(n,t)})};var r=function(n){console&&console.error&&console.error({error:n,ad:this})},u=function(){var i=this,n=t.Deferred();return this._url?t.ajax({url:this._url}).then(function(r){i.html=t(r.trim());n.resolve()},n.fail):(this.html=t(this._element.html().trim()),n.resolve()),n.promise()},f=function(){this._element.html(this.html).show()},e=function(){i(this._element.find(".poll"))};return n}();t(document).ready(function(){i(t(".poll"));r(t(".pollplacement"))})}(window.adx||(window.adx={}),window.jQuery);!function(){var n=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.searchresults=n(function(n,t,i,r,u){function o(){return'\r\n<div class="panel panel-default">\r\n  <div class="panel-heading">\r\n    <div class="panel-title">Suggested Topics<\/div>\r\n  <\/div>\r\n  <ul id="case-deflection-topics" class="list-group">\r\n  <\/ul>\r\n  <div class="panel-footer clearfix">\r\n      <button type="button" class="btn btn-default search-more pull-right"><span class=\'fa fa-plus\'><\/span> Show More...<\/button>\r\n      <a href="#" class="btn btn-success pull-left deflect"><span class=\'fa fa-check\'><\/span> Found my answer<\/a>\r\n  <\/div>\r\n<\/div>\r\n'}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,e=this;return f=i["if"].call(t,t&&t.items,{hash:{},inverse:e.noop,fn:e.program(1,o,u),data:u}),f||0===f?f:""});t.searchresultsitems=n(function(n,t,i,r,u){function v(n,t){var u,r,s,v="";return v+='\r\n  <li class="list-group-item">\r\n    <h4 class="list-group-item-heading">\r\n      <a target="_blank" href="',(r=i.url)?u=r.call(n,{hash:{},data:t}):(r=n&&n.url,u=typeof r===o?r.call(n,{hash:{},data:t}):r),v+=h(u)+'">',(r=i.title)?u=r.call(n,{hash:{},data:t}):(r=n&&n.title,u=typeof r===o?r.call(n,{hash:{},data:t}):r),v+=h(u)+'<\/a>\r\n    <\/h4>\r\n    <p class="list-group-item-text search-results fragment">\r\n      ',(r=i.fragment)?u=r.call(n,{hash:{},data:t}):(r=n&&n.fragment,u=typeof r===o?r.call(n,{hash:{},data:t}):r),(u||0===u)&&(v+=u),v+='\r\n    <\/p>\r\n    <div class="content-metadata">\r\n      ',r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_communityforum",s):e.call(n,"label",n&&n.entityLogicalName,"adx_communityforum",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_communityforumthread",s):e.call(n,"label",n&&n.entityLogicalName,"adx_communityforumthread",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(2,c,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_communityforumpost",s):e.call(n,"label",n&&n.entityLogicalName,"adx_communityforumpost",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(4,l,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_blog",s):e.call(n,"label",n&&n.entityLogicalName,"adx_blog",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(4,l,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_blogpost",s):e.call(n,"label",n&&n.entityLogicalName,"adx_blogpost",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(4,l,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_blogpostcomment",s):e.call(n,"label",n&&n.entityLogicalName,"adx_blogpostcomment",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(6,a,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_event",s):e.call(n,"label",n&&n.entityLogicalName,"adx_event",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(6,a,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_eventschedule",s):e.call(n,"label",n&&n.entityLogicalName,"adx_eventschedule",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(8,y,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_idea",s):e.call(n,"label",n&&n.entityLogicalName,"adx_idea",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(10,p,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"adx_issue",s):e.call(n,"label",n&&n.entityLogicalName,"adx_issue",s),(u||0===u)&&(v+=u),v+="\r\n      ",r=i.label||n&&n.label,s={hash:{},inverse:f.noop,fn:f.program(12,w,t),data:t},u=r?r.call(n,n&&n.entityLogicalName,"kbarticle",s):e.call(n,"label",n&&n.entityLogicalName,"kbarticle",s),(u||0===u)&&(v+=u),v+='\r\n      <a href="',(r=i.url)?u=r.call(n,{hash:{},data:t}):(r=n&&n.url,u=typeof r===o?r.call(n,{hash:{},data:t}):r),v+=h(u)+'">',(r=i.absoluteUrl)?u=r.call(n,{hash:{},data:t}):(r=n&&n.absoluteUrl,u=typeof r===o?r.call(n,{hash:{},data:t}):r),v+(h(u)+"<\/a>\r\n    <\/div>\r\n  <\/li>\r\n")}function c(){return"\r\n       <span class='label label-info'>Forums<\/span>\r\n      "}function l(){return"\r\n       <span class='label label-info'>Blogs<\/span>\r\n      "}function a(){return"\r\n       <span class='label label-info'>Events<\/span>\r\n      "}function y(){return"\r\n       <span class='label label-success'>Ideas<\/span>\r\n      "}function p(){return"\r\n       <span class='label label-danger'>Issues<\/span>\r\n      "}function w(){return"\r\n       <span class='label label-info'>Knowledge Base<\/span>\r\n      "}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var s,o="function",h=this.escapeExpression,f=this,e=i.helperMissing;return s=i.each.call(t,t&&t.items,{hash:{},inverse:f.noop,fn:f.program(1,v,u),data:u}),s||0===s?s:""})}(Handlebars),function(n,t){"use strict";function i(t){this._element=n(t);this._url=this._element.data("url")||n("body").data("case-deflection-url");this._container=this._element.data("container");this._target=this._element.data("target");this._itemTarget=this._element.data("itemtarget");this._template=this._element.data("template");this._itemTemplate=this._element.data("itemtemplate");this._logicalNames=this._element.data("logicalnames");this._filter=this._element.data("filter");this._query=this._element.data("query");this._noResultsText=this._element.data("noresultstext");this._$container=null;this._compiledTemplate=null;this._compiledItemTemplate=null;(typeof this._query==typeof undefined||this._query==null||this._query=="")&&(this._query="(+(@subject))");(typeof this._logicalNames==typeof undefined||this._logicalNames==null||this._logicalNames=="")&&(this._logicalNames="adx_issue,adx_webpage,adx_communityforumthread,adx_communityforumpost,adx_blogpost,kbarticle")}var r=4;t.registerHelper("label",function(n,t,i){return n==t?i.fn(this):i.inverse(this)});n(document).ready(function(){n("input.case-deflection").each(function(){new i(n(this)).init()})});i.prototype.init=function(){var i=this,u=i._element,r,f,e;if(i._element.length==0){window.console.log("Case deflection input element not found.");return}if(!i._url){window.console.log("Case deflection URL not specified.");return}r=i._container?u.parents(i._container):u.parent();i._$container=r;i._compiledTemplate=i._template?t.compile(n(i._template).html()):t.templates.searchresults;i._compiledItemTemplate=i._itemTemplate?t.compile(n(i._itemTemplate).html()):t.templates.searchresultsitems;u.off("keyup.adx.case-deflection").on("keyup.adx.case-deflection",_.debounce(function(){i.getResults()},800));f=r.find(".search-clear");e=r.find(".search-apply");f.off("click.adx.case-deflection").on("click.adx.case-deflection",function(n){n.preventDefault();i.clearResults()});e.off("click.adx.case-deflection").on("click.adx.case-deflection",function(n){n.preventDefault();i.getResults()})};i.prototype.clearResults=function(){var t=this,i=t._element,u=t._$container,r;i.val("");r=u.find(".search-more");t._target?(r.parent(".panel-footer").animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"fast","linear"),n(t._target).animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"normal","linear",function(){n(this).empty()})):i.parent().find(".results").animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"normal","linear",function(){n(this).empty()});r.hide();i.data("page",null)};i.prototype.getResults=function(){var n=this;n.getSearchResults()};i.prototype.getMoreResults=function(){var t=this,i=t._element,n=i.data("page");n!=null&&(n=n+1);t.getSearchResults(n)};i.prototype.getSearchResults=function(t){var i=this,o=i._element,c=i._$container,a=o.val(),u=c.find(".search-more"),f,h,e,v,l,s,y;if(!a){i._target?(u.parent(".panel-footer").animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"normal","linear"),n(i._target).animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"normal","linear",function(){n(this).empty()})):o.parent().find(".results").animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"normal","linear",function(){n(this).empty()});u.hide();o.data("page",null);return}a.length<r||(u.prop("disabled",!0),u.append("<span class='fa fa-spinner fa-spin'><\/span>"),i._target?t?f=n(i._target):(f=n(i._target),u.parent(".panel-footer").animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"normal","linear"),u.hide(),f.animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"fast","linear",function(){n(this).empty()})):t?f=o.parent().find(".results"):(u.parent(".panel-footer").animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"normal","linear"),u.hide(),o.parent().find(".results").length==1?(f=o.parent().find(".results"),f.animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"fast","linear",function(){n(this).empty()})):(f=n("<div class='results pull-left' style='margin-top: 20px; width: 100%;'><\/div>"),f.hide(),o.parent().append(f))),e=c.find(".case-deflection-loading"),e.length==0&&(e=n("<div class='case-deflection-loading' style='text-align:center;margin-bottom:10px;margin-top:10px;width:100%;'><span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span><\/div>").hide(),i._target?f.after(e):(e.addClass("pull-left"),f.before(e))),!t&&i._target?e.css("margin-top",0):e.css("margin-top","10px"),t||e.animate({opacity:"show",margin:"show",padding:"show",height:"show"},"normal","linear"),v=t||1,l=o.data("pagesize"),(l==null||l=="")&&(l=5),s={},s.parameters={subject:a},s.query=i._query,s.logicalNames=i._logicalNames,s.filter=i._filter,s.pageNumber=v,s.pageSize=l,y=JSON.stringify(s),n.ajax({type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",url:i._url,data:y,global:!1}).done(function(r){if(r==null||r.itemCount==0){if(!t)if(i._target){if(typeof i._noResultsText!=typeof undefined&&i._noResultsText!=null&&i._noResultsText!=""){var e=n("<li class='list-group-item noresults'><\/li>").text(i._noResultsText);f.html(e);f.animate({opacity:"show",margin:"show",padding:"show",height:"show"},"normal","linear")}}else u.parent(".panel-footer").animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"fast","linear");u.hide();u.prop("disabled",!1);u.find(".fa-spinner").remove();return}if(t||f.html(i._compiledTemplate(r)),h=i._itemTarget?n(i._itemTarget):c.find("#case-deflection-topics"),h.length==0&&(h=f),t?h.append(i._compiledItemTemplate(r)):(h.html(i._compiledItemTemplate(r)),f.animate({opacity:"show",margin:"show",padding:"show",height:"show"},"normal","linear")),u=c.find(".search-more"),r.pageCount<=1||r.pageNumber==r.pageCount)i._target&&u.parent(".panel-footer").animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"normal","linear"),u.hide();else{o.data("page",r.pageNumber);u.off("click.adx.case-deflection").on("click.adx.case-deflection",function(n){n.preventDefault();i.getMoreResults()});u.show();u.parent(".panel-footer").animate({opacity:"show",margin:"show",padding:"show",height:"show"},"normal","linear")}u.prop("disabled",!1);u.find(".fa-spinner").remove();c.find(".deflect").off("click.adx.case-deflection").on("click.adx.case-deflection",function(n){n.preventDefault();window.parent?window.parent.location.replace("/"):window.location.replace("/")});t||n("html, body").animate({scrollTop:0},200)}).always(function(){e.animate({opacity:"hide",margin:"hide",padding:"hide",height:"hide"},"fast","linear")}))}}(jQuery,Handlebars);!function(n){var t=n.template,i=n.templates=n.templates||{};i.kbarticles=t(function(n,t,i,r,u){function h(n,t){var r,u="";return u+='\r\n<div class="panel panel-default">\r\n  <div class="panel-heading">\r\n    <div class="panel-title">Suggested Topics<\/div>\r\n  <\/div>\r\n  <div class="list-group">\r\n    ',r=i.each.call(n,n&&n.articles,{hash:{},inverse:e.noop,fn:e.program(2,c,t),data:t}),(r||0===r)&&(u+=r),u+'\r\n  <\/div>\r\n<\/div>\r\n<a href="/" class="btn btn-block btn-info">Found my answer<\/a>\r\n'}function c(n,t){var u,r,f="";return f+='\r\n    <a class="list-group-item" href="',(r=i.url)?u=r.call(n,{hash:{},data:t}):(r=n&&n.url,u=typeof r===o?r.call(n,{hash:{},data:t}):r),f+=s(u)+'">',(r=i.question)?u=r.call(n,{hash:{},data:t}):(r=n&&n.question,u=typeof r===o?r.call(n,{hash:{},data:t}):r),f+(s(u)+"<\/a>\r\n    ")}this.compilerInfo=[4,">= 1.0.0"];i=this.merge(i,n.helpers);u=u||{};var f,o="function",s=this.escapeExpression,e=this;return f=i["if"].call(t,t&&t.articles,{hash:{},inverse:e.noop,fn:e.program(1,h,u),data:u}),f||0===f?f:""})}(Handlebars),function(n,t){"use strict";function i(){var i=n(this),u=i.data("url"),f=i.data("target"),o=i.data("template"),e=i.val(),s,r;if(!e){i.parent().find(".articles").empty().hide();return}if(!u&&(u=n("body").data("parature-case-deflection-url"),!u)){window.console.log("Parature case deflection URL not specified.");return}e.length<4||(r=f?n(f):n("<div class='articles pull-left' style='margin-top: 20px; width: 100%;'><\/div>"),r.html('<div style="text-align: center;"><span class="fa fa-spinner fa-spin" aria-hidden="true"><\/span><\/div>'),s=o?t.compile(n(o).html()):t.templates.kbarticles,n.getJSON(u,{keywords:e},function(n){if(n==null||n.total_items==0){r.empty();return}r.html(s(n));f||(i.parent().find(".articles").remove(),i.parent().append(r).show())}))}n(document).on("keyup.adx.parature.case-deflection",".parature-deflection",_.debounce(i,500))}(jQuery,Handlebars),function(n){function t(t){this._element=n(t);this._url=this._element.data("url")}function i(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null){console.log(t);var r=i.find(".error-message"),u=!1;r.length==0?(u=!0,r=n("<div><\/div>").addClass("error-message alert alert-block alert-danger clearfix")):r.hide().empty();typeof t.Message!=typeof undefined&&t.Message!==!1&&t.Message!=null&&(typeof t.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+"<\/p>"));u&&i.prepend(r);r.show()}}n(document).ready(function(){n(".submit-parature-ticket").each(function(){new t(n(this)).render()})});t.prototype.render=function(){var n=this,t=n._element,i=t.find(".submit-ticket");i.on("click",function(){n.submit()})};t.prototype.submit=function(){var o=this,t=o._element,u=o._url,s=t.find(".submit-ticket"),f=t.find("#ticketsummary").val(),e=t.find("#ticketdetails").val(),l=t.find("#ticketpriority").val(),h,r;if(u==null||u==""){h={Message:"System Error. The URL to the service for this Submit Support Ticket request could not be determined."};i(h,t);return}if(f!=null&&!(f.length<=0)&&e!=null&&!(e.length<=0)){s.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");r={};r.details=e;r.summary=f;r.priority=l;var a=JSON.stringify(r),v=n("input[name='__RequestVerificationToken']").val(),c={};c.__RequestVerificationToken=v;n.ajax({url:u,type:"POST",data:a,headers:c,dataType:"json",contentType:"application/json",cache:!1}).done(function(n){n&&n.number&&t.find(".success-message .ticket-number").text(n.number);t.find(".error-message").hide();t.find("form.ticket-form").hide();t.find(".success-message").show()}).fail(function(r){var u=r.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(r.responseText):{Message:r.status,InnerError:{Message:r.statusText}};i(f,t)}).always(function(){s.removeAttr("disabled","disabled").find("i.fa-spin").remove()})}}}(jQuery),function(n){function i(t){this._element=n(t);this._url=this._element.data("url");this._ticketId=this._element.data("id")}function t(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null){console.log(t);var r=i.find(".error-message"),u=!1;r.length==0?(u=!0,r=n("<div><\/div>").addClass("error-message alert alert-block alert-danger clearfix")):r.hide().empty();typeof t.Message!=typeof undefined&&t.Message!==!1&&t.Message!=null&&(typeof t.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+"<\/p>"));u&&i.prepend(r);r.show()}}n(document).ready(function(){n("#ticket-actions").each(function(){new i(n(this)).render()})});i.prototype.render=function(){var i=this,u=i._element,f=u.find("a.run-ticket-action"),t=n("#modal-ticket-action"),r=t.find(".btn-primary");r.off("click");r.on("click",function(n){n.preventDefault();i.submit()});f.on("click",function(i){i.preventDefault();var r=n(this).data("id");t.find(".modal-title").html(n(this).html());t.data("action-id",r);t.modal("show")});t.on("hidden.bs.modal",function(){t.removeData("action-id");n("#action-comment").val("")})};i.prototype.submit=function(){var u=this,r=u._element,f=u._url,e=n("#modal-ticket-action"),o=e.find(".btn-primary"),s=u._ticketId,h=e.data("action-id"),y=n("#action-comment").val(),c,l,a,i;if(f==null||f==""){c={Message:"System Error. The URL to the service for this Run Ticket Action request could not be determined."};t(c,r);return}if(!s){l={Message:"System Error. The ticket ID for this Run Ticket Action request could not be determined."};t(l,r);return}if(!h){a={Message:"System Error. The action ID for this Run Ticket Action request could not be determined."};t(a,r);return}o.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>");i={};i.ticketid=s;i.actionid=h;i.comment=y;var p=JSON.stringify(i),w=n("input[name='__RequestVerificationToken']").val(),v={};v.__RequestVerificationToken=w;n.ajax({url:f,type:"POST",headers:v,data:p,dataType:"json",contentType:"application/json",cache:!1}).done(function(){e.modal("hide");location.reload(!0)}).fail(function(i){var u=i.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(f,r)}).always(function(){o.removeAttr("disabled","disabled").find("i.fa-spin").remove()})}}(jQuery),function(n){function i(t){this._element=n(t);this._url=this._element.data("url");this._ticketId=this._element.data("id");this._files=null}function t(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null){console.log(t);var r=i.find(".error-message"),u=!1;r.length==0?(u=!0,r=n("<div><\/div>").addClass("error-message alert alert-block alert-danger clearfix")):r.hide().empty();typeof t.Message!=typeof undefined&&t.Message!==!1&&t.Message!=null&&(typeof t.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+"<\/p>"));u&&i.prepend(r);r.show()}}n(document).ready(function(){n(".ticket-attachments").each(function(){new i(n(this)).render()})});i.prototype.render=function(){var i=this,u=i._element,e=i._url,c=i._ticketId,r=u.children(".modal-ticket-add-attachments"),f=u.find(".add-ticket-attachment"),o=r.find(".btn-primary"),s,h;if(u.find(".error-message").remove(),f.removeAttr("disabled"),e==null||e==""){s={Message:"System Error. The URL to the service for this Add Ticket Attachments request could not be determined."};t(s,u);f.attr("disabled","disabled");return}if(!c){h={Message:"System Error. The ticket ID for this Add Ticket Attachments request could not be determined."};t(h,u);f.attr("disabled","disabled");return}o.off("click");o.on("click",function(n){n.preventDefault();i.submit()});f.on("click",function(n){n.preventDefault();r.modal("show")});r.on("hidden.bs.modal",function(){r.find("input[type='file']").val("");r.find("input[type='file']").parents(".btn-file").siblings(".file-status").find("ul").empty();r.find(".error-message").remove();i._files=null});n(document).on("change",".btn-file :file",function(){var e=n(this),t=e.get(0).files,u=n(this).parents(".btn-file").siblings(".file-status").find("ul"),r;if(u.empty(),!t||!t.length){i._files=null;return}for(r=0;r<t.length;r++){var o=t[r].name.replace(/\\/g,"/").replace(/.*\//,""),s=t[r].size+" bytes",h=n("<li><\/li>").html("<span class='fa fa-file-o' aria-hidden='true'><\/span> "+o+" ("+s+")").appendTo(u),f=n("<a href='#'><span class='fa fa-times' aria-hidden='true'><\/span><\/a>").attr("data-index",r);h.append("&nbsp;").append(f);f.on("click",function(r){var u;r.preventDefault();n(this).parents("li").remove();var o=n(this).data("index"),f=[],e=0;for(u=0;u<t.length;u++)u!=o&&(f[e]=t[u],e++);i._files=f})}i._files=t})};i.prototype.submit=function(){var r=this,s=r._element,o=r._url,u=s.children(".modal-ticket-add-attachments"),f=s.find(".modal-body"),h=u.find(".btn-primary"),c=r._ticketId,e=r._files,l,a,v,i;if(o==null||o==""){l={Message:"System Error. The URL to the service for this Add Ticket Attachments request could not be determined."};t(l,f);return}if(!c){a={Message:"System Error. The ticket ID for this Add Ticket Attachments request could not be determined."};t(a,f);return}typeof e!=typeof undefined&&e!=null&&e.length!=0&&(h.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-spin' aria-hidden='true'><\/span>"),u.find("input[type='file']").attr("disabled","disabled"),window.FormData!==undefined?(v=n("input[name='__RequestVerificationToken']").val(),i=new FormData,i.append("ticketid",c),i.append("__RequestVerificationToken",v),n.each(e,function(n,t){i.append("files",t,t.name.replace(/\\/g,"/").replace(/.*\//,""))}),n.ajax({url:o,type:"POST",data:i,mimeType:"multipart/form-data",contentType:!1,cache:!1,processData:!1}).done(function(){u.modal("hide");location.reload(!0)}).fail(function(i){var r=i.getResponseHeader("content-type"),u=r.indexOf("json")>-1?n.parseJSON(i.responseText):{Message:i.status,InnerError:{Message:i.statusText}};t(u,f)}).always(function(){h.removeAttr("disabled").find("i.fa-spin").remove();u.find("input[type='file']").removeAttr("disabled")})):t({Message:"Your browser does not support FormData."},f))}}(jQuery);$(document).ready(function(){if($("[data-badge]")){var n={},t;$("[data-badge]").each(function(i,r){t=$(r).attr("data-uri");n[t]||(n[t]=Array());n[t].push($(r))});$.each(n,function(n,t){t[0].attr("data-uri")&&$.ajax({type:"GET",url:t[0].attr("data-uri"),contentType:"application/json; charset=utf-8",dataType:"html"}).done(function(n){$.each(t,function(t,i){$(i).html(n);$(i).find('[data-toggle="popover"]').popover({html:!0,template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content" style="padding-bottom:3px;"><\/div><\/div>'})})})})}}),function(n){function t(t){this._element=n(t);this._target=this._element.data("target")||{};this._serviceUrlGet=this._element.attr("data-url-get");this._serviceUrlAddFiles=this._element.attr("data-url-add-files");this._serviceUrlAddFolder=this._element.attr("data-url-add-folder");this._serviceUrlDelete=this._element.attr("data-url-delete");this._addEnabled=this._element.data("add-enabled");this._deleteEnabled=this._element.data("delete-enabled");this._pageSize=this._element.attr("data-pagesize");this._addSuccess=!1;this._deleteSuccess=!1;var i=this;n(t).on("refresh",function(n,t){i.load(t)})}function i(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null){console.log(t);var u=i.find(".modal-body"),r=i.find(".alert-danger.error");r.length==0?r=n("<div><\/div>").addClass("alert alert-block alert-danger error clearfix"):r.empty();typeof t.InnerError!=typeof undefined&&typeof t.InnerError.Message!=typeof undefined&&t.InnerError.Message!==!1&&t.InnerError.Message!=null?typeof t.InnerError.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.InnerError.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.InnerError.Message+"<\/p>"):typeof t.Message!=typeof undefined&&t.Message!==!1&&t.Message!=null&&(typeof t.Message=="number"?r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+" Error<\/p>"):r.append("<p><span class='fa fa-exclamation-triangle' aria-hidden='true'><\/span> "+t.Message+"<\/p>"));u.prepend(r)}}n(document).ready(function(){n(".sharepoint-grid").each(function(){new t(n(this)).render()})});t.prototype.render=function(){var r=this,n=r._element,u=n.children(".grid-actions").find("a.add-file"),t=n.children(".modal-add-file"),f=t.find(".modal-footer .btn-primary"),e=n.children(".grid-actions").find("a.add-folder"),i=n.children(".modal-add-folder"),o=i.find(".modal-footer .btn-primary");if(r.load(),r._addEnabled){u.on("click",function(){var i=t.find(".destination-group"),r=n.attr("data-folderpath");r?(i.find("p.destination-folder").html(r+"/"),i.show()):i.hide();t.modal("show")});f.on("click",function(){r.addFile()});t.on("hidden.bs.modal",function(){t.find("input[type='file']").val("");t.find(".alert-danger.error").remove()});e.on("click",function(){var t=i.find(".destination-group"),r=n.attr("data-folderpath");r?(t.find("p.destination-folder").html(r+"/"),t.show()):t.hide();i.modal("show")});o.on("click",function(){r.addFolder()});i.on("hidden.bs.modal",function(){i.find("#FolderName").val("");i.find(".alert-danger.error").remove()})}};t.prototype.load=function(t){var r=this,i=r._element,u=i.children(".sharepoint-data"),o=i.children(".sharepoint-error"),s=i.children(".sharepoint-empty"),a=i.children(".sharepoint-access-denied"),v=i.children(".sharepoint-loading"),p=i.find(".sharepoint-breadcrumbs"),h=i.find(".sharepoint-pagination"),w=r._serviceUrlGet,b=r._target,k=r._pageSize,c,f,e;o.hide();s.hide();a.hide();u.hide().empty();p.hide().empty();h.hide();v.show();c=i.attr("data-sort-expression")||"FileLeafRef ASC";f=h.data("current-page");(f==null||f=="")&&(f=1);t=t||f;e=h.data("pagesize");(e==null||e=="")&&(e=k);var l=i.attr("data-folderpath")||"",y=l.replace(/[\t\n\f \/>"'<=]/g,""),d=i.attr("data-paging-info"+t+y);r.getData(w,b,c,t,e,d,l,function(t){var f,e;if(typeof t==typeof undefined||t===!1||t==null){s.fadeIn();return}if(typeof t.AccessDenied!=typeof undefined&&t.AccessDenied!==!1&&t.AccessDenied){a.fadeIn();return}if(t.TotalCount==0){s.fadeIn();return}f=n("#sharepoint-template").html();e=Handlebars.compile(f);u.html(e(t));u.find("abbr.timeago").each(function(){var r=n(this).attr("title"),t=window.moment;if(t){var u=dateFormatConverter.convert(i.closest("[data-dateformat]").data("dateformat")||"M/d/yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(i.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),e=u+" "+f;n(this).text(t(r).format(e))}});u.find("abbr.timeago").timeago();r.initializeBreadcrumbs(l);u.fadeIn();r.addFolderClickEventHandlers();r._deleteEnabled&&r._deleteEnabled!="False"&&r.addDeleteClickEventHandlers();var o=c.split(" "),h=o[0],v=o[1];i.find(".view-grid").find("table").find("th.sort-enabled a").each(function(){var t=n(this).closest("th");t.data("sort-name")==h&&(v=="ASC"?(t.data("sort-dir","ASC").removeClass("sort-desc").addClass("sort-asc"),t.attr("aria-sort","ascending"),n(this).append(" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-up")).append("<span class='sr-only sort-hint'>. Activate to sort in descending order<\/span>")):(t.data("sort-dir","DESC").removeClass("sort-asc").addClass("sort-desc"),t.attr("aria-sort","descending"),n(this).append(" ").append(n("<span><\/span>").addClass("fa").addClass("fa-arrow-down")).append("<span class='sr-only sort-hint'>. Activate to sort in ascending order<\/span>")),t.addClass("sort"))});r.addSortEventHandlers();r.initializePagination(t,y)},function(n,t,i){o.find(".details").append(i);o.show()},function(){v.hide()})};t.prototype.getData=function(t,i,r,u,f,e,o,s,h,c){var l,a;if(s=n.isFunction(s)?s:function(){},h=n.isFunction(h)?h:function(){},c=n.isFunction(c)?c:function(){},!t||t==""){c.call(this);h.call(this,null,"error","A required service url was not provided.");return}if(!i){c.call(this);h.call(this,null,"error","A required regarding EntityReference parameter was not provided.");return}f=f||-1;l={};l.regarding=i;l.sortExpression=r;l.page=u;l.pageSize=f;l.pagingInfo=e;l.folderPath=o;a=JSON.stringify(l);n.ajax({type:"POST",dataType:"json",contentType:"application/json",url:t,data:a,global:!1}).done(s).fail(h).always(c)};t.prototype.initializeBreadcrumbs=function(t){if(t){var u=this,f=u._element,i=f.find(".sharepoint-breadcrumbs"),r="",e=t.split("/");n.each(e,function(t,o){t==e.length-1?i.append("<li class='active'>"+o+"<\/li>"):o?(r=r+"/"+o,i.append("<li><a href='#' data-folderpath=\""+r+'">'+o+"<\/a><\/li>")):i.append("<li><a href='#' data-folderpath=''><span class='fa fa-step-backward fa-fw' aria-hidden='true'><\/span><span class='sr-only'>Root<\/span><\/a><\/li>");i.find("a").on("click",function(t){t.stopImmediatePropagation();t.preventDefault();f.attr("data-folderpath",n(this).attr("data-folderpath"));u.load(1)})});i.fadeIn()}};t.prototype.addFolderClickEventHandlers=function(){var t=this,i=t._element;i.find(".folder-link").on("click",function(r){r.stopImmediatePropagation();r.preventDefault();i.attr("data-folderpath",n(this).attr("data-folderpath"));t.load(1)})};t.prototype.addFile=function(){var f=this,e=f._element,l=f._target,s=f._serviceUrlAddFiles,t=e.find(".modal-add-file"),a=t.find(".modal-footer button.primary"),v=!1,y,u,h,r,c,o;if(s==null||s==""){y={Message:"System Error",InnerError:{Message:"The URL to the service for this Add File Request could not be determined."}};i(y,t);return}if(u=t.find("input[type='file']"),h=t.find("input[type='checkbox']"),h.length>0&&(v=h.prop("checked")),a.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-pulse' aria-hidden='true'><\/span> "),window.FormData!==undefined){if(r=new FormData,r.append("regardingEntityLogicalName",l.LogicalName),r.append("regardingEntityId",l.Id),u.length>0&&typeof u[0].files!=typeof undefined&&u[0].files.length>0)for(c=u[0].files,o=0;o<c.length;o++)r.append("files",c[o]);r.append("overwrite",v);e.attr("data-folderpath")&&r.append("folderPath",e.attr("data-folderpath"));shell.ajaxSafePost({url:s,type:"POST",data:r,mimeType:"multipart/form-data",contentType:!1,cache:!1,processData:!1}).done(function(){f._addSuccess=!0;e.trigger("refresh");t.modal("hide")}).fail(function(r){var u=r.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(r.responseText):{Message:r.status,InnerError:{Message:r.statusText}};i(f,t)}).always(function(){a.removeAttr("disabled","disabled").find(".fa-pulse").remove()})}else i({Message:"Your browser does not support FormData."},t)};t.prototype.addFolder=function(){var t=this,f=t._element,a=t._target,e=t._serviceUrlAddFolder,r=f.find(".modal-add-folder"),o=r.find(".modal-footer button.primary"),s,l;if(e==null||e==""){s={Message:"System Error",InnerError:{Message:"The URL to the service for this Add Folder Request could not be determined."}};i(s,r);return}o.attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-pulse' aria-hidden='true'><\/span> ");var h=r.find("#FolderName").val(),c=f.attr("data-folderpath")||"",u={};u.regarding=a;u.name=h;u.folderPath=c;l=JSON.stringify(u);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:e,data:l}).done(function(){t._addSuccess=!0;f.attr("data-folderpath",c+"/"+h);r.modal("hide");t.load(1)}).fail(function(t){var u=t.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(t.responseText):{Message:t.status,InnerError:{Message:t.statusText}};i(f,r)}).always(function(){o.removeAttr("disabled","disabled").find(".fa-pulse").remove()})};t.prototype.addDeleteClickEventHandlers=function(){var u=this,f=u._element,e=u._target,o=u._serviceUrlDelete,t=f.children(".modal-delete-file"),r;if(t.length!=0){t.on("hidden.bs.modal",function(){t.find(".sp-item-name").remove();t.find(".alert-danger.error").remove()});if(r=f.children(".modal-delete-folder"),r.length!=0){r.on("hidden.bs.modal",function(){r.find(".sp-item-name").remove();r.find(".alert-danger.error").remove()});f.find(".delete-link").on("click",function(s){var c,l,h,v,a;if(s.stopImmediatePropagation(),s.preventDefault(),c=n(this).closest(".sp-item"),l=c.data("id"),!l||l==""){console.log("Failed to launch delete dialog. Data parameter 'id' is null.");return}h=c.data("foldername")?r:t;v=h.find(".modal-body");v.append(n("<p class='sp-item-name'>").html(c.find("a").html()));a=h.find(".modal-footer button.primary");a.unbind("click");a.on("click",function(){var r,s;n(this).attr("disabled","disabled").prepend("<span class='fa fa-spinner fa-pulse' aria-hidden='true'><\/span>");r={};r.regarding=e;r.id=l;s=JSON.stringify(r);shell.ajaxSafePost({type:"POST",contentType:"application/json",url:o,data:s}).done(function(){u._deleteSuccess=!0;f.trigger("refresh");h.modal("hide")}).fail(function(r){var u=r.getResponseHeader("content-type"),f=u.indexOf("json")>-1?n.parseJSON(r.responseText):{Message:r.status,InnerError:{Message:r.statusText}};i(f,t)}).always(function(){a.removeAttr("disabled","disabled").find(".fa-pulse").remove()})});h.modal()})}}};t.prototype.addSortEventHandlers=function(){var t=this,i=t._element;i.find(".view-grid").find("table").find("th.sort-enabled a").on("click",function(r){var o;r.stopImmediatePropagation();r.preventDefault();var e=n(this).closest("th"),u=e.data("sort-name"),f=e.data("sort-dir");typeof u!=typeof undefined&&u!==!1&&u!==null&&u!==""&&((typeof f==typeof undefined||f===!1)&&(f=""),o=f=="ASC"?u+" DESC":u+" ASC",i.attr("data-sort-expression",o),t.load(1))})};t.prototype.initializePagination=function(t,i){if(typeof t!=typeof undefined&&t!==!1&&t!=null&&typeof t.PageSize!=typeof undefined&&t.PageSize!==!1&&t.PageSize!=null&&typeof t.PageNumber!=typeof undefined&&t.PageNumber!==!1&&t.PageNumber!=null&&typeof t.TotalCount!=typeof undefined&&t.TotalCount!==!1&&t.TotalCount!=null){var e=this,u=e._element,f=u.find(".sharepoint-pagination"),r=parseInt(u.attr("data-page-count"+i))||1;if(t.PagingInfo&&(u.attr("data-paging-info"+(t.PageNumber+1)+i,t.PagingInfo),r<t.PageNumber+1&&(r=t.PageNumber+1,u.attr("data-page-count"+i,r))),r<=1){f.hide();return}f.data("pagesize",t.PageSize).data("pages",r).data("current-page",t.PageNumber).data("count",t.TotalCount).unbind("click").pagination({total_pages:f.data("pages"),current_page:f.data("current-page"),callback:function(t,i){t.stopImmediatePropagation();t.preventDefault();var r=n(t.target).closest("li");r.not(".disabled").length>0&&r.not(".active").length>0&&e.load(i)}}).show()}}}(jQuery);portal=portal||{};portal.convertAbbrDateTimesToTimeAgo=function(n){n("abbr.timeago").each(function(){var t=Date.parse(n(this).text());t&&(n(this).attr("title",t.toString("yyyy-MM-ddTHH:mm:ss")),n(this).text(t.toString("MMMM dd, yyyy h:mm tt")))});n("abbr.timeago").timeago();n("abbr.posttime").each(function(){var t=Date.parse(n(this).text());t&&(n(this).attr("title",t.toString("MMMM dd, yyyy h:mm tt")),n(this).text(t.toString("MMMM dd, yyyy h:mm tt")))})};portal.initializeHtmlEditors=function(){var n=$("[data-app-path]").data("app-path")||"/";$(document).on("focusin",function(n){$(n.target).closest(".mce-window").length&&n.stopImmediatePropagation()});$(".html-editors textarea").each(function(){CKEDITOR.replace(this,{customConfig:"",height:240,uiColor:"#EEEEEE",contentsCss:[n+"css/bootstrap.min.css",n+"css/ckeditor.css"],stylesSet:"portal",format_tags:"p;h1;h2;h3;h4;h5;h6;pre",disableNativeSpellChecker:!1,toolbarGroups:[{name:"clipboard",groups:["clipboard","undo"]},{name:"links",groups:["links"]},{name:"editing",groups:["find","selection","spellchecker","editing"]},{name:"insert",groups:["insert"]},{name:"forms",groups:["forms"]},{name:"tools",groups:["tools"]},{name:"document",groups:["document","doctools","mode"]},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]},{name:"others",groups:["others"]},{name:"about",groups:["about"]}],removeButtons:"Save,NewPage,Preview,Print,Templates,SelectAll,Find,Replace,Form,Checkbox,Radio,TextField,Textarea,Select,Button,ImageButton,HiddenField,Anchor,Flash,Smiley,PageBreak,Iframe,ShowBlocks,Font,FontSize,CreateDiv,JustifyLeft,JustifyCenter,JustifyRight,JustifyBlock,BidiRtl,BidiLtr,Language,TextColor,BGColor,About,Subscript,Superscript,Underline",on:{change:function(){this.updateElement()}}})})},function(n,t){function r(t,i){var r=n(".notifications"),u,f;r.length==0&&(u=n(".page-heading"),r=u.length==0?n("<div class='notifications'><\/div>").prependTo(n("#content-container")):n("<div class='notifications'><\/div>").appendTo(u));r.find(".notification").slideUp().remove();typeof t!=typeof undefined&&t!==!1&&t!=null&&t!=""&&(f=n("<div class='notification alert alert-success success alert-dismissible' role='alert'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;<\/span><\/button>"+t+"<\/div>").on("closed.bs.alert",function(){r.find(".notification").length==0&&r.hide()}).prependTo(r),r.show(),window.scrollTo(0,0),i&&setTimeout(function(){f.slideUp(100).remove();r.find(".notification").length==0&&r.hide()},5e3))}CKEDITOR.stylesSet.add("portal",[{name:"Code",element:"code"},{name:"Code Block",element:"pre",attributes:{"class":"linenums prettyprint"}}]);portal.initializeHtmlEditors();n(function(){var t;portal.convertAbbrDateTimesToTimeAgo(n);t=n(".facebook-signin");t.on("click",function(n){n.preventDefault();window.open(t.attr("href"),"facebook_auth","menubar=1,resizable=1,scrollbars=yes,width=800,height=600")});n(".crmEntityFormView input:not([value])[readonly]:not([placeholder]), .crmEntityFormView input[value=''][readonly]:not([placeholder])").each(function(){n(this).after(n("<div>&mdash;<\/div>").addClass("text-muted").css("position","absolute").css("top",n(this).position().top+7).css("left",n(this).position().left+2))});n(".crmEntityFormView select[disabled] option:checked[value='']").closest("select").each(function(){n(this).after(n("<div>&mdash;<\/div>").addClass("text-muted").css("position","absolute").css("top",n(this).position().top+7).css("left",n(this).position().left+2))});n(".crmEntityFormView textarea[readonly]").filter(function(){return n(this).val().length===0}).each(function(){n(this).after(n("<div>&mdash;<\/div>").addClass("text-muted").css("position","absolute").css("top",n(this).position().top+7).css("left",n(this).position().left+2))});n(".btn-select").each(function(){var t=n(this),i=n(t.data("target")),r=n("option:selected",i),f=n(t.data("focus")),u=n(".btn .selected",t);r.length>0&&(u.text(r.text()),n('.dropdown-menu li > a[data-value="'+r.val()+'"]',t).parent("li").addClass("active"));i.change(function(){var r=n("option:selected",i);t.find(".dropdown-menu li.active").removeClass("active");u.text(r.text());n('.dropdown-menu li > a[data-value="'+r.val()+'"]',t).parent("li").addClass("active")});n(".dropdown-menu li > a",t).click(function(){var r=n(this),e=r.data("value");n(".dropdown-menu li",t).removeClass("active");r.parent("li").addClass("active");i.val(e);u.text(r.text());f.focus()})});n("abbr.timestamp").each(function(){var t=n(this),i=t.text(),r=Date.parse(i);if(r){t.attr("title",i);var u=dateFormatConverter.convert(t.closest("[data-dateformat]").data("dateformat")||"MMMM d, yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(t.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),e=dateFormatConverter.convert(t.attr("data-format"),dateFormatConverter.dotNet,dateFormatConverter.momentJs)||u+" "+f;t.text(moment(r).format(e))}});var i=dateFormatConverter.convert(n(".crmEntityFormView").closest("[data-dateformat]").data("dateformat")||"MM/dd/yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),r=dateFormatConverter.convert(n(".crmEntityFormView").closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),u=i+" "+r;n("time").each(function(){if(moment){var t=n(this).attr("datetime");n(this).hasClass("date-only")?n(this).text(moment(t).format(i)):n(this).text(moment(t).format(u))}});n(".vevent").each(function(){var t=n(".dtstart",this),i=n(".dtend",this),e=t.text(),o=i.text(),r=Date.parse(e),u=Date.parse(o);if(r){t.attr("title",e);var s=dateFormatConverter.convert(t.closest("[data-dateformat]").data("dateformat")||"MMMM d, yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(t.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),h=dateFormatConverter.convert(t.attr("data-format"),dateFormatConverter.dotNet,dateFormatConverter.momentJs)||s+" "+f;t.text(moment(r).format(h))}if(u){i.attr("title",o);var c=r&&r.getYear()==u.getYear()&&r.getMonth()==u.getMonth()&&r.getDate()==u.getDate(),s=dateFormatConverter.convert(i.closest("[data-dateformat]").data("dateformat")||"MMMM d, yyyy",dateFormatConverter.dotNet,dateFormatConverter.momentJs),f=dateFormatConverter.convert(i.closest("[data-timeformat]").data("timeformat")||"h:mm tt",dateFormatConverter.dotNet,dateFormatConverter.momentJs),h=dateFormatConverter.convert(i.attr("data-format"),dateFormatConverter.dotNet,dateFormatConverter.momentJs)||s+" "+f;i.text(moment(u).format(c?f:h))}});n(".carousel").carousel();n.ui&&n.ui.tooltip&&n.widget.bridge("uitooltip",n.ui.tooltip);n(".has-tooltip").tooltip();prettyPrint(),function(){var t={};n(".shopping-cart-status").each(function(){var r=n(this),u=r.attr("data-href"),f=r.find(".count"),e=f.find(".value"),i;u&&(i=t[u],n.isArray(i)||(i=t[u]=[]),i.push(function(n){n!=null&&n.Count&&n.Count>0&&(e.text(n.Count),f.addClass("visible"),r.addClass("visible"))}))});n.each(t,function(t,i){n.getJSON(t,function(t){n.each(i,function(n,i){i(t)})})})}();n('[data-state="sitemap"]').each(function(){var t=n(this),r=t.data("sitemap-current"),u=t.data("sitemap-ancestor"),f=t.closest("[data-sitemap-state]").data("sitemap-state"),i,e;f&&(r||u)&&(i=f.split(":"),e=i[i.length-1],t.find("[data-sitemap-node]").each(function(){var f=n(this),t=f.data("sitemap-node");t&&n.each(i,function(n,i){n===0?r&&i==t&&f.addClass(r):u&&i==t&&t!=e&&f.addClass(u)})}))}),function(){var t=URI?URI(document.location.href).search(!0)||{}:{};n("[data-query]").each(function(){var i=n(this),r=t[i.data("query")];typeof r!="undefined"&&i.val(r).change()})}()});typeof t!="undefined"&&t&&(t.zindex=2e3,function(){for(var r,u,f,e,o=[t.ckeditorSettings,t.ckeditorCompactSettings],i=0;i<o.length;i++)(r=o[i],r)&&(u=n('head > link[rel="stylesheet"]').map(function(t,i){var r=n(i).attr("href");return r.match(/,/)?null:r}).get(),u.push((n("[data-app-path]").data("app-path")||"/")+"css/ckeditor.css"),r.contentsCss=u);if(f=CKEDITOR.stylesSet.get("cms"),f)for(e=[{name:"Page Header",element:"div",attributes:{"class":"page-header"}},{name:"Alert (Info)",element:"div",attributes:{"class":"alert alert-info"}},{name:"Alert (Success)",element:"div",attributes:{"class":"alert alert-success"}},{name:"Alert (Warning)",element:"div",attributes:{"class":"alert alert-warning"}},{name:"Alert (Danger)",element:"div",attributes:{"class":"alert alert-danger"}},{name:"Well",element:"div",attributes:{"class":"well"}},{name:"Well (Small)",element:"div",attributes:{"class":"well well-sm"}},{name:"Well (Large",element:"div",attributes:{"class":"well well-lg"}},{name:"Label",element:"span",attributes:{"class":"label label-default"}},{name:"Label (Info)",element:"span",attributes:{"class":"label label-info"}},{name:"Label (Success)",element:"span",attributes:{"class":"label label-success"}},{name:"Label (Warning)",element:"span",attributes:{"class":"label label-warning"}},{name:"Label (Danger)",element:"span",attributes:{"class":"label label-danger"}}],i=0;i<e.length;i++)f.push(e[i])}());var i=n.cookie("adx-notification");typeof i!=typeof undefined&&i!=null&&(r(i,!0),n.cookie("adx-notification",null))}(window.jQuery,window.XRM)